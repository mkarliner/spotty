var Ge=Object.defineProperty,Ye=Object.defineProperties,Xe=Object.getOwnPropertyDescriptors,Pe=Object.getOwnPropertySymbols,Ze=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable,Me=(X,ae,E)=>ae in X?Ge(X,ae,{enumerable:!0,configurable:!0,writable:!0,value:E}):X[ae]=E,Ce=(X,ae)=>{for(var E in ae||(ae={}))Ze.call(ae,E)&&Me(X,E,ae[E]);if(Pe)for(var E of Pe(ae))Je.call(ae,E)&&Me(X,E,ae[E]);return X},ke=(X,ae)=>Ye(X,Xe(ae));const et=(X,ae,E=!1)=>{const U=X.split("/");E&&U.length>2&&X.startsWith("$share/")&&U.splice(0,2);const L=U.length,w=ae.split("/");for(let d=0;d<L;++d){const p=U[d],h=w[d];if(p==="#")return w.length>=L-1;if(p!=="+"&&p!==h)return!1}return L===w.length},tt={log:(...X)=>{},error:(...X)=>{},warn:(...X)=>{},info:(...X)=>{}},rt=()=>tt;var Ee={eq:et,debug:rt},ye=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function nt(X){return X&&X.__esModule&&Object.prototype.hasOwnProperty.call(X,"default")?X.default:X}function Te(X){throw new Error('Could not dynamically require "'+X+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Oe={exports:{}};(function(X,ae){(function(E){X.exports=E()})(function(){return(function(){function E(U,L,w){function d(s,t){if(!L[s]){if(!U[s]){var r=typeof Te=="function"&&Te;if(!t&&r)return r(s,!0);if(p)return p(s,!0);var e=new Error("Cannot find module '"+s+"'");throw e.code="MODULE_NOT_FOUND",e}var n=L[s]={exports:{}};U[s][0].call(n.exports,function(u){var o=U[s][1][u];return d(o||u)},n,n.exports,E,U,L,w)}return L[s].exports}for(var p=typeof Te=="function"&&Te,h=0;h<w.length;h++)d(w[h]);return d}return E})()({1:[function(E,U,L){(function(w,d){(function(){const p=E("events").EventEmitter,h=E("./store"),s=E("./topic-alias-recv"),t=E("./topic-alias-send"),r=E("mqtt-packet"),e=E("./default-message-id-provider"),n=E("readable-stream").Writable,u=E("inherits"),o=E("reinterval"),v=E("rfdc/default"),y=E("./validations"),f=E("xtend"),i=E("debug")("mqttjs:client"),g=w?w.nextTick:function(C){setTimeout(C,0)},S=d.setImmediate||function(C){g(C)},A={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0},P=["ECONNREFUSED","EADDRINUSE","ECONNRESET","ENOTFOUND"],B={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};function R(){return"mqttjs_"+Math.random().toString(16).substr(2,8)}function W(C,I){if(C.options.protocolVersion===5&&I.cmd==="publish"){let D;I.properties&&(D=I.properties.topicAlias);const G=I.topic.toString();if(C.topicAliasSend)if(D){if(G.length!==0&&(i("applyTopicAlias :: register topic: %s - alias: %d",G,D),!C.topicAliasSend.put(G,D)))return i("applyTopicAlias :: error out of range. topic: %s - alias: %d",G,D),new Error("Sending Topic Alias out of range")}else G.length!==0&&(C.options.autoAssignTopicAlias?(D=C.topicAliasSend.getAliasByTopic(G),D?(I.topic="",I.properties=ke(Ce({},I.properties),{topicAlias:D}),i("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",G,D)):(D=C.topicAliasSend.getLruAlias(),C.topicAliasSend.put(G,D),I.properties=ke(Ce({},I.properties),{topicAlias:D}),i("applyTopicAlias :: auto assign topic: %s - alias: %d",G,D))):C.options.autoUseTopicAlias&&(D=C.topicAliasSend.getAliasByTopic(G),D&&(I.topic="",I.properties=ke(Ce({},I.properties),{topicAlias:D}),i("applyTopicAlias :: auto use topic: %s - alias: %d",G,D))));else if(D)return i("applyTopicAlias :: error out of range. topic: %s - alias: %d",G,D),new Error("Sending Topic Alias out of range")}}function l(C,I){let D;I.properties&&(D=I.properties.topicAlias);let G=I.topic.toString();if(G.length===0){if(typeof D=="undefined")return new Error("Unregistered Topic Alias");if(G=C.topicAliasSend.getTopicByAlias(D),typeof G=="undefined")return new Error("Unregistered Topic Alias");I.topic=G}D&&delete I.properties.topicAlias}function _(C,I,D){i("sendPacket :: packet: %O",I),i("sendPacket :: emitting `packetsend`"),C.emit("packetsend",I),i("sendPacket :: writing to stream");const G=r.writeToStream(I,C.stream,C.options);i("sendPacket :: writeToStream result %s",G),!G&&D&&D!==H?(i("sendPacket :: handle events on `drain` once through callback."),C.stream.once("drain",D)):D&&(i("sendPacket :: invoking cb"),D())}function b(C){C&&(i("flush: queue exists? %b",!!C),Object.keys(C).forEach(function(I){typeof C[I].cb=="function"&&(C[I].cb(new Error("Connection closed")),delete C[I])}))}function j(C){C&&(i("flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(C).forEach(function(I){C[I].volatile&&typeof C[I].cb=="function"&&(C[I].cb(new Error("Connection closed")),delete C[I])}))}function V(C,I,D,G){i("storeAndSend :: store packet with cmd %s to outgoingStore",I.cmd);let se=I,ie;if(se.cmd==="publish"&&(se=v(I),ie=l(C,se),ie))return D&&D(ie);C.outgoingStore.put(se,function(Q){if(Q)return D&&D(Q);G(),_(C,I,D)})}function H(C){i("nop ::",C)}function Y(C,I){let D;const G=this;if(!(this instanceof Y))return new Y(C,I);this.options=I||{};for(D in A)typeof this.options[D]=="undefined"?this.options[D]=A[D]:this.options[D]=I[D];i("MqttClient :: options.protocol",I.protocol),i("MqttClient :: options.protocolVersion",I.protocolVersion),i("MqttClient :: options.username",I.username),i("MqttClient :: options.keepalive",I.keepalive),i("MqttClient :: options.reconnectPeriod",I.reconnectPeriod),i("MqttClient :: options.rejectUnauthorized",I.rejectUnauthorized),i("MqttClient :: options.topicAliasMaximum",I.topicAliasMaximum),this.options.clientId=typeof I.clientId=="string"?I.clientId:R(),i("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=I.protocolVersion===5&&I.customHandleAcks?I.customHandleAcks:function(){arguments[3](0)},this.streamBuilder=C,this.messageIdProvider=typeof this.options.messageIdProvider=="undefined"?new e:this.options.messageIdProvider,this.outgoingStore=I.outgoingStore||new h,this.incomingStore=I.incomingStore||new h,this.queueQoSZero=I.queueQoSZero===void 0?!0:I.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,I.topicAliasMaximum>0&&(I.topicAliasMaximum>65535?i("MqttClient :: options.topicAliasMaximum is out of range"):this.topicAliasRecv=new s(I.topicAliasMaximum)),this.on("connect",function(){const se=this.queue;function ie(){const K=se.shift();i("deliver :: entry %o",K);let Q=null;if(!K){G._resubscribe();return}Q=K.packet,i("deliver :: call _sendPacket for %o",Q);let ne=!0;Q.messageId&&Q.messageId!==0&&(G.messageIdProvider.register(Q.messageId)||(ne=!1)),ne?G._sendPacket(Q,function(te){K.cb&&K.cb(te),ie()}):(i("messageId: %d has already used. The message is skipped and removed.",Q.messageId),ie())}i("connect :: sending queued packets"),ie()}),this.on("close",function(){i("close :: connected set to `false`"),this.connected=!1,i("close :: clearing connackTimer"),clearTimeout(this.connackTimer),i("close :: clearing ping timer"),G.pingTimer!==null&&(G.pingTimer.clear(),G.pingTimer=null),this.topicAliasRecv&&this.topicAliasRecv.clear(),i("close :: calling _setupReconnect"),this._setupReconnect()}),p.call(this),i("MqttClient :: setting up stream"),this._setupStream()}u(Y,p),Y.prototype._setupStream=function(){const C=this,I=new n,D=r.parser(this.options);let G=null;const se=[];i("_setupStream :: calling method to clear reconnect"),this._clearReconnect(),i("_setupStream :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),D.on("packet",function(te){i("parser :: on packet push to packets array."),se.push(te)});function ie(){if(se.length)g(K);else{const te=G;G=null,te()}}function K(){i("work :: getting next packet in queue");const te=se.shift();if(te)i("work :: packet pulled from queue"),C._handlePacket(te,ie);else{i("work :: no packets in queue");const le=G;G=null,i("work :: done flag is %s",!!le),le&&le()}}I._write=function(te,le,oe){G=oe,i("writable stream :: parsing buffer"),D.parse(te),K()};function Q(te){i("streamErrorHandler :: error",te.message),P.includes(te.code)?(i("streamErrorHandler :: emitting error"),C.emit("error",te)):H(te)}i("_setupStream :: pipe stream to writable stream"),this.stream.pipe(I),this.stream.on("error",Q),this.stream.on("close",function(){i("(%s)stream :: on close",C.options.clientId),j(C.outgoing),i("stream: emit close to MqttClient"),C.emit("close")}),i("_setupStream: sending packet `connect`");const ne=Object.create(this.options);if(ne.cmd="connect",this.topicAliasRecv&&(ne.properties||(ne.properties={}),this.topicAliasRecv&&(ne.properties.topicAliasMaximum=this.topicAliasRecv.max)),_(this,ne),D.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return C.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){const te=f({cmd:"auth",reasonCode:0},this.options.authPacket);_(this,te)}}this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(function(){i("!!connectTimeout hit!! Calling _cleanUp with force `true`"),C._cleanUp(!0)},this.options.connectTimeout)},Y.prototype._handlePacket=function(C,I){const D=this.options;if(D.protocolVersion===5&&D.properties&&D.properties.maximumPacketSize&&D.properties.maximumPacketSize<C.length)return this.emit("error",new Error("exceeding packets size "+C.cmd)),this.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),this;switch(i("_handlePacket :: emitting packetreceive"),this.emit("packetreceive",C),C.cmd){case"publish":this._handlePublish(C,I);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(C),I();break;case"pubrel":this._handlePubrel(C,I);break;case"connack":this._handleConnack(C),I();break;case"auth":this._handleAuth(C),I();break;case"pingresp":this._handlePingresp(C),I();break;case"disconnect":this._handleDisconnect(C),I();break}},Y.prototype._checkDisconnecting=function(C){return this.disconnecting&&(C&&C!==H?C(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},Y.prototype.publish=function(C,I,D,G){i("publish :: message `%s` to topic `%s`",I,C);const se=this.options;if(typeof D=="function"&&(G=D,D=null),D=f({qos:0,retain:!1,dup:!1},D),this._checkDisconnecting(G))return this;const K=this,Q=function(){let ne=0;if((D.qos===1||D.qos===2)&&(ne=K._nextId(),ne===null))return i("No messageId left"),!1;const te={cmd:"publish",topic:C,payload:I,qos:D.qos,retain:D.retain,messageId:ne,dup:D.dup};switch(se.protocolVersion===5&&(te.properties=D.properties),i("publish :: qos",D.qos),D.qos){case 1:case 2:K.outgoing[te.messageId]={volatile:!1,cb:G||H},i("MqttClient:publish: packet cmd: %s",te.cmd),K._sendPacket(te,void 0,D.cbStorePut);break;default:i("MqttClient:publish: packet cmd: %s",te.cmd),K._sendPacket(te,G,D.cbStorePut);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!Q())&&this._storeProcessingQueue.push({invoke:Q,cbStorePut:D.cbStorePut,callback:G}),this},Y.prototype.subscribe=function(){const C=this,I=new Array(arguments.length);for(let oe=0;oe<arguments.length;oe++)I[oe]=arguments[oe];const D=[];let G=I.shift();const se=G.resubscribe;let ie=I.pop()||H,K=I.pop();const Q=this.options.protocolVersion;delete G.resubscribe,typeof G=="string"&&(G=[G]),typeof ie!="function"&&(K=ie,ie=H);const ne=y.validateTopics(G);if(ne!==null)return S(ie,new Error("Invalid topic "+ne)),this;if(this._checkDisconnecting(ie))return i("subscribe: discconecting true"),this;const te={qos:0};if(Q===5&&(te.nl=!1,te.rap=!1,te.rh=0),K=f(te,K),Array.isArray(G)?G.forEach(function(oe){if(i("subscribe: array topic %s",oe),!Object.prototype.hasOwnProperty.call(C._resubscribeTopics,oe)||C._resubscribeTopics[oe].qos<K.qos||se){const q={topic:oe,qos:K.qos};Q===5&&(q.nl=K.nl,q.rap=K.rap,q.rh=K.rh,q.properties=K.properties),i("subscribe: pushing topic `%s` and qos `%s` to subs list",q.topic,q.qos),D.push(q)}}):Object.keys(G).forEach(function(oe){if(i("subscribe: object topic %s",oe),!Object.prototype.hasOwnProperty.call(C._resubscribeTopics,oe)||C._resubscribeTopics[oe].qos<G[oe].qos||se){const q={topic:oe,qos:G[oe].qos};Q===5&&(q.nl=G[oe].nl,q.rap=G[oe].rap,q.rh=G[oe].rh,q.properties=K.properties),i("subscribe: pushing `%s` to subs list",q),D.push(q)}}),!D.length)return ie(null,[]),this;const le=function(){const oe=C._nextId();if(oe===null)return i("No messageId left"),!1;const q={cmd:"subscribe",subscriptions:D,qos:1,retain:!1,dup:!1,messageId:oe};if(K.properties&&(q.properties=K.properties),C.options.resubscribe){i("subscribe :: resubscribe true");const N=[];D.forEach(function(J){if(C.options.reconnectPeriod>0){const O={qos:J.qos};Q===5&&(O.nl=J.nl||!1,O.rap=J.rap||!1,O.rh=J.rh||0,O.properties=J.properties),C._resubscribeTopics[J.topic]=O,N.push(J.topic)}}),C.messageIdToTopic[q.messageId]=N}return C.outgoing[q.messageId]={volatile:!0,cb:function(N,J){if(!N){const O=J.granted;for(let M=0;M<O.length;M+=1)D[M].qos=O[M]}ie(N,D)}},i("subscribe :: call _sendPacket"),C._sendPacket(q),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!le())&&this._storeProcessingQueue.push({invoke:le,callback:ie}),this},Y.prototype.unsubscribe=function(){const C=this,I=new Array(arguments.length);for(let Q=0;Q<arguments.length;Q++)I[Q]=arguments[Q];let D=I.shift(),G=I.pop()||H,se=I.pop();typeof D=="string"&&(D=[D]),typeof G!="function"&&(se=G,G=H);const ie=y.validateTopics(D);if(ie!==null)return S(G,new Error("Invalid topic "+ie)),this;if(C._checkDisconnecting(G))return this;const K=function(){const Q=C._nextId();if(Q===null)return i("No messageId left"),!1;const ne={cmd:"unsubscribe",qos:1,messageId:Q};return typeof D=="string"?ne.unsubscriptions=[D]:Array.isArray(D)&&(ne.unsubscriptions=D),C.options.resubscribe&&ne.unsubscriptions.forEach(function(te){delete C._resubscribeTopics[te]}),typeof se=="object"&&se.properties&&(ne.properties=se.properties),C.outgoing[ne.messageId]={volatile:!0,cb:G},i("unsubscribe: call _sendPacket"),C._sendPacket(ne),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!K())&&this._storeProcessingQueue.push({invoke:K,callback:G}),this},Y.prototype.end=function(C,I,D){const G=this;i("end :: (%s)",this.options.clientId),(C==null||typeof C!="boolean")&&(D=I||H,I=C,C=!1,typeof I!="object"&&(D=I,I=null,typeof D!="function"&&(D=H))),typeof I!="object"&&(D=I,I=null),i("end :: cb? %s",!!D),D=D||H;function se(){i("end :: closeStores: closing incoming and outgoing stores"),G.disconnected=!0,G.incomingStore.close(function(K){G.outgoingStore.close(function(Q){if(i("end :: closeStores: emitting end"),G.emit("end"),D){const ne=K||Q;i("end :: closeStores: invoking callback with args"),D(ne)}})}),G._deferredReconnect&&G._deferredReconnect()}function ie(){i("end :: (%s) :: finish :: calling _cleanUp with force %s",G.options.clientId,C),G._cleanUp(C,()=>{i("end :: finish :: calling process.nextTick on closeStores"),g(se.bind(G))},I)}return this.disconnecting?(D(),this):(this._clearReconnect(),this.disconnecting=!0,!C&&Object.keys(this.outgoing).length>0?(i("end :: (%s) :: calling finish in 10ms once outgoing is empty",G.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,ie,10))):(i("end :: (%s) :: immediately calling finish",G.options.clientId),ie()),this)},Y.prototype.removeOutgoingMessage=function(C){const I=this.outgoing[C]?this.outgoing[C].cb:null;return delete this.outgoing[C],this.outgoingStore.del({messageId:C},function(){I(new Error("Message removed"))}),this},Y.prototype.reconnect=function(C){i("client reconnect");const I=this,D=function(){C?(I.options.incomingStore=C.incomingStore,I.options.outgoingStore=C.outgoingStore):(I.options.incomingStore=null,I.options.outgoingStore=null),I.incomingStore=I.options.incomingStore||new h,I.outgoingStore=I.options.outgoingStore||new h,I.disconnecting=!1,I.disconnected=!1,I._deferredReconnect=null,I._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=D:D(),this},Y.prototype._reconnect=function(){i("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this._setupStream()}),i("client already connected. disconnecting first.")):(i("_reconnect: calling _setupStream"),this._setupStream())},Y.prototype._setupReconnect=function(){const C=this;!C.disconnecting&&!C.reconnectTimer&&C.options.reconnectPeriod>0?(this.reconnecting||(i("_setupReconnect :: emit `offline` state"),this.emit("offline"),i("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),i("_setupReconnect :: setting reconnectTimer for %d ms",C.options.reconnectPeriod),C.reconnectTimer=setInterval(function(){i("reconnectTimer :: reconnect triggered!"),C._reconnect()},C.options.reconnectPeriod)):i("_setupReconnect :: doing nothing...")},Y.prototype._clearReconnect=function(){i("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},Y.prototype._cleanUp=function(C,I){const D=arguments[2];if(I&&(i("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",I)),i("_cleanUp :: forced? %s",C),C)this.options.reconnectPeriod===0&&this.options.clean&&b(this.outgoing),i("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{const G=f({cmd:"disconnect"},D);i("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(G,S.bind(null,this.stream.end.bind(this.stream)))}this.disconnecting||(i("_cleanUp :: client not disconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this.pingTimer!==null&&(i("_cleanUp :: clearing pingTimer"),this.pingTimer.clear(),this.pingTimer=null),I&&!this.connected&&(i("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",I),I())},Y.prototype._sendPacket=function(C,I,D){i("_sendPacket :: (%s) ::  start",this.options.clientId),D=D||H,I=I||H;const G=W(this,C);if(G){I(G);return}if(!this.connected){if(C.cmd==="auth"){this._shiftPingInterval(),_(this,C,I);return}i("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(C,I,D);return}switch(this._shiftPingInterval(),C.cmd){case"publish":break;case"pubrel":V(this,C,I,D);return;default:_(this,C,I);return}switch(C.qos){case 2:case 1:V(this,C,I,D);break;case 0:default:_(this,C,I);break}i("_sendPacket :: (%s) ::  end",this.options.clientId)},Y.prototype._storePacket=function(C,I,D){i("_storePacket :: packet: %o",C),i("_storePacket :: cb? %s",!!I),D=D||H;let G=C;if(G.cmd==="publish"){G=v(C);const se=l(this,G);if(se)return I&&I(se)}(G.qos||0)===0&&this.queueQoSZero||G.cmd!=="publish"?this.queue.push({packet:G,cb:I}):G.qos>0?(I=this.outgoing[G.messageId]?this.outgoing[G.messageId].cb:null,this.outgoingStore.put(G,function(se){if(se)return I&&I(se);D()})):I&&I(new Error("No connection to broker"))},Y.prototype._setupPingTimer=function(){i("_setupPingTimer :: keepalive %d (seconds)",this.options.keepalive);const C=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=o(function(){C._checkPing()},this.options.keepalive*1e3))},Y.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(this.options.keepalive*1e3)},Y.prototype._checkPing=function(){i("_checkPing :: checking ping..."),this.pingResp?(i("_checkPing :: ping response received. Clearing flag and sending `pingreq`"),this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):(i("_checkPing :: calling _cleanUp with force true"),this._cleanUp(!0))},Y.prototype._handlePingresp=function(){this.pingResp=!0},Y.prototype._handleConnack=function(C){i("_handleConnack");const I=this.options,G=I.protocolVersion===5?C.reasonCode:C.returnCode;if(clearTimeout(this.connackTimer),delete this.topicAliasSend,C.properties){if(C.properties.topicAliasMaximum){if(C.properties.topicAliasMaximum>65535){this.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}C.properties.topicAliasMaximum>0&&(this.topicAliasSend=new t(C.properties.topicAliasMaximum))}C.properties.serverKeepAlive&&I.keepalive&&(I.keepalive=C.properties.serverKeepAlive,this._shiftPingInterval()),C.properties.maximumPacketSize&&(I.properties||(I.properties={}),I.properties.maximumPacketSize=C.properties.maximumPacketSize)}if(G===0)this.reconnecting=!1,this._onConnect(C);else if(G>0){const se=new Error("Connection refused: "+B[G]);se.code=G,this.emit("error",se)}},Y.prototype._handleAuth=function(C){const D=this.options.protocolVersion,G=D===5?C.reasonCode:C.returnCode;if(D!==5){const ie=new Error("Protocol error: Auth packets are only supported in MQTT 5. Your version:"+D);ie.code=G,this.emit("error",ie);return}const se=this;this.handleAuth(C,function(ie,K){if(ie){se.emit("error",ie);return}if(G===24)se.reconnecting=!1,se._sendPacket(K);else{const Q=new Error("Connection refused: "+B[G]);ie.code=G,se.emit("error",Q)}})},Y.prototype.handleAuth=function(C,I){I()},Y.prototype._handlePublish=function(C,I){i("_handlePublish: packet %o",C),I=typeof I!="undefined"?I:H;let D=C.topic.toString();const G=C.payload,se=C.qos,ie=C.messageId,K=this,Q=this.options,ne=[0,16,128,131,135,144,145,151,153];if(this.options.protocolVersion===5){let te;if(C.properties&&(te=C.properties.topicAlias),typeof te!="undefined")if(D.length===0)if(te>0&&te<=65535){const le=this.topicAliasRecv.getTopicByAlias(te);if(le)D=le,i("_handlePublish :: topic complemented by alias. topic: %s - alias: %d",D,te);else{i("_handlePublish :: unregistered topic alias. alias: %d",te),this.emit("error",new Error("Received unregistered Topic Alias"));return}}else{i("_handlePublish :: topic alias out of range. alias: %d",te),this.emit("error",new Error("Received Topic Alias is out of range"));return}else if(this.topicAliasRecv.put(D,te))i("_handlePublish :: registered topic: %s - alias: %d",D,te);else{i("_handlePublish :: topic alias out of range. alias: %d",te),this.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(i("_handlePublish: qos %d",se),se){case 2:{Q.customHandleAcks(D,G,C,function(te,le){if(te instanceof Error||(le=te,te=null),te)return K.emit("error",te);if(ne.indexOf(le)===-1)return K.emit("error",new Error("Wrong reason code for pubrec"));le?K._sendPacket({cmd:"pubrec",messageId:ie,reasonCode:le},I):K.incomingStore.put(C,function(){K._sendPacket({cmd:"pubrec",messageId:ie},I)})});break}case 1:{Q.customHandleAcks(D,G,C,function(te,le){if(te instanceof Error||(le=te,te=null),te)return K.emit("error",te);if(ne.indexOf(le)===-1)return K.emit("error",new Error("Wrong reason code for puback"));le||K.emit("message",D,G,C),K.handleMessage(C,function(oe){if(oe)return I&&I(oe);K._sendPacket({cmd:"puback",messageId:ie,reasonCode:le},I)})});break}case 0:this.emit("message",D,G,C),this.handleMessage(C,I);break;default:i("_handlePublish: unknown QoS. Doing nothing.");break}},Y.prototype.handleMessage=function(C,I){I()},Y.prototype._handleAck=function(C){const I=C.messageId,D=C.cmd;let G=null;const se=this.outgoing[I]?this.outgoing[I].cb:null,ie=this;let K;if(!se){i("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(i("_handleAck :: packet type",D),D){case"pubcomp":case"puback":{const Q=C.reasonCode;Q&&Q>0&&Q!==16&&(K=new Error("Publish error: "+B[Q]),K.code=Q,se(K,C)),delete this.outgoing[I],this.outgoingStore.del(C,se),this.messageIdProvider.deallocate(I),this._invokeStoreProcessingQueue();break}case"pubrec":{G={cmd:"pubrel",qos:2,messageId:I};const Q=C.reasonCode;Q&&Q>0&&Q!==16?(K=new Error("Publish error: "+B[Q]),K.code=Q,se(K,C)):this._sendPacket(G);break}case"suback":{delete this.outgoing[I],this.messageIdProvider.deallocate(I);for(let Q=0;Q<C.granted.length;Q++)if((C.granted[Q]&128)!==0){const ne=this.messageIdToTopic[I];ne&&ne.forEach(function(te){delete ie._resubscribeTopics[te]})}this._invokeStoreProcessingQueue(),se(null,C);break}case"unsuback":{delete this.outgoing[I],this.messageIdProvider.deallocate(I),this._invokeStoreProcessingQueue(),se(null);break}default:ie.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&Object.keys(this.outgoing).length===0&&this.emit("outgoingEmpty")},Y.prototype._handlePubrel=function(C,I){i("handling pubrel packet"),I=typeof I!="undefined"?I:H;const D=C.messageId,G=this,se={cmd:"pubcomp",messageId:D};G.incomingStore.get(C,function(ie,K){ie?G._sendPacket(se,I):(G.emit("message",K.topic,K.payload,K),G.handleMessage(K,function(Q){if(Q)return I(Q);G.incomingStore.del(K,H),G._sendPacket(se,I)}))})},Y.prototype._handleDisconnect=function(C){this.emit("disconnect",C)},Y.prototype._nextId=function(){return this.messageIdProvider.allocate()},Y.prototype.getLastMessageId=function(){return this.messageIdProvider.getLastAllocated()},Y.prototype._resubscribe=function(){i("_resubscribe");const C=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion===5&&!this.connackPacket.sessionPresent)&&C.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){i("_resubscribe: protocolVersion 5");for(let I=0;I<C.length;I++){const D={};D[C[I]]=this._resubscribeTopics[C[I]],D.resubscribe=!0,this.subscribe(D,{properties:D[C[I]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1},Y.prototype._onConnect=function(C){if(this.disconnected){this.emit("connect",C);return}const I=this;this.connackPacket=C,this.messageIdProvider.clear(),this._setupPingTimer(),this.connected=!0;function D(){let G=I.outgoingStore.createStream();function se(){I._storeProcessing=!1,I._packetIdsDuringStoreProcessing={}}I.once("close",ie),G.on("error",function(Q){se(),I._flushStoreProcessingQueue(),I.removeListener("close",ie),I.emit("error",Q)});function ie(){G.destroy(),G=null,I._flushStoreProcessingQueue(),se()}function K(){if(!G)return;I._storeProcessing=!0;const Q=G.read(1);let ne;if(!Q){G.once("readable",K);return}if(I._packetIdsDuringStoreProcessing[Q.messageId]){K();return}!I.disconnecting&&!I.reconnectTimer?(ne=I.outgoing[Q.messageId]?I.outgoing[Q.messageId].cb:null,I.outgoing[Q.messageId]={volatile:!1,cb:function(te,le){ne&&ne(te,le),K()}},I._packetIdsDuringStoreProcessing[Q.messageId]=!0,I.messageIdProvider.register(Q.messageId)?I._sendPacket(Q):i("messageId: %d has already used.",Q.messageId)):G.destroy&&G.destroy()}G.on("end",function(){let Q=!0;for(const ne in I._packetIdsDuringStoreProcessing)if(!I._packetIdsDuringStoreProcessing[ne]){Q=!1;break}Q?(se(),I.removeListener("close",ie),I._invokeAllStoreProcessingQueue(),I.emit("connect",C)):D()}),K()}D()},Y.prototype._invokeStoreProcessingQueue=function(){if(this._storeProcessingQueue.length>0){const C=this._storeProcessingQueue[0];if(C&&C.invoke())return this._storeProcessingQueue.shift(),!0}return!1},Y.prototype._invokeAllStoreProcessingQueue=function(){for(;this._invokeStoreProcessingQueue(););},Y.prototype._flushStoreProcessingQueue=function(){for(const C of this._storeProcessingQueue)C.cbStorePut&&C.cbStorePut(new Error("Connection closed")),C.callback&&C.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)},U.exports=Y}).call(this)}).call(this,E("_process"),typeof ye!="undefined"?ye:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./default-message-id-provider":7,"./store":8,"./topic-alias-recv":9,"./topic-alias-send":10,"./validations":11,_process:50,debug:18,events:22,inherits:24,"mqtt-packet":40,"readable-stream":69,reinterval:70,"rfdc/default":71,xtend:81}],2:[function(E,U,L){const{Buffer:w}=E("buffer"),d=E("readable-stream").Transform,p=E("duplexify");let h,s,t,r=!1;function e(){const y=new d;return y._write=function(f,i,g){h.sendSocketMessage({data:f.buffer,success:function(){g()},fail:function(){g(new Error)}})},y._flush=function(i){h.closeSocket({success:function(){i()}})},y}function n(y){y.hostname||(y.hostname="localhost"),y.path||(y.path="/"),y.wsOptions||(y.wsOptions={})}function u(y,f){const i=y.protocol==="alis"?"wss":"ws";let g=i+"://"+y.hostname+y.path;return y.port&&y.port!==80&&y.port!==443&&(g=i+"://"+y.hostname+":"+y.port+y.path),typeof y.transformWsUrl=="function"&&(g=y.transformWsUrl(g,y,f)),g}function o(){r||(r=!0,h.onSocketOpen(function(){t.setReadable(s),t.setWritable(s),t.emit("connect")}),h.onSocketMessage(function(y){if(typeof y.data=="string"){const f=w.from(y.data,"base64");s.push(f)}else{const f=new FileReader;f.addEventListener("load",function(){let i=f.result;i instanceof ArrayBuffer?i=w.from(i):i=w.from(i,"utf8"),s.push(i)}),f.readAsArrayBuffer(y.data)}}),h.onSocketClose(function(){t.end(),t.destroy()}),h.onSocketError(function(y){t.destroy(y)}))}function v(y,f){if(f.hostname=f.hostname||f.host,!f.hostname)throw new Error("Could not determine host. Specify host manually.");const i=f.protocolId==="MQIsdp"&&f.protocolVersion===3?"mqttv3.1":"mqtt";n(f);const g=u(f,y);return h=f.my,h.connectSocket({url:g,protocols:i}),s=e(),t=p.obj(),o(),t}U.exports=v},{buffer:17,duplexify:20,"readable-stream":69}],3:[function(E,U,L){const w=E("net"),d=E("debug")("mqttjs:tcp");function p(h,s){s.port=s.port||1883,s.hostname=s.hostname||s.host||"localhost";const t=s.port,r=s.hostname;return d("port %d and host %s",t,r),w.createConnection(t,r)}U.exports=p},{debug:18,net:16}],4:[function(E,U,L){const w=E("tls"),d=E("net"),p=E("debug")("mqttjs:tls");function h(s,t){t.port=t.port||8883,t.host=t.hostname||t.host||"localhost",d.isIP(t.host)===0&&(t.servername=t.host),t.rejectUnauthorized=t.rejectUnauthorized!==!1,delete t.path,p("port %d host %s rejectUnauthorized %b",t.port,t.host,t.rejectUnauthorized);const r=w.connect(t);r.on("secureConnect",function(){t.rejectUnauthorized&&!r.authorized?r.emit("error",new Error("TLS not authorized")):r.removeListener("error",e)});function e(n){t.rejectUnauthorized&&s.emit("error",n),r.end()}return r.on("error",e),r}U.exports=h},{debug:18,net:16,tls:16}],5:[function(E,U,L){(function(w){(function(){const{Buffer:d}=E("buffer"),p=E("ws"),h=E("debug")("mqttjs:ws"),s=E("duplexify"),t=E("readable-stream").Transform,r=["rejectUnauthorized","ca","cert","key","pfx","passphrase"],e=typeof w!="undefined"&&w.title==="browser"||typeof __webpack_require__=="function";function n(g,S){let A=g.protocol+"://"+g.hostname+":"+g.port+g.path;return typeof g.transformWsUrl=="function"&&(A=g.transformWsUrl(A,g,S)),A}function u(g){const S=g;return g.hostname||(S.hostname="localhost"),g.port||(g.protocol==="wss"?S.port=443:S.port=80),g.path||(S.path="/"),g.wsOptions||(S.wsOptions={}),!e&&g.protocol==="wss"&&r.forEach(function(A){Object.prototype.hasOwnProperty.call(g,A)&&!Object.prototype.hasOwnProperty.call(g.wsOptions,A)&&(S.wsOptions[A]=g[A])}),S}function o(g){const S=u(g);if(S.hostname||(S.hostname=S.host),!S.hostname){if(typeof document=="undefined")throw new Error("Could not determine host. Specify host manually.");const A=new URL(document.URL);S.hostname=A.hostname,S.port||(S.port=A.port)}return S.objectMode===void 0&&(S.objectMode=!(S.binary===!0||S.binary===void 0)),S}function v(g,S,A){h("createWebSocket"),h("protocol: "+A.protocolId+" "+A.protocolVersion);const P=A.protocolId==="MQIsdp"&&A.protocolVersion===3?"mqttv3.1":"mqtt";return h("creating new Websocket for url: "+S+" and protocol: "+P),new p(S,[P],A.wsOptions)}function y(g,S){const A=S.protocolId==="MQIsdp"&&S.protocolVersion===3?"mqttv3.1":"mqtt",P=n(S,g),B=new WebSocket(P,[A]);return B.binaryType="arraybuffer",B}function f(g,S){h("streamBuilder");const A=u(S),P=n(A,g),B=v(g,P,A),R=p.createWebSocketStream(B,A.wsOptions);return R.url=P,B.on("close",()=>{R.destroy()}),R}function i(g,S){h("browserStreamBuilder");let A;const B=o(S).browserBufferSize||1024*512,R=S.browserBufferTimeout||1e3,W=!S.objectMode,l=y(g,S),_=j(S,D,G);S.objectMode||(_._writev=I),_.on("close",()=>{l.close()});const b=typeof l.addEventListener!="undefined";l.readyState===l.OPEN?A=_:(A=A=s(void 0,void 0,S),S.objectMode||(A._writev=I),b?l.addEventListener("open",V):l.onopen=V),A.socket=l,b?(l.addEventListener("close",H),l.addEventListener("error",Y),l.addEventListener("message",C)):(l.onclose=H,l.onerror=Y,l.onmessage=C);function j(se,ie,K){const Q=new t({objectModeMode:se.objectMode});return Q._write=ie,Q._flush=K,Q}function V(){A.setReadable(_),A.setWritable(_),A.emit("connect")}function H(){A.end(),A.destroy()}function Y(se){A.destroy(se)}function C(se){let ie=se.data;ie instanceof ArrayBuffer?ie=d.from(ie):ie=d.from(ie,"utf8"),_.push(ie)}function I(se,ie){const K=new Array(se.length);for(let Q=0;Q<se.length;Q++)typeof se[Q].chunk=="string"?K[Q]=d.from(se[Q],"utf8"):K[Q]=se[Q].chunk;this._write(d.concat(K),"binary",ie)}function D(se,ie,K){l.bufferedAmount>B&&setTimeout(D,R,se,ie,K),W&&typeof se=="string"&&(se=d.from(se,"utf8"));try{l.send(se)}catch(Q){return K(Q)}K()}function G(se){l.close(),se()}return A}e?U.exports=i:U.exports=f}).call(this)}).call(this,E("_process"))},{_process:50,buffer:17,debug:18,duplexify:20,"readable-stream":69,ws:80}],6:[function(E,U,L){const{Buffer:w}=E("buffer"),d=E("readable-stream").Transform,p=E("duplexify");let h,s,t;function r(){const v=new d;return v._write=function(y,f,i){h.send({data:y.buffer,success:function(){i()},fail:function(g){i(new Error(g))}})},v._flush=function(f){h.close({success:function(){f()}})},v}function e(v){v.hostname||(v.hostname="localhost"),v.path||(v.path="/"),v.wsOptions||(v.wsOptions={})}function n(v,y){const f=v.protocol==="wxs"?"wss":"ws";let i=f+"://"+v.hostname+v.path;return v.port&&v.port!==80&&v.port!==443&&(i=f+"://"+v.hostname+":"+v.port+v.path),typeof v.transformWsUrl=="function"&&(i=v.transformWsUrl(i,v,y)),i}function u(){h.onOpen(function(){t.setReadable(s),t.setWritable(s),t.emit("connect")}),h.onMessage(function(v){let y=v.data;y instanceof ArrayBuffer?y=w.from(y):y=w.from(y,"utf8"),s.push(y)}),h.onClose(function(){t.end(),t.destroy()}),h.onError(function(v){t.destroy(new Error(v.errMsg))})}function o(v,y){if(y.hostname=y.hostname||y.host,!y.hostname)throw new Error("Could not determine host. Specify host manually.");const f=y.protocolId==="MQIsdp"&&y.protocolVersion===3?"mqttv3.1":"mqtt";e(y);const i=n(y,v);h=wx.connectSocket({url:i,protocols:[f]}),s=r(),t=p.obj(),t._destroy=function(S,A){h.close({success:function(){A&&A(S)}})};const g=t.destroy;return t.destroy=(function(){t.destroy=g;const S=this;setTimeout(function(){h.close({fail:function(){S._destroy(new Error)}})},0)}).bind(t),u(),t}U.exports=o},{buffer:17,duplexify:20,"readable-stream":69}],7:[function(E,U,L){function w(){if(!(this instanceof w))return new w;this.nextId=Math.max(1,Math.floor(Math.random()*65535))}w.prototype.allocate=function(){const d=this.nextId++;return this.nextId===65536&&(this.nextId=1),d},w.prototype.getLastAllocated=function(){return this.nextId===1?65535:this.nextId-1},w.prototype.register=function(d){return!0},w.prototype.deallocate=function(d){},w.prototype.clear=function(){},U.exports=w},{}],8:[function(E,U,L){const w=E("xtend"),d=E("readable-stream").Readable,p={objectMode:!0},h={clean:!0};function s(t){if(!(this instanceof s))return new s(t);this.options=t||{},this.options=w(h,t),this._inflights=new Map}s.prototype.put=function(t,r){return this._inflights.set(t.messageId,t),r&&r(),this},s.prototype.createStream=function(){const t=new d(p),r=[];let e=!1,n=0;return this._inflights.forEach(function(u,o){r.push(u)}),t._read=function(){!e&&n<r.length?this.push(r[n++]):this.push(null)},t.destroy=function(){if(e)return;const u=this;e=!0,setTimeout(function(){u.emit("close")},0)},t},s.prototype.del=function(t,r){return t=this._inflights.get(t.messageId),t?(this._inflights.delete(t.messageId),r(null,t)):r&&r(new Error("missing packet")),this},s.prototype.get=function(t,r){return t=this._inflights.get(t.messageId),t?r(null,t):r&&r(new Error("missing packet")),this},s.prototype.close=function(t){this.options.clean&&(this._inflights=null),t&&t()},U.exports=s},{"readable-stream":69,xtend:81}],9:[function(E,U,L){function w(d){if(!(this instanceof w))return new w(d);this.aliasToTopic={},this.max=d}w.prototype.put=function(d,p){return p===0||p>this.max?!1:(this.aliasToTopic[p]=d,this.length=Object.keys(this.aliasToTopic).length,!0)},w.prototype.getTopicByAlias=function(d){return this.aliasToTopic[d]},w.prototype.clear=function(){this.aliasToTopic={}},U.exports=w},{}],10:[function(E,U,L){const w=E("lru-cache"),d=E("number-allocator").NumberAllocator;function p(h){if(!(this instanceof p))return new p(h);h>0&&(this.aliasToTopic=new w({max:h}),this.topicToAlias={},this.numberAllocator=new d(1,h),this.max=h,this.length=0)}p.prototype.put=function(h,s){if(s===0||s>this.max)return!1;const t=this.aliasToTopic.get(s);return t&&delete this.topicToAlias[t],this.aliasToTopic.set(s,h),this.topicToAlias[h]=s,this.numberAllocator.use(s),this.length=this.aliasToTopic.length,!0},p.prototype.getTopicByAlias=function(h){return this.aliasToTopic.get(h)},p.prototype.getAliasByTopic=function(h){const s=this.topicToAlias[h];return typeof s!="undefined"&&this.aliasToTopic.get(s),s},p.prototype.clear=function(){this.aliasToTopic.reset(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0},p.prototype.getLruAlias=function(){const h=this.numberAllocator.firstVacant();return h||this.aliasToTopic.keys()[this.aliasToTopic.length-1]},U.exports=p},{"lru-cache":37,"number-allocator":46}],11:[function(E,U,L){function w(p){const h=p.split("/");for(let s=0;s<h.length;s++)if(h[s]!=="+"){if(h[s]==="#")return s===h.length-1;if(h[s].indexOf("+")!==-1||h[s].indexOf("#")!==-1)return!1}return!0}function d(p){if(p.length===0)return"empty_topic_list";for(let h=0;h<p.length;h++)if(!w(p[h]))return p[h];return null}U.exports={validateTopics:d}},{}],12:[function(E,U,L){(function(w){(function(){const d=E("../client"),p=E("../store"),h=E("url"),s=E("xtend"),t=E("debug")("mqttjs"),r={};typeof w!="undefined"&&w.title!=="browser"||typeof __webpack_require__!="function"?(r.mqtt=E("./tcp"),r.tcp=E("./tcp"),r.ssl=E("./tls"),r.tls=E("./tls"),r.mqtts=E("./tls")):(r.wx=E("./wx"),r.wxs=E("./wx"),r.ali=E("./ali"),r.alis=E("./ali")),r.ws=E("./ws"),r.wss=E("./ws");function e(u){let o;u.auth&&(o=u.auth.match(/^(.+):(.+)$/),o?(u.username=o[1],u.password=o[2]):u.username=u.auth)}function n(u,o){if(t("connecting to an MQTT broker..."),typeof u=="object"&&!o&&(o=u,u=null),o=o||{},u){const f=h.parse(u,!0);if(f.port!=null&&(f.port=Number(f.port)),o=s(f,o),o.protocol===null)throw new Error("Missing protocol");o.protocol=o.protocol.replace(/:$/,"")}if(e(o),o.query&&typeof o.query.clientId=="string"&&(o.clientId=o.query.clientId),o.cert&&o.key)if(o.protocol){if(["mqtts","wss","wxs","alis"].indexOf(o.protocol)===-1)switch(o.protocol){case"mqtt":o.protocol="mqtts";break;case"ws":o.protocol="wss";break;case"wx":o.protocol="wxs";break;case"ali":o.protocol="alis";break;default:throw new Error('Unknown protocol for secure connection: "'+o.protocol+'"!')}}else throw new Error("Missing secure protocol key");if(!r[o.protocol]){const f=["mqtts","wss"].indexOf(o.protocol)!==-1;o.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter(function(i,g){return f&&g%2===0?!1:typeof r[i]=="function"})[0]}if(o.clean===!1&&!o.clientId)throw new Error("Missing clientId for unclean clients");o.protocol&&(o.defaultProtocol=o.protocol);function v(f){return o.servers&&((!f._reconnectCount||f._reconnectCount===o.servers.length)&&(f._reconnectCount=0),o.host=o.servers[f._reconnectCount].host,o.port=o.servers[f._reconnectCount].port,o.protocol=o.servers[f._reconnectCount].protocol?o.servers[f._reconnectCount].protocol:o.defaultProtocol,o.hostname=o.host,f._reconnectCount++),t("calling streambuilder for",o.protocol),r[o.protocol](f,o)}const y=new d(v,o);return y.on("error",function(){}),y}U.exports=n,U.exports.connect=n,U.exports.MqttClient=d,U.exports.Store=p}).call(this)}).call(this,E("_process"))},{"../client":1,"../store":8,"./ali":2,"./tcp":3,"./tls":4,"./ws":5,"./wx":6,_process:50,debug:18,url:76,xtend:81}],13:[function(E,U,L){L.byteLength=e,L.toByteArray=u,L.fromByteArray=y;for(var w=[],d=[],p=typeof Uint8Array!="undefined"?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,t=h.length;s<t;++s)w[s]=h[s],d[h.charCodeAt(s)]=s;d[45]=62,d[95]=63;function r(f){var i=f.length;if(i%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=f.indexOf("=");g===-1&&(g=i);var S=g===i?0:4-g%4;return[g,S]}function e(f){var i=r(f),g=i[0],S=i[1];return(g+S)*3/4-S}function n(f,i,g){return(i+g)*3/4-g}function u(f){var i,g=r(f),S=g[0],A=g[1],P=new p(n(f,S,A)),B=0,R=A>0?S-4:S,W;for(W=0;W<R;W+=4)i=d[f.charCodeAt(W)]<<18|d[f.charCodeAt(W+1)]<<12|d[f.charCodeAt(W+2)]<<6|d[f.charCodeAt(W+3)],P[B++]=i>>16&255,P[B++]=i>>8&255,P[B++]=i&255;return A===2&&(i=d[f.charCodeAt(W)]<<2|d[f.charCodeAt(W+1)]>>4,P[B++]=i&255),A===1&&(i=d[f.charCodeAt(W)]<<10|d[f.charCodeAt(W+1)]<<4|d[f.charCodeAt(W+2)]>>2,P[B++]=i>>8&255,P[B++]=i&255),P}function o(f){return w[f>>18&63]+w[f>>12&63]+w[f>>6&63]+w[f&63]}function v(f,i,g){for(var S,A=[],P=i;P<g;P+=3)S=(f[P]<<16&16711680)+(f[P+1]<<8&65280)+(f[P+2]&255),A.push(o(S));return A.join("")}function y(f){for(var i,g=f.length,S=g%3,A=[],P=16383,B=0,R=g-S;B<R;B+=P)A.push(v(f,B,B+P>R?R:B+P));return S===1?(i=f[g-1],A.push(w[i>>2]+w[i<<4&63]+"==")):S===2&&(i=(f[g-2]<<8)+f[g-1],A.push(w[i>>10]+w[i>>4&63]+w[i<<2&63]+"=")),A.join("")}},{}],14:[function(E,U,L){const{Buffer:w}=E("buffer"),d=Symbol.for("BufferList");function p(h){if(!(this instanceof p))return new p(h);p._init.call(this,h)}p._init=function(s){Object.defineProperty(this,d,{value:!0}),this._bufs=[],this.length=0,s&&this.append(s)},p.prototype._new=function(s){return new p(s)},p.prototype._offset=function(s){if(s===0)return[0,0];let t=0;for(let r=0;r<this._bufs.length;r++){const e=t+this._bufs[r].length;if(s<e||r===this._bufs.length-1)return[r,s-t];t=e}},p.prototype._reverseOffset=function(h){const s=h[0];let t=h[1];for(let r=0;r<s;r++)t+=this._bufs[r].length;return t},p.prototype.get=function(s){if(s>this.length||s<0)return;const t=this._offset(s);return this._bufs[t[0]][t[1]]},p.prototype.slice=function(s,t){return typeof s=="number"&&s<0&&(s+=this.length),typeof t=="number"&&t<0&&(t+=this.length),this.copy(null,0,s,t)},p.prototype.copy=function(s,t,r,e){if((typeof r!="number"||r<0)&&(r=0),(typeof e!="number"||e>this.length)&&(e=this.length),r>=this.length||e<=0)return s||w.alloc(0);const n=!!s,u=this._offset(r),o=e-r;let v=o,y=n&&t||0,f=u[1];if(r===0&&e===this.length){if(!n)return this._bufs.length===1?this._bufs[0]:w.concat(this._bufs,this.length);for(let i=0;i<this._bufs.length;i++)this._bufs[i].copy(s,y),y+=this._bufs[i].length;return s}if(v<=this._bufs[u[0]].length-f)return n?this._bufs[u[0]].copy(s,t,f,f+v):this._bufs[u[0]].slice(f,f+v);n||(s=w.allocUnsafe(o));for(let i=u[0];i<this._bufs.length;i++){const g=this._bufs[i].length-f;if(v>g)this._bufs[i].copy(s,y,f),y+=g;else{this._bufs[i].copy(s,y,f,f+v),y+=g;break}v-=g,f&&(f=0)}return s.length>y?s.slice(0,y):s},p.prototype.shallowSlice=function(s,t){if(s=s||0,t=typeof t!="number"?this.length:t,s<0&&(s+=this.length),t<0&&(t+=this.length),s===t)return this._new();const r=this._offset(s),e=this._offset(t),n=this._bufs.slice(r[0],e[0]+1);return e[1]===0?n.pop():n[n.length-1]=n[n.length-1].slice(0,e[1]),r[1]!==0&&(n[0]=n[0].slice(r[1])),this._new(n)},p.prototype.toString=function(s,t,r){return this.slice(t,r).toString(s)},p.prototype.consume=function(s){if(s=Math.trunc(s),Number.isNaN(s)||s<=0)return this;for(;this._bufs.length;)if(s>=this._bufs[0].length)s-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(s),this.length-=s;break}return this},p.prototype.duplicate=function(){const s=this._new();for(let t=0;t<this._bufs.length;t++)s.append(this._bufs[t]);return s},p.prototype.append=function(s){if(s==null)return this;if(s.buffer)this._appendBuffer(w.from(s.buffer,s.byteOffset,s.byteLength));else if(Array.isArray(s))for(let t=0;t<s.length;t++)this.append(s[t]);else if(this._isBufferList(s))for(let t=0;t<s._bufs.length;t++)this.append(s._bufs[t]);else typeof s=="number"&&(s=s.toString()),this._appendBuffer(w.from(s));return this},p.prototype._appendBuffer=function(s){this._bufs.push(s),this.length+=s.length},p.prototype.indexOf=function(h,s,t){if(t===void 0&&typeof s=="string"&&(t=s,s=void 0),typeof h=="function"||Array.isArray(h))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof h=="number"?h=w.from([h]):typeof h=="string"?h=w.from(h,t):this._isBufferList(h)?h=h.slice():Array.isArray(h.buffer)?h=w.from(h.buffer,h.byteOffset,h.byteLength):w.isBuffer(h)||(h=w.from(h)),s=Number(s||0),isNaN(s)&&(s=0),s<0&&(s=this.length+s),s<0&&(s=0),h.length===0)return s>this.length?this.length:s;const r=this._offset(s);let e=r[0],n=r[1];for(;e<this._bufs.length;e++){const u=this._bufs[e];for(;n<u.length;)if(u.length-n>=h.length){const v=u.indexOf(h,n);if(v!==-1)return this._reverseOffset([e,v]);n=u.length-h.length+1}else{const v=this._reverseOffset([e,n]);if(this._match(v,h))return v;n++}n=0}return-1},p.prototype._match=function(h,s){if(this.length-h<s.length)return!1;for(let t=0;t<s.length;t++)if(this.get(h+t)!==s[t])return!1;return!0},(function(){const h={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const s in h)(function(t){h[t]===null?p.prototype[t]=function(r,e){return this.slice(r,r+e)[t](0,e)}:p.prototype[t]=function(r=0){return this.slice(r,r+h[t])[t](0)}})(s)})(),p.prototype._isBufferList=function(s){return s instanceof p||p.isBufferList(s)},p.isBufferList=function(s){return s!=null&&s[d]},U.exports=p},{buffer:17}],15:[function(E,U,L){const w=E("readable-stream").Duplex,d=E("inherits"),p=E("./BufferList");function h(s){if(!(this instanceof h))return new h(s);if(typeof s=="function"){this._callback=s;const t=(function(e){this._callback&&(this._callback(e),this._callback=null)}).bind(this);this.on("pipe",function(e){e.on("error",t)}),this.on("unpipe",function(e){e.removeListener("error",t)}),s=null}p._init.call(this,s),w.call(this)}d(h,w),Object.assign(h.prototype,p.prototype),h.prototype._new=function(t){return new h(t)},h.prototype._write=function(t,r,e){this._appendBuffer(t),typeof e=="function"&&e()},h.prototype._read=function(t){if(!this.length)return this.push(null);t=Math.min(t,this.length),this.push(this.slice(0,t)),this.consume(t)},h.prototype.end=function(t){w.prototype.end.call(this,t),this._callback&&(this._callback(null,this.slice()),this._callback=null)},h.prototype._destroy=function(t,r){this._bufs.length=0,this.length=0,r(t)},h.prototype._isBufferList=function(t){return t instanceof h||t instanceof p||h.isBufferList(t)},h.isBufferList=p.isBufferList,U.exports=h,U.exports.BufferListStream=h,U.exports.BufferList=p},{"./BufferList":14,inherits:24,"readable-stream":69}],16:[function(E,U,L){},{}],17:[function(E,U,L){(function(w){(function(){var d=E("base64-js"),p=E("ieee754");L.Buffer=r,L.SlowBuffer=S,L.INSPECT_MAX_BYTES=50;var h=2147483647;L.kMaxLength=h,r.TYPED_ARRAY_SUPPORT=s(),!r.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{var m=new Uint8Array(1);return m.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},m.foo()===42}catch{return!1}}Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}});function t(m){if(m>h)throw new RangeError('The value "'+m+'" is invalid for option "size"');var a=new Uint8Array(m);return a.__proto__=r.prototype,a}function r(m,a,c){if(typeof m=="number"){if(typeof a=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return o(m)}return e(m,a,c)}typeof Symbol!="undefined"&&Symbol.species!=null&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192;function e(m,a,c){if(typeof m=="string")return v(m,a);if(ArrayBuffer.isView(m))return y(m);if(m==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m);if(T(m,ArrayBuffer)||m&&T(m.buffer,ArrayBuffer))return f(m,a,c);if(typeof m=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var k=m.valueOf&&m.valueOf();if(k!=null&&k!==m)return r.from(k,a,c);var F=i(m);if(F)return F;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof m[Symbol.toPrimitive]=="function")return r.from(m[Symbol.toPrimitive]("string"),a,c);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m)}r.from=function(m,a,c){return e(m,a,c)},r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array;function n(m){if(typeof m!="number")throw new TypeError('"size" argument must be of type number');if(m<0)throw new RangeError('The value "'+m+'" is invalid for option "size"')}function u(m,a,c){return n(m),m<=0?t(m):a!==void 0?typeof c=="string"?t(m).fill(a,c):t(m).fill(a):t(m)}r.alloc=function(m,a,c){return u(m,a,c)};function o(m){return n(m),t(m<0?0:g(m)|0)}r.allocUnsafe=function(m){return o(m)},r.allocUnsafeSlow=function(m){return o(m)};function v(m,a){if((typeof a!="string"||a==="")&&(a="utf8"),!r.isEncoding(a))throw new TypeError("Unknown encoding: "+a);var c=A(m,a)|0,k=t(c),F=k.write(m,a);return F!==c&&(k=k.slice(0,F)),k}function y(m){for(var a=m.length<0?0:g(m.length)|0,c=t(a),k=0;k<a;k+=1)c[k]=m[k]&255;return c}function f(m,a,c){if(a<0||m.byteLength<a)throw new RangeError('"offset" is outside of buffer bounds');if(m.byteLength<a+(c||0))throw new RangeError('"length" is outside of buffer bounds');var k;return a===void 0&&c===void 0?k=new Uint8Array(m):c===void 0?k=new Uint8Array(m,a):k=new Uint8Array(m,a,c),k.__proto__=r.prototype,k}function i(m){if(r.isBuffer(m)){var a=g(m.length)|0,c=t(a);return c.length===0||m.copy(c,0,0,a),c}if(m.length!==void 0)return typeof m.length!="number"||x(m.length)?t(0):y(m);if(m.type==="Buffer"&&Array.isArray(m.data))return y(m.data)}function g(m){if(m>=h)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h.toString(16)+" bytes");return m|0}function S(m){return+m!=m&&(m=0),r.alloc(+m)}r.isBuffer=function(a){return a!=null&&a._isBuffer===!0&&a!==r.prototype},r.compare=function(a,c){if(T(a,Uint8Array)&&(a=r.from(a,a.offset,a.byteLength)),T(c,Uint8Array)&&(c=r.from(c,c.offset,c.byteLength)),!r.isBuffer(a)||!r.isBuffer(c))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===c)return 0;for(var k=a.length,F=c.length,ee=0,re=Math.min(k,F);ee<re;++ee)if(a[ee]!==c[ee]){k=a[ee],F=c[ee];break}return k<F?-1:F<k?1:0},r.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(a,c){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(a.length===0)return r.alloc(0);var k;if(c===void 0)for(c=0,k=0;k<a.length;++k)c+=a[k].length;var F=r.allocUnsafe(c),ee=0;for(k=0;k<a.length;++k){var re=a[k];if(T(re,Uint8Array)&&(re=r.from(re)),!r.isBuffer(re))throw new TypeError('"list" argument must be an Array of Buffers');re.copy(F,ee),ee+=re.length}return F};function A(m,a){if(r.isBuffer(m))return m.length;if(ArrayBuffer.isView(m)||T(m,ArrayBuffer))return m.byteLength;if(typeof m!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof m);var c=m.length,k=arguments.length>2&&arguments[2]===!0;if(!k&&c===0)return 0;for(var F=!1;;)switch(a){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return O(m).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c*2;case"hex":return c>>>1;case"base64":return $(m).length;default:if(F)return k?-1:O(m).length;a=(""+a).toLowerCase(),F=!0}}r.byteLength=A;function P(m,a,c){var k=!1;if((a===void 0||a<0)&&(a=0),a>this.length||((c===void 0||c>this.length)&&(c=this.length),c<=0)||(c>>>=0,a>>>=0,c<=a))return"";for(m||(m="utf8");;)switch(m){case"hex":return ie(this,a,c);case"utf8":case"utf-8":return C(this,a,c);case"ascii":return G(this,a,c);case"latin1":case"binary":return se(this,a,c);case"base64":return Y(this,a,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,a,c);default:if(k)throw new TypeError("Unknown encoding: "+m);m=(m+"").toLowerCase(),k=!0}}r.prototype._isBuffer=!0;function B(m,a,c){var k=m[a];m[a]=m[c],m[c]=k}r.prototype.swap16=function(){var a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var c=0;c<a;c+=2)B(this,c,c+1);return this},r.prototype.swap32=function(){var a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var c=0;c<a;c+=4)B(this,c,c+3),B(this,c+1,c+2);return this},r.prototype.swap64=function(){var a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var c=0;c<a;c+=8)B(this,c,c+7),B(this,c+1,c+6),B(this,c+2,c+5),B(this,c+3,c+4);return this},r.prototype.toString=function(){var a=this.length;return a===0?"":arguments.length===0?C(this,0,a):P.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(a){if(!r.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:r.compare(this,a)===0},r.prototype.inspect=function(){var a="",c=L.INSPECT_MAX_BYTES;return a=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(a+=" ... "),"<Buffer "+a+">"},r.prototype.compare=function(a,c,k,F,ee){if(T(a,Uint8Array)&&(a=r.from(a,a.offset,a.byteLength)),!r.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(c===void 0&&(c=0),k===void 0&&(k=a?a.length:0),F===void 0&&(F=0),ee===void 0&&(ee=this.length),c<0||k>a.length||F<0||ee>this.length)throw new RangeError("out of range index");if(F>=ee&&c>=k)return 0;if(F>=ee)return-1;if(c>=k)return 1;if(c>>>=0,k>>>=0,F>>>=0,ee>>>=0,this===a)return 0;for(var re=ee-F,fe=k-c,ue=Math.min(re,fe),ce=this.slice(F,ee),de=a.slice(c,k),he=0;he<ue;++he)if(ce[he]!==de[he]){re=ce[he],fe=de[he];break}return re<fe?-1:fe<re?1:0};function R(m,a,c,k,F){if(m.length===0)return-1;if(typeof c=="string"?(k=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,x(c)&&(c=F?0:m.length-1),c<0&&(c=m.length+c),c>=m.length){if(F)return-1;c=m.length-1}else if(c<0)if(F)c=0;else return-1;if(typeof a=="string"&&(a=r.from(a,k)),r.isBuffer(a))return a.length===0?-1:W(m,a,c,k,F);if(typeof a=="number")return a=a&255,typeof Uint8Array.prototype.indexOf=="function"?F?Uint8Array.prototype.indexOf.call(m,a,c):Uint8Array.prototype.lastIndexOf.call(m,a,c):W(m,[a],c,k,F);throw new TypeError("val must be string, number or Buffer")}function W(m,a,c,k,F){var ee=1,re=m.length,fe=a.length;if(k!==void 0&&(k=String(k).toLowerCase(),k==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(m.length<2||a.length<2)return-1;ee=2,re/=2,fe/=2,c/=2}function ue(be,ve){return ee===1?be[ve]:be.readUInt16BE(ve*ee)}var ce;if(F){var de=-1;for(ce=c;ce<re;ce++)if(ue(m,ce)===ue(a,de===-1?0:ce-de)){if(de===-1&&(de=ce),ce-de+1===fe)return de*ee}else de!==-1&&(ce-=ce-de),de=-1}else for(c+fe>re&&(c=re-fe),ce=c;ce>=0;ce--){for(var he=!0,ge=0;ge<fe;ge++)if(ue(m,ce+ge)!==ue(a,ge)){he=!1;break}if(he)return ce}return-1}r.prototype.includes=function(a,c,k){return this.indexOf(a,c,k)!==-1},r.prototype.indexOf=function(a,c,k){return R(this,a,c,k,!0)},r.prototype.lastIndexOf=function(a,c,k){return R(this,a,c,k,!1)};function l(m,a,c,k){c=Number(c)||0;var F=m.length-c;k?(k=Number(k),k>F&&(k=F)):k=F;var ee=a.length;k>ee/2&&(k=ee/2);for(var re=0;re<k;++re){var fe=parseInt(a.substr(re*2,2),16);if(x(fe))return re;m[c+re]=fe}return re}function _(m,a,c,k){return Z(O(a,m.length-c),m,c,k)}function b(m,a,c,k){return Z(M(a),m,c,k)}function j(m,a,c,k){return b(m,a,c,k)}function V(m,a,c,k){return Z($(a),m,c,k)}function H(m,a,c,k){return Z(z(a,m.length-c),m,c,k)}r.prototype.write=function(a,c,k,F){if(c===void 0)F="utf8",k=this.length,c=0;else if(k===void 0&&typeof c=="string")F=c,k=this.length,c=0;else if(isFinite(c))c=c>>>0,isFinite(k)?(k=k>>>0,F===void 0&&(F="utf8")):(F=k,k=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ee=this.length-c;if((k===void 0||k>ee)&&(k=ee),a.length>0&&(k<0||c<0)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");F||(F="utf8");for(var re=!1;;)switch(F){case"hex":return l(this,a,c,k);case"utf8":case"utf-8":return _(this,a,c,k);case"ascii":return b(this,a,c,k);case"latin1":case"binary":return j(this,a,c,k);case"base64":return V(this,a,c,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,a,c,k);default:if(re)throw new TypeError("Unknown encoding: "+F);F=(""+F).toLowerCase(),re=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Y(m,a,c){return a===0&&c===m.length?d.fromByteArray(m):d.fromByteArray(m.slice(a,c))}function C(m,a,c){c=Math.min(m.length,c);for(var k=[],F=a;F<c;){var ee=m[F],re=null,fe=ee>239?4:ee>223?3:ee>191?2:1;if(F+fe<=c){var ue,ce,de,he;switch(fe){case 1:ee<128&&(re=ee);break;case 2:ue=m[F+1],(ue&192)===128&&(he=(ee&31)<<6|ue&63,he>127&&(re=he));break;case 3:ue=m[F+1],ce=m[F+2],(ue&192)===128&&(ce&192)===128&&(he=(ee&15)<<12|(ue&63)<<6|ce&63,he>2047&&(he<55296||he>57343)&&(re=he));break;case 4:ue=m[F+1],ce=m[F+2],de=m[F+3],(ue&192)===128&&(ce&192)===128&&(de&192)===128&&(he=(ee&15)<<18|(ue&63)<<12|(ce&63)<<6|de&63,he>65535&&he<1114112&&(re=he))}}re===null?(re=65533,fe=1):re>65535&&(re-=65536,k.push(re>>>10&1023|55296),re=56320|re&1023),k.push(re),F+=fe}return D(k)}var I=4096;function D(m){var a=m.length;if(a<=I)return String.fromCharCode.apply(String,m);for(var c="",k=0;k<a;)c+=String.fromCharCode.apply(String,m.slice(k,k+=I));return c}function G(m,a,c){var k="";c=Math.min(m.length,c);for(var F=a;F<c;++F)k+=String.fromCharCode(m[F]&127);return k}function se(m,a,c){var k="";c=Math.min(m.length,c);for(var F=a;F<c;++F)k+=String.fromCharCode(m[F]);return k}function ie(m,a,c){var k=m.length;(!a||a<0)&&(a=0),(!c||c<0||c>k)&&(c=k);for(var F="",ee=a;ee<c;++ee)F+=J(m[ee]);return F}function K(m,a,c){for(var k=m.slice(a,c),F="",ee=0;ee<k.length;ee+=2)F+=String.fromCharCode(k[ee]+k[ee+1]*256);return F}r.prototype.slice=function(a,c){var k=this.length;a=~~a,c=c===void 0?k:~~c,a<0?(a+=k,a<0&&(a=0)):a>k&&(a=k),c<0?(c+=k,c<0&&(c=0)):c>k&&(c=k),c<a&&(c=a);var F=this.subarray(a,c);return F.__proto__=r.prototype,F};function Q(m,a,c){if(m%1!==0||m<0)throw new RangeError("offset is not uint");if(m+a>c)throw new RangeError("Trying to access beyond buffer length")}r.prototype.readUIntLE=function(a,c,k){a=a>>>0,c=c>>>0,k||Q(a,c,this.length);for(var F=this[a],ee=1,re=0;++re<c&&(ee*=256);)F+=this[a+re]*ee;return F},r.prototype.readUIntBE=function(a,c,k){a=a>>>0,c=c>>>0,k||Q(a,c,this.length);for(var F=this[a+--c],ee=1;c>0&&(ee*=256);)F+=this[a+--c]*ee;return F},r.prototype.readUInt8=function(a,c){return a=a>>>0,c||Q(a,1,this.length),this[a]},r.prototype.readUInt16LE=function(a,c){return a=a>>>0,c||Q(a,2,this.length),this[a]|this[a+1]<<8},r.prototype.readUInt16BE=function(a,c){return a=a>>>0,c||Q(a,2,this.length),this[a]<<8|this[a+1]},r.prototype.readUInt32LE=function(a,c){return a=a>>>0,c||Q(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+this[a+3]*16777216},r.prototype.readUInt32BE=function(a,c){return a=a>>>0,c||Q(a,4,this.length),this[a]*16777216+(this[a+1]<<16|this[a+2]<<8|this[a+3])},r.prototype.readIntLE=function(a,c,k){a=a>>>0,c=c>>>0,k||Q(a,c,this.length);for(var F=this[a],ee=1,re=0;++re<c&&(ee*=256);)F+=this[a+re]*ee;return ee*=128,F>=ee&&(F-=Math.pow(2,8*c)),F},r.prototype.readIntBE=function(a,c,k){a=a>>>0,c=c>>>0,k||Q(a,c,this.length);for(var F=c,ee=1,re=this[a+--F];F>0&&(ee*=256);)re+=this[a+--F]*ee;return ee*=128,re>=ee&&(re-=Math.pow(2,8*c)),re},r.prototype.readInt8=function(a,c){return a=a>>>0,c||Q(a,1,this.length),this[a]&128?(255-this[a]+1)*-1:this[a]},r.prototype.readInt16LE=function(a,c){a=a>>>0,c||Q(a,2,this.length);var k=this[a]|this[a+1]<<8;return k&32768?k|4294901760:k},r.prototype.readInt16BE=function(a,c){a=a>>>0,c||Q(a,2,this.length);var k=this[a+1]|this[a]<<8;return k&32768?k|4294901760:k},r.prototype.readInt32LE=function(a,c){return a=a>>>0,c||Q(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},r.prototype.readInt32BE=function(a,c){return a=a>>>0,c||Q(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},r.prototype.readFloatLE=function(a,c){return a=a>>>0,c||Q(a,4,this.length),p.read(this,a,!0,23,4)},r.prototype.readFloatBE=function(a,c){return a=a>>>0,c||Q(a,4,this.length),p.read(this,a,!1,23,4)},r.prototype.readDoubleLE=function(a,c){return a=a>>>0,c||Q(a,8,this.length),p.read(this,a,!0,52,8)},r.prototype.readDoubleBE=function(a,c){return a=a>>>0,c||Q(a,8,this.length),p.read(this,a,!1,52,8)};function ne(m,a,c,k,F,ee){if(!r.isBuffer(m))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>F||a<ee)throw new RangeError('"value" argument is out of bounds');if(c+k>m.length)throw new RangeError("Index out of range")}r.prototype.writeUIntLE=function(a,c,k,F){if(a=+a,c=c>>>0,k=k>>>0,!F){var ee=Math.pow(2,8*k)-1;ne(this,a,c,k,ee,0)}var re=1,fe=0;for(this[c]=a&255;++fe<k&&(re*=256);)this[c+fe]=a/re&255;return c+k},r.prototype.writeUIntBE=function(a,c,k,F){if(a=+a,c=c>>>0,k=k>>>0,!F){var ee=Math.pow(2,8*k)-1;ne(this,a,c,k,ee,0)}var re=k-1,fe=1;for(this[c+re]=a&255;--re>=0&&(fe*=256);)this[c+re]=a/fe&255;return c+k},r.prototype.writeUInt8=function(a,c,k){return a=+a,c=c>>>0,k||ne(this,a,c,1,255,0),this[c]=a&255,c+1},r.prototype.writeUInt16LE=function(a,c,k){return a=+a,c=c>>>0,k||ne(this,a,c,2,65535,0),this[c]=a&255,this[c+1]=a>>>8,c+2},r.prototype.writeUInt16BE=function(a,c,k){return a=+a,c=c>>>0,k||ne(this,a,c,2,65535,0),this[c]=a>>>8,this[c+1]=a&255,c+2},r.prototype.writeUInt32LE=function(a,c,k){return a=+a,c=c>>>0,k||ne(this,a,c,4,4294967295,0),this[c+3]=a>>>24,this[c+2]=a>>>16,this[c+1]=a>>>8,this[c]=a&255,c+4},r.prototype.writeUInt32BE=function(a,c,k){return a=+a,c=c>>>0,k||ne(this,a,c,4,4294967295,0),this[c]=a>>>24,this[c+1]=a>>>16,this[c+2]=a>>>8,this[c+3]=a&255,c+4},r.prototype.writeIntLE=function(a,c,k,F){if(a=+a,c=c>>>0,!F){var ee=Math.pow(2,8*k-1);ne(this,a,c,k,ee-1,-ee)}var re=0,fe=1,ue=0;for(this[c]=a&255;++re<k&&(fe*=256);)a<0&&ue===0&&this[c+re-1]!==0&&(ue=1),this[c+re]=(a/fe>>0)-ue&255;return c+k},r.prototype.writeIntBE=function(a,c,k,F){if(a=+a,c=c>>>0,!F){var ee=Math.pow(2,8*k-1);ne(this,a,c,k,ee-1,-ee)}var re=k-1,fe=1,ue=0;for(this[c+re]=a&255;--re>=0&&(fe*=256);)a<0&&ue===0&&this[c+re+1]!==0&&(ue=1),this[c+re]=(a/fe>>0)-ue&255;return c+k},r.prototype.writeInt8=function(a,c,k){return a=+a,c=c>>>0,k||ne(this,a,c,1,127,-128),a<0&&(a=255+a+1),this[c]=a&255,c+1},r.prototype.writeInt16LE=function(a,c,k){return a=+a,c=c>>>0,k||ne(this,a,c,2,32767,-32768),this[c]=a&255,this[c+1]=a>>>8,c+2},r.prototype.writeInt16BE=function(a,c,k){return a=+a,c=c>>>0,k||ne(this,a,c,2,32767,-32768),this[c]=a>>>8,this[c+1]=a&255,c+2},r.prototype.writeInt32LE=function(a,c,k){return a=+a,c=c>>>0,k||ne(this,a,c,4,2147483647,-2147483648),this[c]=a&255,this[c+1]=a>>>8,this[c+2]=a>>>16,this[c+3]=a>>>24,c+4},r.prototype.writeInt32BE=function(a,c,k){return a=+a,c=c>>>0,k||ne(this,a,c,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[c]=a>>>24,this[c+1]=a>>>16,this[c+2]=a>>>8,this[c+3]=a&255,c+4};function te(m,a,c,k,F,ee){if(c+k>m.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function le(m,a,c,k,F){return a=+a,c=c>>>0,F||te(m,a,c,4),p.write(m,a,c,k,23,4),c+4}r.prototype.writeFloatLE=function(a,c,k){return le(this,a,c,!0,k)},r.prototype.writeFloatBE=function(a,c,k){return le(this,a,c,!1,k)};function oe(m,a,c,k,F){return a=+a,c=c>>>0,F||te(m,a,c,8),p.write(m,a,c,k,52,8),c+8}r.prototype.writeDoubleLE=function(a,c,k){return oe(this,a,c,!0,k)},r.prototype.writeDoubleBE=function(a,c,k){return oe(this,a,c,!1,k)},r.prototype.copy=function(a,c,k,F){if(!r.isBuffer(a))throw new TypeError("argument should be a Buffer");if(k||(k=0),!F&&F!==0&&(F=this.length),c>=a.length&&(c=a.length),c||(c=0),F>0&&F<k&&(F=k),F===k||a.length===0||this.length===0)return 0;if(c<0)throw new RangeError("targetStart out of bounds");if(k<0||k>=this.length)throw new RangeError("Index out of range");if(F<0)throw new RangeError("sourceEnd out of bounds");F>this.length&&(F=this.length),a.length-c<F-k&&(F=a.length-c+k);var ee=F-k;if(this===a&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(c,k,F);else if(this===a&&k<c&&c<F)for(var re=ee-1;re>=0;--re)a[re+c]=this[re+k];else Uint8Array.prototype.set.call(a,this.subarray(k,F),c);return ee},r.prototype.fill=function(a,c,k,F){if(typeof a=="string"){if(typeof c=="string"?(F=c,c=0,k=this.length):typeof k=="string"&&(F=k,k=this.length),F!==void 0&&typeof F!="string")throw new TypeError("encoding must be a string");if(typeof F=="string"&&!r.isEncoding(F))throw new TypeError("Unknown encoding: "+F);if(a.length===1){var ee=a.charCodeAt(0);(F==="utf8"&&ee<128||F==="latin1")&&(a=ee)}}else typeof a=="number"&&(a=a&255);if(c<0||this.length<c||this.length<k)throw new RangeError("Out of range index");if(k<=c)return this;c=c>>>0,k=k===void 0?this.length:k>>>0,a||(a=0);var re;if(typeof a=="number")for(re=c;re<k;++re)this[re]=a;else{var fe=r.isBuffer(a)?a:r.from(a,F),ue=fe.length;if(ue===0)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(re=0;re<k-c;++re)this[re+c]=fe[re%ue]}return this};var q=/[^+/0-9A-Za-z-_]/g;function N(m){if(m=m.split("=")[0],m=m.trim().replace(q,""),m.length<2)return"";for(;m.length%4!==0;)m=m+"=";return m}function J(m){return m<16?"0"+m.toString(16):m.toString(16)}function O(m,a){a=a||1/0;for(var c,k=m.length,F=null,ee=[],re=0;re<k;++re){if(c=m.charCodeAt(re),c>55295&&c<57344){if(!F){if(c>56319){(a-=3)>-1&&ee.push(239,191,189);continue}else if(re+1===k){(a-=3)>-1&&ee.push(239,191,189);continue}F=c;continue}if(c<56320){(a-=3)>-1&&ee.push(239,191,189),F=c;continue}c=(F-55296<<10|c-56320)+65536}else F&&(a-=3)>-1&&ee.push(239,191,189);if(F=null,c<128){if((a-=1)<0)break;ee.push(c)}else if(c<2048){if((a-=2)<0)break;ee.push(c>>6|192,c&63|128)}else if(c<65536){if((a-=3)<0)break;ee.push(c>>12|224,c>>6&63|128,c&63|128)}else if(c<1114112){if((a-=4)<0)break;ee.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw new Error("Invalid code point")}return ee}function M(m){for(var a=[],c=0;c<m.length;++c)a.push(m.charCodeAt(c)&255);return a}function z(m,a){for(var c,k,F,ee=[],re=0;re<m.length&&!((a-=2)<0);++re)c=m.charCodeAt(re),k=c>>8,F=c%256,ee.push(F),ee.push(k);return ee}function $(m){return d.toByteArray(N(m))}function Z(m,a,c,k){for(var F=0;F<k&&!(F+c>=a.length||F>=m.length);++F)a[F+c]=m[F];return F}function T(m,a){return m instanceof a||m!=null&&m.constructor!=null&&m.constructor.name!=null&&m.constructor.name===a.name}function x(m){return m!==m}}).call(this)}).call(this,E("buffer").Buffer)},{"base64-js":13,buffer:17,ieee754:23}],18:[function(E,U,L){(function(w){(function(){L.formatArgs=p,L.save=h,L.load=s,L.useColors=d,L.storage=t(),L.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),L.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function d(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function p(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+U.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let u=0,o=0;e[0].replace(/%[a-zA-Z%]/g,v=>{v!=="%%"&&(u++,v==="%c"&&(o=u))}),e.splice(o,0,n)}L.log=console.debug||console.log||(()=>{});function h(e){try{e?L.storage.setItem("debug",e):L.storage.removeItem("debug")}catch{}}function s(){let e;try{e=L.storage.getItem("debug")}catch{}return!e&&typeof w!="undefined"&&"env"in w&&(e={}.DEBUG),e}function t(){try{return localStorage}catch{}}U.exports=E("./common")(L);const{formatters:r}=U.exports;r.j=function(e){try{return JSON.stringify(e)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}}}).call(this)}).call(this,E("_process"))},{"./common":19,_process:50}],19:[function(E,U,L){function w(d){h.debug=h,h.default=h,h.coerce=u,h.disable=r,h.enable=t,h.enabled=e,h.humanize=E("ms"),h.destroy=o,Object.keys(d).forEach(v=>{h[v]=d[v]}),h.names=[],h.skips=[],h.formatters={};function p(v){let y=0;for(let f=0;f<v.length;f++)y=(y<<5)-y+v.charCodeAt(f),y|=0;return h.colors[Math.abs(y)%h.colors.length]}h.selectColor=p;function h(v){let y,f=null,i,g;function S(...A){if(!S.enabled)return;const P=S,B=Number(new Date),R=B-(y||B);P.diff=R,P.prev=y,P.curr=B,y=B,A[0]=h.coerce(A[0]),typeof A[0]!="string"&&A.unshift("%O");let W=0;A[0]=A[0].replace(/%([a-zA-Z%])/g,(_,b)=>{if(_==="%%")return"%";W++;const j=h.formatters[b];if(typeof j=="function"){const V=A[W];_=j.call(P,V),A.splice(W,1),W--}return _}),h.formatArgs.call(P,A),(P.log||h.log).apply(P,A)}return S.namespace=v,S.useColors=h.useColors(),S.color=h.selectColor(v),S.extend=s,S.destroy=h.destroy,Object.defineProperty(S,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(i!==h.namespaces&&(i=h.namespaces,g=h.enabled(v)),g),set:A=>{f=A}}),typeof h.init=="function"&&h.init(S),S}function s(v,y){const f=h(this.namespace+(typeof y=="undefined"?":":y)+v);return f.log=this.log,f}function t(v){h.save(v),h.namespaces=v,h.names=[],h.skips=[];let y;const f=(typeof v=="string"?v:"").split(/[\s,]+/),i=f.length;for(y=0;y<i;y++)f[y]&&(v=f[y].replace(/\*/g,".*?"),v[0]==="-"?h.skips.push(new RegExp("^"+v.substr(1)+"$")):h.names.push(new RegExp("^"+v+"$")))}function r(){const v=[...h.names.map(n),...h.skips.map(n).map(y=>"-"+y)].join(",");return h.enable(""),v}function e(v){if(v[v.length-1]==="*")return!0;let y,f;for(y=0,f=h.skips.length;y<f;y++)if(h.skips[y].test(v))return!1;for(y=0,f=h.names.length;y<f;y++)if(h.names[y].test(v))return!0;return!1}function n(v){return v.toString().substring(2,v.toString().length-2).replace(/\.\*\?$/,"*")}function u(v){return v instanceof Error?v.stack||v.message:v}function o(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return h.enable(h.load()),h}U.exports=w},{ms:45}],20:[function(E,U,L){(function(w,d){(function(){var p=E("readable-stream"),h=E("end-of-stream"),s=E("inherits"),t=E("stream-shift"),r=d.from&&d.from!==Uint8Array.from?d.from([0]):new d([0]),e=function(i,g){i._corked?i.once("uncork",g):g()},n=function(i,g){i._autoDestroy&&i.destroy(g)},u=function(i,g){return function(S){S?n(i,S.message==="premature close"?null:S):g&&!i._ended&&i.end()}},o=function(i,g){if(!i||i._writableState&&i._writableState.finished)return g();if(i._writableState)return i.end(g);i.end(),g()},v=function(){},y=function(i){return new p.Readable({objectMode:!0,highWaterMark:16}).wrap(i)},f=function(i,g,S){if(!(this instanceof f))return new f(i,g,S);p.Duplex.call(this,S),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!S||S.autoDestroy!==!1,this._forwardDestroy=!S||S.destroy!==!1,this._forwardEnd=!S||S.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,i&&this.setWritable(i),g&&this.setReadable(g)};s(f,p.Duplex),f.obj=function(i,g,S){return S||(S={}),S.objectMode=!0,S.highWaterMark=16,new f(i,g,S)},f.prototype.cork=function(){++this._corked===1&&this.emit("cork")},f.prototype.uncork=function(){this._corked&&--this._corked===0&&this.emit("uncork")},f.prototype.setWritable=function(i){if(this._unwrite&&this._unwrite(),this.destroyed){i&&i.destroy&&i.destroy();return}if(i===null||i===!1){this.end();return}var g=this,S=h(i,{writable:!0,readable:!1},u(this,this._forwardEnd)),A=function(){var B=g._ondrain;g._ondrain=null,B&&B()},P=function(){g._writable.removeListener("drain",A),S()};this._unwrite&&w.nextTick(A),this._writable=i,this._writable.on("drain",A),this._unwrite=P,this.uncork()},f.prototype.setReadable=function(i){if(this._unread&&this._unread(),this.destroyed){i&&i.destroy&&i.destroy();return}if(i===null||i===!1){this.push(null),this.resume();return}var g=this,S=h(i,{writable:!1,readable:!0},u(this)),A=function(){g._forward()},P=function(){g.push(null)},B=function(){g._readable2.removeListener("readable",A),g._readable2.removeListener("end",P),S()};this._drained=!0,this._readable=i,this._readable2=i._readableState?i:y(i),this._readable2.on("readable",A),this._readable2.on("end",P),this._unread=B,this._forward()},f.prototype._read=function(){this._drained=!0,this._forward()},f.prototype._forward=function(){if(!(this._forwarding||!this._readable2||!this._drained)){this._forwarding=!0;for(var i;this._drained&&(i=t(this._readable2))!==null;)this.destroyed||(this._drained=this.push(i));this._forwarding=!1}},f.prototype.destroy=function(i,g){if(g||(g=v),this.destroyed)return g(null);this.destroyed=!0;var S=this;w.nextTick(function(){S._destroy(i),g(null)})},f.prototype._destroy=function(i){if(i){var g=this._ondrain;this._ondrain=null,g?g(i):this.emit("error",i)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},f.prototype._write=function(i,g,S){if(!this.destroyed){if(this._corked)return e(this,this._write.bind(this,i,g,S));if(i===r)return this._finish(S);if(!this._writable)return S();this._writable.write(i)===!1?this._ondrain=S:this.destroyed||S()}},f.prototype._finish=function(i){var g=this;this.emit("preend"),e(this,function(){o(g._forwardEnd&&g._writable,function(){g._writableState.prefinished===!1&&(g._writableState.prefinished=!0),g.emit("prefinish"),e(g,i)})})},f.prototype.end=function(i,g,S){return typeof i=="function"?this.end(null,null,i):typeof g=="function"?this.end(i,null,g):(this._ended=!0,i&&this.write(i),!this._writableState.ending&&!this._writableState.destroyed&&this.write(r),p.Writable.prototype.end.call(this,S))},U.exports=f}).call(this)}).call(this,E("_process"),E("buffer").Buffer)},{_process:50,buffer:17,"end-of-stream":21,inherits:24,"readable-stream":69,"stream-shift":74}],21:[function(E,U,L){(function(w){(function(){var d=E("once"),p=function(){},h=function(r){return r.setHeader&&typeof r.abort=="function"},s=function(r){return r.stdio&&Array.isArray(r.stdio)&&r.stdio.length===3},t=function(r,e,n){if(typeof e=="function")return t(r,null,e);e||(e={}),n=d(n||p);var u=r._writableState,o=r._readableState,v=e.readable||e.readable!==!1&&r.readable,y=e.writable||e.writable!==!1&&r.writable,f=!1,i=function(){r.writable||g()},g=function(){y=!1,v||n.call(r)},S=function(){v=!1,y||n.call(r)},A=function(l){n.call(r,l?new Error("exited with error code: "+l):null)},P=function(l){n.call(r,l)},B=function(){w.nextTick(R)},R=function(){if(!f){if(v&&!(o&&o.ended&&!o.destroyed))return n.call(r,new Error("premature close"));if(y&&!(u&&u.ended&&!u.destroyed))return n.call(r,new Error("premature close"))}},W=function(){r.req.on("finish",g)};return h(r)?(r.on("complete",g),r.on("abort",B),r.req?W():r.on("request",W)):y&&!u&&(r.on("end",i),r.on("close",i)),s(r)&&r.on("exit",A),r.on("end",S),r.on("finish",g),e.error!==!1&&r.on("error",P),r.on("close",B),function(){f=!0,r.removeListener("complete",g),r.removeListener("abort",B),r.removeListener("request",W),r.req&&r.req.removeListener("finish",g),r.removeListener("end",i),r.removeListener("close",i),r.removeListener("finish",g),r.removeListener("exit",A),r.removeListener("end",S),r.removeListener("error",P),r.removeListener("close",B)}};U.exports=t}).call(this)}).call(this,E("_process"))},{_process:50,once:48}],22:[function(E,U,L){var w=Object.create||W,d=Object.keys||l,p=Function.prototype.bind||_;function h(){(!this._events||!Object.prototype.hasOwnProperty.call(this,"_events"))&&(this._events=w(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}U.exports=h,h.EventEmitter=h,h.prototype._events=void 0,h.prototype._maxListeners=void 0;var s=10,t;try{var r={};Object.defineProperty&&Object.defineProperty(r,"x",{value:0}),t=r.x===0}catch{t=!1}t?Object.defineProperty(h,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(b){if(typeof b!="number"||b<0||b!==b)throw new TypeError('"defaultMaxListeners" must be a positive number');s=b}}):h.defaultMaxListeners=s,h.prototype.setMaxListeners=function(j){if(typeof j!="number"||j<0||isNaN(j))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=j,this};function e(b){return b._maxListeners===void 0?h.defaultMaxListeners:b._maxListeners}h.prototype.getMaxListeners=function(){return e(this)};function n(b,j,V){if(j)b.call(V);else for(var H=b.length,Y=B(b,H),C=0;C<H;++C)Y[C].call(V)}function u(b,j,V,H){if(j)b.call(V,H);else for(var Y=b.length,C=B(b,Y),I=0;I<Y;++I)C[I].call(V,H)}function o(b,j,V,H,Y){if(j)b.call(V,H,Y);else for(var C=b.length,I=B(b,C),D=0;D<C;++D)I[D].call(V,H,Y)}function v(b,j,V,H,Y,C){if(j)b.call(V,H,Y,C);else for(var I=b.length,D=B(b,I),G=0;G<I;++G)D[G].call(V,H,Y,C)}function y(b,j,V,H){if(j)b.apply(V,H);else for(var Y=b.length,C=B(b,Y),I=0;I<Y;++I)C[I].apply(V,H)}h.prototype.emit=function(j){var V,H,Y,C,I,D,G=j==="error";if(D=this._events,D)G=G&&D.error==null;else if(!G)return!1;if(G){if(arguments.length>1&&(V=arguments[1]),V instanceof Error)throw V;var se=new Error('Unhandled "error" event. ('+V+")");throw se.context=V,se}if(H=D[j],!H)return!1;var ie=typeof H=="function";switch(Y=arguments.length,Y){case 1:n(H,ie,this);break;case 2:u(H,ie,this,arguments[1]);break;case 3:o(H,ie,this,arguments[1],arguments[2]);break;case 4:v(H,ie,this,arguments[1],arguments[2],arguments[3]);break;default:for(C=new Array(Y-1),I=1;I<Y;I++)C[I-1]=arguments[I];y(H,ie,this,C)}return!0};function f(b,j,V,H){var Y,C,I;if(typeof V!="function")throw new TypeError('"listener" argument must be a function');if(C=b._events,C?(C.newListener&&(b.emit("newListener",j,V.listener?V.listener:V),C=b._events),I=C[j]):(C=b._events=w(null),b._eventsCount=0),!I)I=C[j]=V,++b._eventsCount;else if(typeof I=="function"?I=C[j]=H?[V,I]:[I,V]:H?I.unshift(V):I.push(V),!I.warned&&(Y=e(b),Y&&Y>0&&I.length>Y)){I.warned=!0;var D=new Error("Possible EventEmitter memory leak detected. "+I.length+' "'+String(j)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');D.name="MaxListenersExceededWarning",D.emitter=b,D.type=j,D.count=I.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",D.name,D.message)}return b}h.prototype.addListener=function(j,V){return f(this,j,V,!1)},h.prototype.on=h.prototype.addListener,h.prototype.prependListener=function(j,V){return f(this,j,V,!0)};function i(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var b=new Array(arguments.length),j=0;j<b.length;++j)b[j]=arguments[j];this.listener.apply(this.target,b)}}function g(b,j,V){var H={fired:!1,wrapFn:void 0,target:b,type:j,listener:V},Y=p.call(i,H);return Y.listener=V,H.wrapFn=Y,Y}h.prototype.once=function(j,V){if(typeof V!="function")throw new TypeError('"listener" argument must be a function');return this.on(j,g(this,j,V)),this},h.prototype.prependOnceListener=function(j,V){if(typeof V!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(j,g(this,j,V)),this},h.prototype.removeListener=function(j,V){var H,Y,C,I,D;if(typeof V!="function")throw new TypeError('"listener" argument must be a function');if(Y=this._events,!Y)return this;if(H=Y[j],!H)return this;if(H===V||H.listener===V)--this._eventsCount===0?this._events=w(null):(delete Y[j],Y.removeListener&&this.emit("removeListener",j,H.listener||V));else if(typeof H!="function"){for(C=-1,I=H.length-1;I>=0;I--)if(H[I]===V||H[I].listener===V){D=H[I].listener,C=I;break}if(C<0)return this;C===0?H.shift():P(H,C),H.length===1&&(Y[j]=H[0]),Y.removeListener&&this.emit("removeListener",j,D||V)}return this},h.prototype.removeAllListeners=function(j){var V,H,Y;if(H=this._events,!H)return this;if(!H.removeListener)return arguments.length===0?(this._events=w(null),this._eventsCount=0):H[j]&&(--this._eventsCount===0?this._events=w(null):delete H[j]),this;if(arguments.length===0){var C=d(H),I;for(Y=0;Y<C.length;++Y)I=C[Y],I!=="removeListener"&&this.removeAllListeners(I);return this.removeAllListeners("removeListener"),this._events=w(null),this._eventsCount=0,this}if(V=H[j],typeof V=="function")this.removeListener(j,V);else if(V)for(Y=V.length-1;Y>=0;Y--)this.removeListener(j,V[Y]);return this};function S(b,j,V){var H=b._events;if(!H)return[];var Y=H[j];return Y?typeof Y=="function"?V?[Y.listener||Y]:[Y]:V?R(Y):B(Y,Y.length):[]}h.prototype.listeners=function(j){return S(this,j,!0)},h.prototype.rawListeners=function(j){return S(this,j,!1)},h.listenerCount=function(b,j){return typeof b.listenerCount=="function"?b.listenerCount(j):A.call(b,j)},h.prototype.listenerCount=A;function A(b){var j=this._events;if(j){var V=j[b];if(typeof V=="function")return 1;if(V)return V.length}return 0}h.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function P(b,j){for(var V=j,H=V+1,Y=b.length;H<Y;V+=1,H+=1)b[V]=b[H];b.pop()}function B(b,j){for(var V=new Array(j),H=0;H<j;++H)V[H]=b[H];return V}function R(b){for(var j=new Array(b.length),V=0;V<j.length;++V)j[V]=b[V].listener||b[V];return j}function W(b){var j=function(){};return j.prototype=b,new j}function l(b){for(var j in b)Object.prototype.hasOwnProperty.call(b,j);return j}function _(b){var j=this;return function(){return j.apply(b,arguments)}}},{}],23:[function(E,U,L){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */L.read=function(w,d,p,h,s){var t,r,e=s*8-h-1,n=(1<<e)-1,u=n>>1,o=-7,v=p?s-1:0,y=p?-1:1,f=w[d+v];for(v+=y,t=f&(1<<-o)-1,f>>=-o,o+=e;o>0;t=t*256+w[d+v],v+=y,o-=8);for(r=t&(1<<-o)-1,t>>=-o,o+=h;o>0;r=r*256+w[d+v],v+=y,o-=8);if(t===0)t=1-u;else{if(t===n)return r?NaN:(f?-1:1)*(1/0);r=r+Math.pow(2,h),t=t-u}return(f?-1:1)*r*Math.pow(2,t-h)},L.write=function(w,d,p,h,s,t){var r,e,n,u=t*8-s-1,o=(1<<u)-1,v=o>>1,y=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=h?0:t-1,i=h?1:-1,g=d<0||d===0&&1/d<0?1:0;for(d=Math.abs(d),isNaN(d)||d===1/0?(e=isNaN(d)?1:0,r=o):(r=Math.floor(Math.log(d)/Math.LN2),d*(n=Math.pow(2,-r))<1&&(r--,n*=2),r+v>=1?d+=y/n:d+=y*Math.pow(2,1-v),d*n>=2&&(r++,n/=2),r+v>=o?(e=0,r=o):r+v>=1?(e=(d*n-1)*Math.pow(2,s),r=r+v):(e=d*Math.pow(2,v-1)*Math.pow(2,s),r=0));s>=8;w[p+f]=e&255,f+=i,e/=256,s-=8);for(r=r<<s|e,u+=s;u>0;w[p+f]=r&255,f+=i,r/=256,u-=8);w[p+f-i]|=g*128}},{}],24:[function(E,U,L){typeof Object.create=="function"?U.exports=function(d,p){p&&(d.super_=p,d.prototype=Object.create(p.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}))}:U.exports=function(d,p){if(p){d.super_=p;var h=function(){};h.prototype=p.prototype,d.prototype=new h,d.prototype.constructor=d}}},{}],25:[function(E,U,L){Object.defineProperty(L,"__esModule",{value:!0});var w=(function(){function d(p,h){this.color=!0,this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0,this.leftChild=void 0,this.rightChild=void 0,this.key=p,this.value=h}return d.prototype.rotateLeft=function(){var p=this.parent,h=this.brother,s=this.leftChild,t=this.rightChild;if(!t)throw new Error("unknown error");var r=t.leftChild,e=t.rightChild;return p&&(p.leftChild===this?p.leftChild=t:p.rightChild===this&&(p.rightChild=t)),t.parent=p,t.brother=h,t.leftChild=this,t.rightChild=e,h&&(h.brother=t),this.parent=t,this.brother=e,this.leftChild=s,this.rightChild=r,e&&(e.parent=t,e.brother=this),s&&(s.parent=this,s.brother=r),r&&(r.parent=this,r.brother=s),t},d.prototype.rotateRight=function(){var p=this.parent,h=this.brother,s=this.leftChild;if(!s)throw new Error("unknown error");var t=this.rightChild,r=s.leftChild,e=s.rightChild;return p&&(p.leftChild===this?p.leftChild=s:p.rightChild===this&&(p.rightChild=s)),s.parent=p,s.brother=h,s.leftChild=r,s.rightChild=this,h&&(h.brother=s),r&&(r.parent=s,r.brother=this),this.parent=s,this.brother=r,this.leftChild=e,this.rightChild=t,e&&(e.parent=this,e.brother=t),t&&(t.parent=this,t.brother=e),s},d.prototype.remove=function(){if(this.leftChild||this.rightChild)throw new Error("can only remove leaf node");this.parent&&(this===this.parent.leftChild?this.parent.leftChild=void 0:this===this.parent.rightChild&&(this.parent.rightChild=void 0)),this.brother&&(this.brother.brother=void 0),this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0},d.TreeNodeColorType={red:!0,black:!1},d})();Object.freeze(w),L.default=w},{}],26:[function(E,U,L){var w=this&&this.__generator||function(p,h){var s={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},t,r,e,n;return n={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(n[Symbol.iterator]=function(){return this}),n;function u(v){return function(y){return o([v,y])}}function o(v){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(e=v[0]&2?r.return:v[0]?r.throw||((e=r.return)&&e.call(r),0):r.next)&&!(e=e.call(r,v[1])).done)return e;switch(r=0,e&&(v=[v[0]&2,e.value]),v[0]){case 0:case 1:e=v;break;case 4:return s.label++,{value:v[1],done:!1};case 5:s.label++,r=v[1],v=[0];continue;case 7:v=s.ops.pop(),s.trys.pop();continue;default:if(e=s.trys,!(e=e.length>0&&e[e.length-1])&&(v[0]===6||v[0]===2)){s=0;continue}if(v[0]===3&&(!e||v[1]>e[0]&&v[1]<e[3])){s.label=v[1];break}if(v[0]===6&&s.label<e[1]){s.label=e[1],e=v;break}if(e&&s.label<e[2]){s.label=e[2],s.ops.push(v);break}e[2]&&s.ops.pop(),s.trys.pop();continue}v=h.call(p,s)}catch(y){v=[6,y],r=0}finally{t=e=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}};Object.defineProperty(L,"__esModule",{value:!0}),d.sigma=3,d.bucketSize=5e3;function d(p){var h=this;p===void 0&&(p=[]);var s=[],t=0,r=0,e=0,n=0,u=0,o=0;this.size=function(){return o},this.empty=function(){return o===0},this.clear=function(){t=e=r=n=u=o=0,y.call(this,d.bucketSize),o=0},this.front=function(){return s[t][r]},this.back=function(){return s[e][n]},this.forEach=function(f){if(!this.empty()){var i=0;if(t===e){for(var g=r;g<=n;++g)f(s[t][g],i++);return}for(var g=r;g<d.bucketSize;++g)f(s[t][g],i++);for(var g=t+1;g<e;++g)for(var S=0;S<d.bucketSize;++S)f(s[g][S],i++);for(var g=0;g<=n;++g)f(s[e][g],i++)}};var v=function(f){var i=t*d.bucketSize+r,g=i+f,S=e*d.bucketSize+n;if(g<i||g>S)throw new Error("pos should more than 0 and less than queue's size");var A=Math.floor(g/d.bucketSize),P=g%d.bucketSize;return{curNodeBucketIndex:A,curNodePointerIndex:P}};this.getElementByPos=function(f){var i=v(f),g=i.curNodeBucketIndex,S=i.curNodePointerIndex;return s[g][S]},this.eraseElementByPos=function(f){var i=this;if(f<0||f>o)throw new Error("pos should more than 0 and less than queue's size");if(f===0)this.popFront();else if(f===this.size())this.popBack();else{for(var g=[],S=f+1;S<o;++S)g.push(this.getElementByPos(S));this.cut(f),this.popBack(),g.forEach(function(A){return i.pushBack(A)})}},this.eraseElementByValue=function(f){if(!this.empty()){var i=[];this.forEach(function(A){A!==f&&i.push(A)});for(var g=i.length,S=0;S<g;++S)this.setElementByPos(S,i[S]);this.cut(g-1)}};var y=function(f){for(var i=[],g=f*d.sigma,S=Math.max(Math.ceil(g/d.bucketSize),2),A=0;A<S;++A)i.push(new Array(d.bucketSize));var P=Math.ceil(f/d.bucketSize),B=Math.floor(S/2)-Math.floor(P/2),R=B,W=0;if(this.size())for(var A=0;A<P;++A){for(var l=0;l<d.bucketSize;++l)if(i[B+A][l]=this.front(),this.popFront(),this.empty()){R=B+A,W=l;break}if(this.empty())break}s=i,t=B,r=0,e=R,n=W,u=S,o=f};this.pushBack=function(f){this.empty()||(e===u-1&&n===d.bucketSize-1&&y.call(this,this.size()),n<d.bucketSize-1?++n:e<u-1&&(++e,n=0)),++o,s[e][n]=f},this.popBack=function(){this.empty()||(this.size()!==1&&(n>0?--n:t<e&&(--e,n=d.bucketSize-1)),o>0&&--o)},this.setElementByPos=function(f,i){var g=v(f),S=g.curNodeBucketIndex,A=g.curNodePointerIndex;s[S][A]=i},this.insert=function(f,i,g){var S=this;if(g===void 0&&(g=1),f===0)for(;g--;)this.pushFront(i);else if(f===this.size())for(;g--;)this.pushBack(i);else{for(var A=[],P=f;P<o;++P)A.push(this.getElementByPos(P));this.cut(f-1);for(var P=0;P<g;++P)this.pushBack(i);A.forEach(function(B){return S.pushBack(B)})}},this.find=function(f){if(t===e){for(var i=r;i<=n;++i)if(s[t][i]===f)return!0;return!1}for(var i=r;i<d.bucketSize;++i)if(s[t][i]===f)return!0;for(var i=t+1;i<e;++i)for(var g=0;g<d.bucketSize;++g)if(s[i][g]===f)return!0;for(var i=0;i<=n;++i)if(s[e][i]===f)return!0;return!1},this.reverse=function(){for(var f=0,i=o-1;f<i;){var g=this.getElementByPos(f);this.setElementByPos(f,this.getElementByPos(i)),this.setElementByPos(i,g),++f,--i}},this.unique=function(){if(!this.empty()){var f=[],i=this.front();this.forEach(function(S,A){(A===0||S!==i)&&(f.push(S),i=S)});for(var g=0;g<o;++g)this.setElementByPos(g,f[g]);this.cut(f.length-1)}},this.sort=function(f){var i=[];this.forEach(function(S){i.push(S)}),i.sort(f);for(var g=0;g<o;++g)this.setElementByPos(g,i[g])},this.pushFront=function(f){this.empty()||(t===0&&r===0&&y.call(this,this.size()),r>0?--r:t>0&&(--t,r=d.bucketSize-1)),++o,s[t][r]=f},this.popFront=function(){this.empty()||(this.size()!==1&&(r<d.bucketSize-1?++r:t<e&&(++t,r=0)),o>0&&--o)},this.shrinkToFit=function(){var f=this,i=[];this.forEach(function(P){i.push(P)});var g=i.length;s=[];for(var S=Math.ceil(g/d.bucketSize),A=0;A<S;++A)s.push(new Array(d.bucketSize));this.clear(),i.forEach(function(P){return f.pushBack(P)})},this.cut=function(f){if(f<0){this.clear();return}var i=v(f),g=i.curNodeBucketIndex,S=i.curNodePointerIndex;e=g,n=S,o=f+1},this[Symbol.iterator]=function(){return(function(){var i,i,i,f,i;return w(this,function(g){switch(g.label){case 0:if(o===0)return[2];if(t!==e)return[3,5];i=r,g.label=1;case 1:return i<=n?[4,s[t][i]]:[3,4];case 2:g.sent(),g.label=3;case 3:return++i,[3,1];case 4:return[2];case 5:i=r,g.label=6;case 6:return i<d.bucketSize?[4,s[t][i]]:[3,9];case 7:g.sent(),g.label=8;case 8:return++i,[3,6];case 9:i=t+1,g.label=10;case 10:if(!(i<e))return[3,15];f=0,g.label=11;case 11:return f<d.bucketSize?[4,s[i][f]]:[3,14];case 12:g.sent(),g.label=13;case 13:return++f,[3,11];case 14:return++i,[3,10];case 15:i=0,g.label=16;case 16:return i<=n?[4,s[e][i]]:[3,19];case 17:g.sent(),g.label=18;case 18:return++i,[3,16];case 19:return[2]}})})()},(function(){var f=d.bucketSize;p.size?f=p.size():p.length&&(f=p.length);var i=f*d.sigma;u=Math.ceil(i/d.bucketSize),u=Math.max(u,3);for(var g=0;g<u;++g)s.push(new Array(d.bucketSize));var S=Math.ceil(f/d.bucketSize);t=Math.floor(u/2)-Math.floor(S/2),e=t,p.forEach(function(A){return h.pushBack(A)})})(),Object.freeze(this)}Object.freeze(d),L.default=d},{}],27:[function(E,U,L){var w=this&&this.__generator||function(t,r){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,u,o,v;return v={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function y(i){return function(g){return f([i,g])}}function f(i){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,u&&(o=i[0]&2?u.return:i[0]?u.throw||((o=u.return)&&o.call(u),0):u.next)&&!(o=o.call(u,i[1])).done)return o;switch(u=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,u=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=r.call(t,e)}catch(g){i=[6,g],u=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},d=this&&this.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(L,"__esModule",{value:!0});var p=E("../LinkList/LinkList"),h=E("../Map/Map");s.initSize=16,s.maxSize=1<<30,s.sigma=.75,s.treeifyThreshold=8,s.untreeifyThreshold=6,s.minTreeifySize=64;function s(t,r,e){var n=this;if(t===void 0&&(t=[]),r===void 0&&(r=s.initSize),e=e||function(f){var i,g,S=0,A="";if(typeof f=="number")S=Math.floor(f),S=(S<<5)-S,S=S&S;else{typeof f!="string"?A=JSON.stringify(f):A=f;try{for(var P=d(A),B=P.next();!B.done;B=P.next()){var R=B.value,W=R.charCodeAt(0);S=(S<<5)-S+W,S=S&S}}catch(l){i={error:l}}finally{try{B&&!B.done&&(g=P.return)&&g.call(P)}finally{if(i)throw i.error}}}return S^=S>>>16,S},(r&r-1)!==0)throw new Error("initBucketNum must be 2 to the power of n");var u=0,o=[],v=Math.max(s.initSize,Math.min(s.maxSize,r));this.size=function(){return u},this.empty=function(){return u===0},this.clear=function(){u=0,v=r,o=[]},this.forEach=function(f){var i=0;o.forEach(function(g){g.forEach(function(S){f(S,i++)})})};var y=function(f){if(!(f>=s.maxSize)){v=f*2;var i=[];o.forEach(function(g,S){if(!g.empty()){if(g instanceof p.default&&g.size()===1){var A=g.front(),P=A.key,B=A.value;i[e(P)&v-1]=new p.default([{key:P,value:B}])}else if(g instanceof h.default){var R=new p.default,W=new p.default;g.forEach(function(b){var j=e(b.key);(j&f)===0?R.pushBack(b):W.pushBack(b)}),R.size()>s.untreeifyThreshold?i[S]=new h.default(R):R.size()&&(i[S]=R),W.size()>s.untreeifyThreshold?i[S+f]=new h.default(W):W.size()&&(i[S+f]=W)}else{var l=new p.default,_=new p.default;g.forEach(function(b){var j=e(b.key);(j&f)===0?l.pushBack(b):_.pushBack(b)}),l.size()&&(i[S]=l),_.size()&&(i[S+f]=_)}o[S].clear()}}),o=i}};this.setElement=function(f,i){var g,S;if(f==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(i==null){this.eraseElementByKey(f);return}var A=e(f)&v-1;if(!o[A])++u,o[A]=new p.default([{key:f,value:i}]);else{var P=o[A].size();if(o[A]instanceof p.default){try{for(var B=d(o[A]),R=B.next();!R.done;R=B.next()){var W=R.value;if(W.key===f){W.value=i;return}}}catch(_){g={error:_}}finally{try{R&&!R.done&&(S=B.return)&&S.call(B)}finally{if(g)throw g.error}}o[A].pushBack({key:f,value:i}),o[A].size()>=s.treeifyThreshold&&(o[A]=new h.default(o[A]))}else o[A].setElement(f,i);var l=o[A].size();u+=l-P}u>v*s.sigma&&y.call(this,v)},this.getElementByKey=function(f){var i,g,S=e(f)&v-1;if(o[S]){if(o[S]instanceof h.default)return o[S].getElementByKey(f);try{for(var A=d(o[S]),P=A.next();!P.done;P=A.next()){var B=P.value;if(B.key===f)return B.value}}catch(R){i={error:R}}finally{try{P&&!P.done&&(g=A.return)&&g.call(A)}finally{if(i)throw i.error}}}},this.eraseElementByKey=function(f){var i,g,S=e(f)&v-1;if(o[S]){var A=o[S].size();if(o[S]instanceof h.default)o[S].eraseElementByKey(f),o[S].size()<=s.untreeifyThreshold&&(o[S]=new p.default(o[S]));else{var P=-1;try{for(var B=d(o[S]),R=B.next();!R.done;R=B.next()){var W=R.value;if(++P,W.key===f){o[S].eraseElementByPos(P);break}}}catch(_){i={error:_}}finally{try{R&&!R.done&&(g=B.return)&&g.call(B)}finally{if(i)throw i.error}}}var l=o[S].size();u+=l-A}},this.find=function(f){var i,g,S=e(f)&v-1;if(!o[S])return!1;if(o[S]instanceof h.default)return o[S].find(f);try{for(var A=d(o[S]),P=A.next();!P.done;P=A.next()){var B=P.value;if(B.key===f)return!0}}catch(R){i={error:R}}finally{try{P&&!P.done&&(g=A.return)&&g.call(A)}finally{if(i)throw i.error}}return!1},this[Symbol.iterator]=function(){return(function(){var f,i,g,S,A,P,B;return w(this,function(R){switch(R.label){case 0:f=0,R.label=1;case 1:if(!(f<v))return[3,10];for(;f<v&&!o[f];)++f;if(f>=v)return[3,10];R.label=2;case 2:R.trys.push([2,7,8,9]),i=(P=void 0,d(o[f])),g=i.next(),R.label=3;case 3:return g.done?[3,6]:(S=g.value,[4,S]);case 4:R.sent(),R.label=5;case 5:return g=i.next(),[3,3];case 6:return[3,9];case 7:return A=R.sent(),P={error:A},[3,9];case 8:try{g&&!g.done&&(B=i.return)&&B.call(i)}finally{if(P)throw P.error}return[7];case 9:return++f,[3,1];case 10:return[2]}})})()},t.forEach(function(f){var i=f.key,g=f.value;return n.setElement(i,g)}),Object.freeze(this)}Object.freeze(s),L.default=s},{"../LinkList/LinkList":29,"../Map/Map":30}],28:[function(E,U,L){var w=this&&this.__generator||function(t,r){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,u,o,v;return v={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function y(i){return function(g){return f([i,g])}}function f(i){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,u&&(o=i[0]&2?u.return:i[0]?u.throw||((o=u.return)&&o.call(u),0):u.next)&&!(o=o.call(u,i[1])).done)return o;switch(u=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,u=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=r.call(t,e)}catch(g){i=[6,g],u=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},d=this&&this.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(L,"__esModule",{value:!0});var p=E("../Set/Set"),h=E("../LinkList/LinkList");s.initSize=16,s.maxSize=1<<30,s.sigma=.75,s.treeifyThreshold=8,s.untreeifyThreshold=6,s.minTreeifySize=64;function s(t,r,e){var n=this;if(t===void 0&&(t=[]),r===void 0&&(r=s.initSize),e=e||function(f){var i=0,g="";if(typeof f=="number")i=Math.floor(f),i=(i<<5)-i,i=i&i;else{typeof f!="string"?g=JSON.stringify(f):g=f;for(var S=0;S<g.length;S++){var A=g.charCodeAt(S);i=(i<<5)-i+A,i=i&i}}return i^=i>>>16,i},(r&r-1)!==0)throw new Error("initBucketNum must be 2 to the power of n");var u=0,o=[],v=Math.max(s.initSize,Math.min(s.maxSize,r));this.size=function(){return u},this.empty=function(){return u===0},this.clear=function(){u=0,v=r,o=[]},this.forEach=function(f){var i=0;o.forEach(function(g){g.forEach(function(S){f(S,i++)})})};var y=function(f){if(!(f>=s.maxSize)){v=f*2;var i=[];o.forEach(function(g,S){if(!g.empty()){if(g instanceof h.default&&g.size()===1){var A=g.front();if(A===void 0)throw new Error("unknown error");i[e(A)&v-1]=new h.default([A])}else if(g instanceof p.default){var P=new h.default,B=new h.default;g.forEach(function(l){var _=e(l);(_&f)===0?P.pushBack(l):B.pushBack(l)}),P.size()>s.untreeifyThreshold?i[S]=new p.default(P):P.size()&&(i[S]=P),B.size()>s.untreeifyThreshold?i[S+f]=new p.default(B):B.size()&&(i[S+f]=B)}else{var R=new h.default,W=new h.default;g.forEach(function(l){var _=e(l);(_&f)===0?R.pushBack(l):W.pushBack(l)}),R.size()&&(i[S]=R),W.size()&&(i[S+f]=W)}o[S].clear()}}),o=i}};this.insert=function(f){if(f==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");var i=e(f)&v-1;if(!o[i])o[i]=new h.default([f]),++u;else{var g=o[i].size();if(o[i]instanceof h.default){if(o[i].find(f))return;o[i].pushBack(f),o[i].size()>=s.treeifyThreshold&&(o[i]=new p.default(o[i]))}else o[i].insert(f);var S=o[i].size();u+=S-g}u>v*s.sigma&&y.call(this,v)},this.eraseElementByValue=function(f){var i=e(f)&v-1;if(o[i]){var g=o[i].size();o[i].eraseElementByValue(f),o[i]instanceof p.default&&o[i].size()<=s.untreeifyThreshold&&(o[i]=new h.default(o[i]));var S=o[i].size();u+=S-g}},this.find=function(f){var i=e(f)&v-1;return o[i]?o[i].find(f):!1},this[Symbol.iterator]=function(){return(function(){var f,i,g,S,A,P,B;return w(this,function(R){switch(R.label){case 0:f=0,R.label=1;case 1:if(!(f<v))return[3,10];for(;f<v&&!o[f];)++f;if(f>=v)return[3,10];R.label=2;case 2:R.trys.push([2,7,8,9]),i=(P=void 0,d(o[f])),g=i.next(),R.label=3;case 3:return g.done?[3,6]:(S=g.value,[4,S]);case 4:R.sent(),R.label=5;case 5:return g=i.next(),[3,3];case 6:return[3,9];case 7:return A=R.sent(),P={error:A},[3,9];case 8:try{g&&!g.done&&(B=i.return)&&B.call(i)}finally{if(P)throw P.error}return[7];case 9:return++f,[3,1];case 10:return[2]}})})()},t.forEach(function(f){return n.insert(f)}),Object.freeze(this)}Object.freeze(s),L.default=s},{"../LinkList/LinkList":29,"../Set/Set":33}],29:[function(E,U,L){var w=this&&this.__generator||function(h,s){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},r,e,n,u;return u={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function o(y){return function(f){return v([y,f])}}function v(y){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,e&&(n=y[0]&2?e.return:y[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,y[1])).done)return n;switch(e=0,n&&(y=[y[0]&2,n.value]),y[0]){case 0:case 1:n=y;break;case 4:return t.label++,{value:y[1],done:!1};case 5:t.label++,e=y[1],y=[0];continue;case 7:y=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(y[0]===6||y[0]===2)){t=0;continue}if(y[0]===3&&(!n||y[1]>n[0]&&y[1]<n[3])){t.label=y[1];break}if(y[0]===6&&t.label<n[1]){t.label=n[1],n=y;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(y);break}n[2]&&t.ops.pop(),t.trys.pop();continue}y=s.call(h,t)}catch(f){y=[6,f],e=0}finally{r=n=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}};Object.defineProperty(L,"__esModule",{value:!0});var d=(function(){function h(s){this.value=void 0,this.pre=void 0,this.next=void 0,this.value=s}return h})();function p(h){var s=this;h===void 0&&(h=[]);var t=0,r=void 0,e=void 0;this.size=function(){return t},this.empty=function(){return t===0},this.clear=function(){r=e=void 0,t=0},this.front=function(){return r==null?void 0:r.value},this.back=function(){return e==null?void 0:e.value},this.forEach=function(n){for(var u=r,o=0;u;){if(u.value===void 0)throw new Error("unknown error");n(u.value,o++),u=u.next}},this.getElementByPos=function(n){if(n<0||n>=t)throw new Error("pos must more then 0 and less then the list length");for(var u=r;n--&&u;)u=u.next;if(!u||u.value===void 0)throw new Error("unknown error");return u.value},this.eraseElementByPos=function(n){if(n<0||n>=t)throw new Error("erase pos must more then 0 and less then the list length");if(n===0)this.popFront();else if(n===t-1)this.popBack();else{for(var u=r;n--;){if(!(u!=null&&u.next))throw new Error("unknown error");u=u.next}if(!u||!u.pre||!u.next)throw new Error("unknown error");var o=u.pre,v=u.next;v.pre=o,o.next=v,t>0&&--t}},this.eraseElementByValue=function(n){for(;r&&r.value===n;)this.popFront();for(;e&&e.value===n;)this.popBack();if(r)for(var u=r;u;){if(u.value===n){var o=u.pre,v=u.next;v&&(v.pre=o),o&&(o.next=v),t>0&&--t}u=u.next}},this.pushBack=function(n){if(n==null)throw new Error("you can't push null or undefined here");++t;var u=new d(n);e?(e.next=u,u.pre=e,e=u):r=e=u},this.popBack=function(){e&&(t>0&&--t,e&&(r===e?r=e=void 0:(e=e.pre,e&&(e.next=void 0))))},this.setElementByPos=function(n,u){if(u==null)throw new Error("you can't set null or undefined here");if(n<0||n>=t)throw new Error("pos must more then 0 and less then the list length");for(var o=r;n--;){if(!o)throw new Error("unknown error");o=o.next}o&&(o.value=u)},this.insert=function(n,u,o){if(o===void 0&&(o=1),u==null)throw new Error("you can't insert null or undefined here");if(n<0||n>t)throw new Error("insert pos must more then 0 and less then or equal to the list length");if(o<0)throw new Error("insert size must more than 0");if(n===0)for(;o--;)this.pushFront(u);else if(n===t)for(;o--;)this.pushBack(u);else{for(var v=r,y=1;y<n;++y){if(!(v!=null&&v.next))throw new Error("unknown error");v=v==null?void 0:v.next}if(!v)throw new Error("unknown error");var f=v.next;for(t+=o;o--;)v.next=new d(u),v.next.pre=v,v=v.next;v.next=f,f&&(f.pre=v)}},this.find=function(n){for(var u=r;u;){if(u.value===n)return!0;u=u.next}return!1},this.reverse=function(){for(var n=r,u=e,o=0;n&&u&&o*2<t;){var v=n.value;n.value=u.value,u.value=v,n=n.next,u=u.pre,++o}},this.unique=function(){for(var n=r;n;){for(var u=n;u&&u.next&&u.value===u.next.value;)u=u.next,t>0&&--t;n.next=u.next,n.next&&(n.next.pre=n),n=n.next}},this.sort=function(n){var u=[];this.forEach(function(v){u.push(v)}),u.sort(n);var o=r;u.forEach(function(v){o&&(o.value=v,o=o.next)})},this.pushFront=function(n){if(n==null)throw new Error("you can't push null or undefined here");++t;var u=new d(n);r?(u.next=r,r.pre=u,r=u):r=e=u},this.popFront=function(){r&&(t>0&&--t,r&&(r===e?r=e=void 0:(r=r.next,r&&(r.pre=void 0))))},this.merge=function(n){var u=this,o=r;n.forEach(function(v){for(;o&&o.value!==void 0&&o.value<=v;)o=o.next;if(o===void 0)u.pushBack(v),o=e;else if(o===r)u.pushFront(v),o=r;else{++t;var y=o.pre;y&&(y.next=new d(v),y.next.pre=y,y.next.next=o,o&&(o.pre=y.next))}})},this[Symbol.iterator]=function(){return(function(){var n;return w(this,function(u){switch(u.label){case 0:n=r,u.label=1;case 1:if(n===void 0)return[3,3];if(!n.value)throw new Error("unknown error");return[4,n.value];case 2:return u.sent(),n=n.next,[3,1];case 3:return[2]}})})()},h.forEach(function(n){return s.pushBack(n)}),Object.freeze(this)}Object.freeze(p),L.default=p},{}],30:[function(E,U,L){var w=this&&this.__generator||function(s,t){var r={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},e,n,u,o;return o={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function v(f){return function(i){return y([f,i])}}function y(f){if(e)throw new TypeError("Generator is already executing.");for(;r;)try{if(e=1,n&&(u=f[0]&2?n.return:f[0]?n.throw||((u=n.return)&&u.call(n),0):n.next)&&!(u=u.call(n,f[1])).done)return u;switch(n=0,u&&(f=[f[0]&2,u.value]),f[0]){case 0:case 1:u=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,n=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(u=r.trys,!(u=u.length>0&&u[u.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!u||f[1]>u[0]&&f[1]<u[3])){r.label=f[1];break}if(f[0]===6&&r.label<u[1]){r.label=u[1],u=f;break}if(u&&r.label<u[2]){r.label=u[2],r.ops.push(f);break}u[2]&&r.ops.pop(),r.trys.pop();continue}f=t.call(s,r)}catch(i){f=[6,i],n=0}finally{e=u=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},d=this&&this.__values||function(s){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&s[t],e=0;if(r)return r.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&e>=s.length&&(s=void 0),{value:s&&s[e++],done:!s}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(L,"__esModule",{value:!0});var p=E("../Base/TreeNode");function h(s,t){var r=this;s===void 0&&(s=[]),t=t||function(l,_){return l<_?-1:l>_?1:0};var e=0,n=new p.default;n.color=p.default.TreeNodeColorType.black,this.size=function(){return e},this.empty=function(){return e===0},this.clear=function(){e=0,n.key=n.value=void 0,n.leftChild=n.rightChild=n.brother=void 0};var u=function(l){if(!l||l.key===void 0)throw new Error("unknown error");return l.leftChild?u(l.leftChild):l},o=function(l){if(!l||l.key===void 0)throw new Error("unknown error");return l.rightChild?o(l.rightChild):l};this.front=function(){if(!this.empty()){var l=u(n);if(l.key===void 0||l.value===void 0)throw new Error("unknown error");return{key:l.key,value:l.value}}},this.back=function(){if(!this.empty()){var l=o(n);if(l.key===void 0||l.value===void 0)throw new Error("unknown error");return{key:l.key,value:l.value}}},this.forEach=function(l){var _,b,j=0;try{for(var V=d(this),H=V.next();!H.done;H=V.next()){var Y=H.value;l(Y,j++)}}catch(C){_={error:C}}finally{try{H&&!H.done&&(b=V.return)&&b.call(V)}finally{if(_)throw _.error}}},this.getElementByPos=function(l){var _,b;if(l<0||l>=this.size())throw new Error("pos must more than 0 and less than set's size");var j=0;try{for(var V=d(this),H=V.next();!H.done;H=V.next()){var Y=H.value;if(j===l)return Y;++j}}catch(C){_={error:C}}finally{try{H&&!H.done&&(b=V.return)&&b.call(V)}finally{if(_)throw _.error}}throw new Error("unknown Error")};var v=function(l,_){if(!(!l||l.key===void 0||l.value===void 0)){var b=t(l.key,_);return b===0?{key:l.key,value:l.value}:b<0?v(l.rightChild,_):v(l.leftChild,_)||{key:l.key,value:l.value}}};this.lowerBound=function(l){return v(n,l)};var y=function(l,_){if(!(!l||l.key===void 0||l.value===void 0)){var b=t(l.key,_);return b<=0?y(l.rightChild,_):y(l.leftChild,_)||{key:l.key,value:l.value}}};this.upperBound=function(l){return y(n,l)};var f=function(l,_){if(!(!l||l.key===void 0||l.value===void 0)){var b=t(l.key,_);return b===0?{key:l.key,value:l.value}:b>0?f(l.leftChild,_):f(l.rightChild,_)||{key:l.key,value:l.value}}};this.reverseLowerBound=function(l){return f(n,l)};var i=function(l,_){if(!(!l||l.key===void 0||l.value===void 0)){var b=t(l.key,_);return b>=0?i(l.leftChild,_):i(l.rightChild,_)||{key:l.key,value:l.value}}};this.reverseUpperBound=function(l){return i(n,l)};var g=function(l){var _=l.parent;if(!_){if(l===n)return;throw new Error("unknown error")}if(l.color===p.default.TreeNodeColorType.red){l.color=p.default.TreeNodeColorType.black;return}var b=l.brother;if(!b)throw new Error("unknown error");if(l===_.leftChild){if(b.color===p.default.TreeNodeColorType.red){b.color=p.default.TreeNodeColorType.black,_.color=p.default.TreeNodeColorType.red;var j=_.rotateLeft();n===_&&(n=j),g(l)}else if(b.color===p.default.TreeNodeColorType.black)if(b.rightChild&&b.rightChild.color===p.default.TreeNodeColorType.red){b.color=_.color,_.color=p.default.TreeNodeColorType.black,b.rightChild&&(b.rightChild.color=p.default.TreeNodeColorType.black);var j=_.rotateLeft();n===_&&(n=j),l.color=p.default.TreeNodeColorType.black}else if((!b.rightChild||b.rightChild.color===p.default.TreeNodeColorType.black)&&b.leftChild&&b.leftChild.color===p.default.TreeNodeColorType.red){b.color=p.default.TreeNodeColorType.red,b.leftChild&&(b.leftChild.color=p.default.TreeNodeColorType.black);var j=b.rotateRight();n===b&&(n=j),g(l)}else(!b.leftChild||b.leftChild.color===p.default.TreeNodeColorType.black)&&(!b.rightChild||b.rightChild.color===p.default.TreeNodeColorType.black)&&(b.color=p.default.TreeNodeColorType.red,g(_))}else if(l===_.rightChild){if(b.color===p.default.TreeNodeColorType.red){b.color=p.default.TreeNodeColorType.black,_.color=p.default.TreeNodeColorType.red;var j=_.rotateRight();n===_&&(n=j),g(l)}else if(b.color===p.default.TreeNodeColorType.black)if(b.leftChild&&b.leftChild.color===p.default.TreeNodeColorType.red){b.color=_.color,_.color=p.default.TreeNodeColorType.black,b.leftChild&&(b.leftChild.color=p.default.TreeNodeColorType.black);var j=_.rotateRight();n===_&&(n=j),l.color=p.default.TreeNodeColorType.black}else if((!b.leftChild||b.leftChild.color===p.default.TreeNodeColorType.black)&&b.rightChild&&b.rightChild.color===p.default.TreeNodeColorType.red){b.color=p.default.TreeNodeColorType.red,b.rightChild&&(b.rightChild.color=p.default.TreeNodeColorType.black);var j=b.rotateLeft();n===b&&(n=j),g(l)}else(!b.leftChild||b.leftChild.color===p.default.TreeNodeColorType.black)&&(!b.rightChild||b.rightChild.color===p.default.TreeNodeColorType.black)&&(b.color=p.default.TreeNodeColorType.red,g(_))}},S=function(l){for(var _=l;_.leftChild||_.rightChild;){if(_.rightChild){_=u(_.rightChild);var b=l.key;l.key=_.key,_.key=b;var j=l.value;l.value=_.value,_.value=j,l=_}if(_.leftChild){_=o(_.leftChild);var b=l.key;l.key=_.key,_.key=b;var j=l.value;l.value=_.value,_.value=j,l=_}}g(_),_&&_.remove(),--e,n.color=p.default.TreeNodeColorType.black},A=function(l,_){if(!l||l.key===void 0)return!1;var b=A(l.leftChild,_);return b||_(l)?!0:A(l.rightChild,_)};this.eraseElementByPos=function(l){if(l<0||l>=e)throw new Error("pos must more than 0 and less than set's size");var _=0;A(n,function(b){return l===_?(S(b),!0):(++_,!1)})},this.eraseElementByKey=function(l){if(!this.empty()){var _=R(n,l);_===void 0||_.key===void 0||t(_.key,l)!==0||S(_)}};var P=function(l,_){if(!l||l.key===void 0)throw new Error("unknown error");var b=t(_,l.key);return b<0?l.leftChild?P(l.leftChild,_):(l.leftChild=new p.default,l.leftChild.parent=l,l.leftChild.brother=l.rightChild,l.rightChild&&(l.rightChild.brother=l.leftChild),l.leftChild):b>0?l.rightChild?P(l.rightChild,_):(l.rightChild=new p.default,l.rightChild.parent=l,l.rightChild.brother=l.leftChild,l.leftChild&&(l.leftChild.brother=l.rightChild),l.rightChild):l},B=function(l){var _=l.parent;if(!_){if(l===n)return;throw new Error("unknown error")}if(_.color!==p.default.TreeNodeColorType.black&&_.color===p.default.TreeNodeColorType.red){var b=_.brother,j=_.parent;if(!j)throw new Error("unknown error");if(b&&b.color===p.default.TreeNodeColorType.red)b.color=_.color=p.default.TreeNodeColorType.black,j.color=p.default.TreeNodeColorType.red,B(j);else if(!b||b.color===p.default.TreeNodeColorType.black){if(_===j.leftChild){if(l===_.leftChild){_.color=p.default.TreeNodeColorType.black,j.color=p.default.TreeNodeColorType.red;var V=j.rotateRight();j===n&&(n=V)}else if(l===_.rightChild){var V=_.rotateLeft();j===n&&(n=V),B(_)}}else if(_===j.rightChild){if(l===_.leftChild){var V=_.rotateRight();j===n&&(n=V),B(_)}else if(l===_.rightChild){_.color=p.default.TreeNodeColorType.black,j.color=p.default.TreeNodeColorType.red;var V=j.rotateLeft();j===n&&(n=V)}}}}};this.setElement=function(l,_){if(l==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(_==null){this.eraseElementByKey(l);return}if(this.empty()){++e,n.key=l,n.value=_,n.color=p.default.TreeNodeColorType.black;return}var b=P(n,l);if(b.key!==void 0&&t(b.key,l)===0){b.value=_;return}++e,b.key=l,b.value=_,B(b),n.color=p.default.TreeNodeColorType.black};var R=function(l,_){if(!(!l||l.key===void 0)){var b=t(_,l.key);return b<0?R(l.leftChild,_):b>0?R(l.rightChild,_):l}};this.find=function(l){return!!R(n,l)},this.getElementByKey=function(l){var _=R(n,l);if((_==null?void 0:_.key)===void 0||(_==null?void 0:_.value)===void 0)throw new Error("unknown error");return _.value},this.union=function(l){var _=this;l.forEach(function(b){var j=b.key,V=b.value;return _.setElement(j,V)})},this.getHeight=function(){if(this.empty())return 0;var l=function(_){return _?Math.max(l(_.leftChild),l(_.rightChild))+1:1};return l(n)};var W=function(l){return w(this,function(_){switch(_.label){case 0:return!l||l.key===void 0||l.value===void 0?[2]:[5,d(W(l.leftChild))];case 1:return _.sent(),[4,{key:l.key,value:l.value}];case 2:return _.sent(),[5,d(W(l.rightChild))];case 3:return _.sent(),[2]}})};this[Symbol.iterator]=function(){return W(n)},s.forEach(function(l){var _=l.key,b=l.value;return r.setElement(_,b)}),Object.freeze(this)}Object.freeze(h),L.default=h},{"../Base/TreeNode":25}],31:[function(E,U,L){Object.defineProperty(L,"__esModule",{value:!0});function w(d,p){d===void 0&&(d=[]),p=p||function(e,n){return e>n?-1:e<n?1:0};var h=[];d.forEach(function(e){return h.push(e)});var s=h.length,t=function(e,n){if(e<0||e>=s)throw new Error("unknown error");if(n<0||n>=s)throw new Error("unknown error");var u=h[e];h[e]=h[n],h[n]=u},r=function(e){if(e<0||e>=s)throw new Error("unknown error");var n=e*2+1,u=e*2+2;n<s&&p(h[e],h[n])>0&&t(e,n),u<s&&p(h[e],h[u])>0&&t(e,u)};(function(){for(var e=Math.floor((s-1)/2);e>=0;--e)for(var n=e,u=n*2+1;u<s;){var o=u,v=o+1,y=o;if(v<s&&p(h[o],h[v])>0&&(y=v),p(h[n],h[y])<=0)break;t(n,y),n=y,u=n*2+1}})(),this.size=function(){return s},this.empty=function(){return s===0},this.clear=function(){s=0,h.length=0},this.push=function(e){if(h.push(e),++s,s!==1)for(var n=s-1;n>0;){var u=Math.floor((n-1)/2);if(p(h[u],e)<=0)break;r(u),n=u}},this.pop=function(){if(!this.empty()){if(this.size()===1){--s;return}var e=h[s-1];--s;for(var n=0;n<this.size();){var u=n*2+1,o=n*2+2;if(u>=this.size())break;var v=u;if(o<this.size()&&p(h[u],h[o])>0&&(v=o),p(h[v],e)>=0)break;h[n]=h[v],n=v}h[n]=e}},this.top=function(){return h[0]},Object.freeze(this)}Object.freeze(w),L.default=w},{}],32:[function(E,U,L){Object.defineProperty(L,"__esModule",{value:!0});var w=E("../LinkList/LinkList");function d(p){p===void 0&&(p=[]);var h=new w.default(p);this.size=function(){return h.size()},this.empty=function(){return h.empty()},this.clear=function(){h.clear()},this.push=function(s){h.pushBack(s)},this.pop=function(){h.popFront()},this.front=function(){return h.front()},Object.freeze(this)}Object.freeze(d),L.default=d},{"../LinkList/LinkList":29}],33:[function(E,U,L){var w=this&&this.__generator||function(s,t){var r={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},e,n,u,o;return o={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function v(f){return function(i){return y([f,i])}}function y(f){if(e)throw new TypeError("Generator is already executing.");for(;r;)try{if(e=1,n&&(u=f[0]&2?n.return:f[0]?n.throw||((u=n.return)&&u.call(n),0):n.next)&&!(u=u.call(n,f[1])).done)return u;switch(n=0,u&&(f=[f[0]&2,u.value]),f[0]){case 0:case 1:u=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,n=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(u=r.trys,!(u=u.length>0&&u[u.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!u||f[1]>u[0]&&f[1]<u[3])){r.label=f[1];break}if(f[0]===6&&r.label<u[1]){r.label=u[1],u=f;break}if(u&&r.label<u[2]){r.label=u[2],r.ops.push(f);break}u[2]&&r.ops.pop(),r.trys.pop();continue}f=t.call(s,r)}catch(i){f=[6,i],n=0}finally{e=u=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},d=this&&this.__values||function(s){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&s[t],e=0;if(r)return r.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&e>=s.length&&(s=void 0),{value:s&&s[e++],done:!s}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(L,"__esModule",{value:!0});var p=E("../Base/TreeNode");function h(s,t){var r=this;s===void 0&&(s=[]),t=t||function(l,_){return l<_?-1:l>_?1:0};var e=0,n=new p.default;n.color=p.default.TreeNodeColorType.black,this.size=function(){return e},this.empty=function(){return e===0},this.clear=function(){e=0,n.key=void 0,n.leftChild=n.rightChild=n.brother=n.parent=void 0,n.color=p.default.TreeNodeColorType.black};var u=function(l){if(!l||l.key===void 0)throw new Error("unknown error");return l.leftChild?u(l.leftChild):l},o=function(l){if(!l||l.key===void 0)throw new Error("unknown error");return l.rightChild?o(l.rightChild):l};this.front=function(){if(!this.empty()){var l=u(n);return l.key}},this.back=function(){if(!this.empty()){var l=o(n);return l.key}},this.forEach=function(l){var _,b,j=0;try{for(var V=d(this),H=V.next();!H.done;H=V.next()){var Y=H.value;l(Y,j++)}}catch(C){_={error:C}}finally{try{H&&!H.done&&(b=V.return)&&b.call(V)}finally{if(_)throw _.error}}},this.getElementByPos=function(l){var _,b;if(l<0||l>=this.size())throw new Error("pos must more than 0 and less than set's size");var j=0;try{for(var V=d(this),H=V.next();!H.done;H=V.next()){var Y=H.value;if(j===l)return Y;++j}}catch(C){_={error:C}}finally{try{H&&!H.done&&(b=V.return)&&b.call(V)}finally{if(_)throw _.error}}throw new Error("unknown error")};var v=function(l){var _=l.parent;if(!_){if(l===n)return;throw new Error("unknown error")}if(l.color===p.default.TreeNodeColorType.red){l.color=p.default.TreeNodeColorType.black;return}var b=l.brother;if(!b)throw new Error("unknown error");if(l===_.leftChild){if(b.color===p.default.TreeNodeColorType.red){b.color=p.default.TreeNodeColorType.black,_.color=p.default.TreeNodeColorType.red;var j=_.rotateLeft();n===_&&(n=j),v(l)}else if(b.color===p.default.TreeNodeColorType.black)if(b.rightChild&&b.rightChild.color===p.default.TreeNodeColorType.red){b.color=_.color,_.color=p.default.TreeNodeColorType.black,b.rightChild&&(b.rightChild.color=p.default.TreeNodeColorType.black);var j=_.rotateLeft();n===_&&(n=j),l.color=p.default.TreeNodeColorType.black}else if((!b.rightChild||b.rightChild.color===p.default.TreeNodeColorType.black)&&b.leftChild&&b.leftChild.color===p.default.TreeNodeColorType.red){b.color=p.default.TreeNodeColorType.red,b.leftChild&&(b.leftChild.color=p.default.TreeNodeColorType.black);var j=b.rotateRight();n===b&&(n=j),v(l)}else(!b.leftChild||b.leftChild.color===p.default.TreeNodeColorType.black)&&(!b.rightChild||b.rightChild.color===p.default.TreeNodeColorType.black)&&(b.color=p.default.TreeNodeColorType.red,v(_))}else if(l===_.rightChild){if(b.color===p.default.TreeNodeColorType.red){b.color=p.default.TreeNodeColorType.black,_.color=p.default.TreeNodeColorType.red;var j=_.rotateRight();n===_&&(n=j),v(l)}else if(b.color===p.default.TreeNodeColorType.black)if(b.leftChild&&b.leftChild.color===p.default.TreeNodeColorType.red){b.color=_.color,_.color=p.default.TreeNodeColorType.black,b.leftChild&&(b.leftChild.color=p.default.TreeNodeColorType.black);var j=_.rotateRight();n===_&&(n=j),l.color=p.default.TreeNodeColorType.black}else if((!b.leftChild||b.leftChild.color===p.default.TreeNodeColorType.black)&&b.rightChild&&b.rightChild.color===p.default.TreeNodeColorType.red){b.color=p.default.TreeNodeColorType.red,b.rightChild&&(b.rightChild.color=p.default.TreeNodeColorType.black);var j=b.rotateLeft();n===b&&(n=j),v(l)}else(!b.leftChild||b.leftChild.color===p.default.TreeNodeColorType.black)&&(!b.rightChild||b.rightChild.color===p.default.TreeNodeColorType.black)&&(b.color=p.default.TreeNodeColorType.red,v(_))}},y=function(l){for(var _=l;_.leftChild||_.rightChild;){if(_.rightChild){_=u(_.rightChild);var b=l.key;l.key=_.key,_.key=b,l=_}if(_.leftChild){_=o(_.leftChild);var b=l.key;l.key=_.key,_.key=b,l=_}}v(_),_&&_.remove(),--e,n.color=p.default.TreeNodeColorType.black},f=function(l,_){if(!l||l.key===void 0)return!1;var b=f(l.leftChild,_);return b||_(l)?!0:f(l.rightChild,_)};this.eraseElementByPos=function(l){if(l<0||l>=e)throw new Error("pos must more than 0 and less than set's size");var _=0;f(n,function(b){return l===_?(y(b),!0):(++_,!1)})},this.eraseElementByValue=function(l){if(!this.empty()){var _=S(n,l);_===void 0||_.key===void 0||t(_.key,l)!==0||y(_)}};var i=function(l,_){if(!l||l.key===void 0)throw new Error("unknown error");var b=t(_,l.key);return b<0?l.leftChild?i(l.leftChild,_):(l.leftChild=new p.default,l.leftChild.parent=l,l.leftChild.brother=l.rightChild,l.rightChild&&(l.rightChild.brother=l.leftChild),l.leftChild):b>0?l.rightChild?i(l.rightChild,_):(l.rightChild=new p.default,l.rightChild.parent=l,l.rightChild.brother=l.leftChild,l.leftChild&&(l.leftChild.brother=l.rightChild),l.rightChild):l},g=function(l){var _=l.parent;if(!_){if(l===n)return;throw new Error("unknown error")}if(_.color!==p.default.TreeNodeColorType.black&&_.color===p.default.TreeNodeColorType.red){var b=_.brother,j=_.parent;if(!j)throw new Error("unknown error");if(b&&b.color===p.default.TreeNodeColorType.red)b.color=_.color=p.default.TreeNodeColorType.black,j.color=p.default.TreeNodeColorType.red,g(j);else if(!b||b.color===p.default.TreeNodeColorType.black){if(_===j.leftChild){if(l===_.leftChild){_.color=p.default.TreeNodeColorType.black,j.color=p.default.TreeNodeColorType.red;var V=j.rotateRight();j===n&&(n=V)}else if(l===_.rightChild){var V=_.rotateLeft();j===n&&(n=V),g(_)}}else if(_===j.rightChild){if(l===_.leftChild){var V=_.rotateRight();j===n&&(n=V),g(_)}else if(l===_.rightChild){_.color=p.default.TreeNodeColorType.black,j.color=p.default.TreeNodeColorType.red;var V=j.rotateLeft();j===n&&(n=V)}}}}};this.insert=function(l){if(l==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(this.empty()){++e,n.key=l,n.color=p.default.TreeNodeColorType.black;return}var _=i(n,l);_.key!==void 0&&t(_.key,l)===0||(++e,_.key=l,g(_),n.color=p.default.TreeNodeColorType.black)};var S=function(l,_){if(!(!l||l.key===void 0)){var b=t(_,l.key);return b<0?S(l.leftChild,_):b>0?S(l.rightChild,_):l}};this.find=function(l){var _=S(n,l);return _!==void 0&&_.key!==void 0&&t(_.key,l)===0};var A=function(l,_){if(!(!l||l.key===void 0)){var b=t(l.key,_);if(b===0)return l.key;if(b<0)return A(l.rightChild,_);var j=A(l.leftChild,_);return j!==void 0?j:l.key}};this.lowerBound=function(l){return A(n,l)};var P=function(l,_){if(!(!l||l.key===void 0)){var b=t(l.key,_);if(b<=0)return P(l.rightChild,_);var j=P(l.leftChild,_);return j!==void 0?j:l.key}};this.upperBound=function(l){return P(n,l)};var B=function(l,_){if(!(!l||l.key===void 0)){var b=t(l.key,_);if(b===0)return l.key;if(b>0)return B(l.leftChild,_);var j=B(l.rightChild,_);return j!==void 0?j:l.key}};this.reverseLowerBound=function(l){return B(n,l)};var R=function(l,_){if(!(!l||l.key===void 0)){var b=t(l.key,_);if(b>=0)return R(l.leftChild,_);var j=R(l.rightChild,_);return j!==void 0?j:l.key}};this.reverseUpperBound=function(l){return R(n,l)},this.union=function(l){var _=this;l.forEach(function(b){return _.insert(b)})},this.getHeight=function(){if(this.empty())return 0;var l=function(_){return _?Math.max(l(_.leftChild),l(_.rightChild))+1:1};return l(n)};var W=function(l){return w(this,function(_){switch(_.label){case 0:return!l||l.key===void 0?[2]:[5,d(W(l.leftChild))];case 1:return _.sent(),[4,l.key];case 2:return _.sent(),[5,d(W(l.rightChild))];case 3:return _.sent(),[2]}})};this[Symbol.iterator]=function(){return W(n)},s.forEach(function(l){return r.insert(l)}),Object.freeze(this)}Object.freeze(h),L.default=h},{"../Base/TreeNode":25}],34:[function(E,U,L){Object.defineProperty(L,"__esModule",{value:!0});function w(d){var p=this;d===void 0&&(d=[]);var h=0,s=[];this.size=function(){return h},this.empty=function(){return h===0},this.clear=function(){h=0,s.length=0},this.push=function(t){s.push(t),++h},this.pop=function(){s.pop(),h>0&&--h},this.top=function(){return s[h-1]},d.forEach(function(t){return p.push(t)}),Object.freeze(this)}Object.freeze(w),L.default=w},{}],35:[function(E,U,L){var w=this&&this.__generator||function(t,r){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,u,o,v;return v={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function y(i){return function(g){return f([i,g])}}function f(i){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,u&&(o=i[0]&2?u.return:i[0]?u.throw||((o=u.return)&&o.call(u),0):u.next)&&!(o=o.call(u,i[1])).done)return o;switch(u=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,u=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=r.call(t,e)}catch(g){i=[6,g],u=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},d=this&&this.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),u,o=[],v;try{for(;(r===void 0||r-- >0)&&!(u=n.next()).done;)o.push(u.value)}catch(y){v={error:y}}finally{try{u&&!u.done&&(e=n.return)&&e.call(n)}finally{if(v)throw v.error}}return o},p=this&&this.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,u=r.length,o;n<u;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))},h=this&&this.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(L,"__esModule",{value:!0});function s(t){var r=this;t===void 0&&(t=[]);var e=0,n=[];this.size=function(){return e},this.empty=function(){return e===0},this.clear=function(){e=0,n.length=0},this.front=function(){if(!this.empty())return n[0]},this.back=function(){if(!this.empty())return n[e-1]},this.forEach=function(u){n.forEach(u)},this.getElementByPos=function(u){if(u<0||u>=e)throw new Error("pos must more than 0 and less than vector's size");return n[u]},this.eraseElementByPos=function(u){if(u<0||u>=e)throw new Error("pos must more than 0 and less than vector's size");for(var o=u;o<e-1;++o)n[o]=n[o+1];this.popBack()},this.eraseElementByValue=function(u){var o=[];this.forEach(function(y){y!==u&&o.push(y)}),o.forEach(function(y,f){n[f]=y});for(var v=o.length;e>v;)this.popBack()},this.pushBack=function(u){n.push(u),++e},this.popBack=function(){n.pop(),e>0&&--e},this.setElementByPos=function(u,o){if(u<0||u>=e)throw new Error("pos must more than 0 and less than vector's size");n[u]=o},this.insert=function(u,o,v){if(v===void 0&&(v=1),u<0||u>e)throw new Error("pos must more than 0 and less than or equal to vector's size");n.splice.apply(n,p([u,0],d(new Array(v).fill(o)),!1)),e+=v},this.find=function(u){return n.includes(u)},this.reverse=function(){n.reverse()},this.unique=function(){var u,o=[];this.forEach(function(y,f){(f===0||y!==u)&&(o.push(y),u=y)}),o.forEach(function(y,f){n[f]=y});for(var v=o.length;e>v;)this.popBack()},this.sort=function(u){n.sort(u)},this[Symbol.iterator]=function(){return(function(){return w(this,function(u){switch(u.label){case 0:return[5,h(n)];case 1:return[2,u.sent()]}})})()},t.forEach(function(u){return r.pushBack(u)}),Object.freeze(this)}Object.freeze(s),L.default=s},{}],36:[function(E,U,L){Object.defineProperty(L,"__esModule",{value:!0}),L.HashMap=L.HashSet=L.Map=L.Set=L.PriorityQueue=L.Deque=L.LinkList=L.Queue=L.Stack=L.Vector=void 0;var w=E("./Vector/Vector");L.Vector=w.default;var d=E("./Stack/Stack");L.Stack=d.default;var p=E("./Queue/Queue");L.Queue=p.default;var h=E("./LinkList/LinkList");L.LinkList=h.default;var s=E("./Deque/Deque");L.Deque=s.default;var t=E("./PriorityQueue/PriorityQueue");L.PriorityQueue=t.default;var r=E("./Set/Set");L.Set=r.default;var e=E("./Map/Map");L.Map=e.default;var n=E("./HashSet/HashSet");L.HashSet=n.default;var u=E("./HashMap/HashMap");L.HashMap=u.default},{"./Deque/Deque":26,"./HashMap/HashMap":27,"./HashSet/HashSet":28,"./LinkList/LinkList":29,"./Map/Map":30,"./PriorityQueue/PriorityQueue":31,"./Queue/Queue":32,"./Set/Set":33,"./Stack/Stack":34,"./Vector/Vector":35}],37:[function(E,U,L){const w=E("yallist"),d=Symbol("max"),p=Symbol("length"),h=Symbol("lengthCalculator"),s=Symbol("allowStale"),t=Symbol("maxAge"),r=Symbol("dispose"),e=Symbol("noDisposeOnSet"),n=Symbol("lruList"),u=Symbol("cache"),o=Symbol("updateAgeOnGet"),v=()=>1;class y{constructor(R){if(typeof R=="number"&&(R={max:R}),R||(R={}),R.max&&(typeof R.max!="number"||R.max<0))throw new TypeError("max must be a non-negative number");this[d]=R.max||1/0;const W=R.length||v;if(this[h]=typeof W!="function"?v:W,this[s]=R.stale||!1,R.maxAge&&typeof R.maxAge!="number")throw new TypeError("maxAge must be a number");this[t]=R.maxAge||0,this[r]=R.dispose,this[e]=R.noDisposeOnSet||!1,this[o]=R.updateAgeOnGet||!1,this.reset()}set max(R){if(typeof R!="number"||R<0)throw new TypeError("max must be a non-negative number");this[d]=R||1/0,g(this)}get max(){return this[d]}set allowStale(R){this[s]=!!R}get allowStale(){return this[s]}set maxAge(R){if(typeof R!="number")throw new TypeError("maxAge must be a non-negative number");this[t]=R,g(this)}get maxAge(){return this[t]}set lengthCalculator(R){typeof R!="function"&&(R=v),R!==this[h]&&(this[h]=R,this[p]=0,this[n].forEach(W=>{W.length=this[h](W.value,W.key),this[p]+=W.length})),g(this)}get lengthCalculator(){return this[h]}get length(){return this[p]}get itemCount(){return this[n].length}rforEach(R,W){W=W||this;for(let l=this[n].tail;l!==null;){const _=l.prev;P(this,R,l,W),l=_}}forEach(R,W){W=W||this;for(let l=this[n].head;l!==null;){const _=l.next;P(this,R,l,W),l=_}}keys(){return this[n].toArray().map(R=>R.key)}values(){return this[n].toArray().map(R=>R.value)}reset(){this[r]&&this[n]&&this[n].length&&this[n].forEach(R=>this[r](R.key,R.value)),this[u]=new Map,this[n]=new w,this[p]=0}dump(){return this[n].map(R=>i(this,R)?!1:{k:R.key,v:R.value,e:R.now+(R.maxAge||0)}).toArray().filter(R=>R)}dumpLru(){return this[n]}set(R,W,l){if(l=l||this[t],l&&typeof l!="number")throw new TypeError("maxAge must be a number");const _=l?Date.now():0,b=this[h](W,R);if(this[u].has(R)){if(b>this[d])return S(this,this[u].get(R)),!1;const H=this[u].get(R).value;return this[r]&&(this[e]||this[r](R,H.value)),H.now=_,H.maxAge=l,H.value=W,this[p]+=b-H.length,H.length=b,this.get(R),g(this),!0}const j=new A(R,W,b,_,l);return j.length>this[d]?(this[r]&&this[r](R,W),!1):(this[p]+=j.length,this[n].unshift(j),this[u].set(R,this[n].head),g(this),!0)}has(R){if(!this[u].has(R))return!1;const W=this[u].get(R).value;return!i(this,W)}get(R){return f(this,R,!0)}peek(R){return f(this,R,!1)}pop(){const R=this[n].tail;return R?(S(this,R),R.value):null}del(R){S(this,this[u].get(R))}load(R){this.reset();const W=Date.now();for(let l=R.length-1;l>=0;l--){const _=R[l],b=_.e||0;if(b===0)this.set(_.k,_.v);else{const j=b-W;j>0&&this.set(_.k,_.v,j)}}}prune(){this[u].forEach((R,W)=>f(this,W,!1))}}const f=(B,R,W)=>{const l=B[u].get(R);if(l){const _=l.value;if(i(B,_)){if(S(B,l),!B[s])return}else W&&(B[o]&&(l.value.now=Date.now()),B[n].unshiftNode(l));return _.value}},i=(B,R)=>{if(!R||!R.maxAge&&!B[t])return!1;const W=Date.now()-R.now;return R.maxAge?W>R.maxAge:B[t]&&W>B[t]},g=B=>{if(B[p]>B[d])for(let R=B[n].tail;B[p]>B[d]&&R!==null;){const W=R.prev;S(B,R),R=W}},S=(B,R)=>{if(R){const W=R.value;B[r]&&B[r](W.key,W.value),B[p]-=W.length,B[u].delete(W.key),B[n].removeNode(R)}};class A{constructor(R,W,l,_,b){this.key=R,this.value=W,this.length=l,this.now=_,this.maxAge=b||0}}const P=(B,R,W,l)=>{let _=W.value;i(B,_)&&(S(B,W),B[s]||(_=void 0)),_&&R.call(l,_.value,_.key,B)};U.exports=y},{yallist:83}],38:[function(E,U,L){(function(w){(function(){const d=U.exports;d.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},d.codes={};for(const h in d.types){const s=d.types[h];d.codes[s]=h}d.CMD_SHIFT=4,d.CMD_MASK=240,d.DUP_MASK=8,d.QOS_MASK=3,d.QOS_SHIFT=1,d.RETAIN_MASK=1,d.VARBYTEINT_MASK=127,d.VARBYTEINT_FIN_MASK=128,d.VARBYTEINT_MAX=268435455,d.SESSIONPRESENT_MASK=1,d.SESSIONPRESENT_HEADER=w.from([d.SESSIONPRESENT_MASK]),d.CONNACK_HEADER=w.from([d.codes.connack<<d.CMD_SHIFT]),d.USERNAME_MASK=128,d.PASSWORD_MASK=64,d.WILL_RETAIN_MASK=32,d.WILL_QOS_MASK=24,d.WILL_QOS_SHIFT=3,d.WILL_FLAG_MASK=4,d.CLEAN_SESSION_MASK=2,d.CONNECT_HEADER=w.from([d.codes.connect<<d.CMD_SHIFT]),d.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},d.propertiesCodes={};for(const h in d.properties){const s=d.properties[h];d.propertiesCodes[s]=h}d.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function p(h){return[0,1,2].map(s=>[0,1].map(t=>[0,1].map(r=>{const e=w.alloc(1);return e.writeUInt8(d.codes[h]<<d.CMD_SHIFT|(t?d.DUP_MASK:0)|s<<d.QOS_SHIFT|r,0,!0),e})))}d.PUBLISH_HEADER=p("publish"),d.SUBSCRIBE_HEADER=p("subscribe"),d.SUBSCRIBE_OPTIONS_QOS_MASK=3,d.SUBSCRIBE_OPTIONS_NL_MASK=1,d.SUBSCRIBE_OPTIONS_NL_SHIFT=2,d.SUBSCRIBE_OPTIONS_RAP_MASK=1,d.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,d.SUBSCRIBE_OPTIONS_RH_MASK=3,d.SUBSCRIBE_OPTIONS_RH_SHIFT=4,d.SUBSCRIBE_OPTIONS_RH=[0,16,32],d.SUBSCRIBE_OPTIONS_NL=4,d.SUBSCRIBE_OPTIONS_RAP=8,d.SUBSCRIBE_OPTIONS_QOS=[0,1,2],d.UNSUBSCRIBE_HEADER=p("unsubscribe"),d.ACKS={unsuback:p("unsuback"),puback:p("puback"),pubcomp:p("pubcomp"),pubrel:p("pubrel"),pubrec:p("pubrec")},d.SUBACK_HEADER=w.from([d.codes.suback<<d.CMD_SHIFT]),d.VERSION3=w.from([3]),d.VERSION4=w.from([4]),d.VERSION5=w.from([5]),d.VERSION131=w.from([131]),d.VERSION132=w.from([132]),d.QOS=[0,1,2].map(h=>w.from([h])),d.EMPTY={pingreq:w.from([d.codes.pingreq<<4,0]),pingresp:w.from([d.codes.pingresp<<4,0]),disconnect:w.from([d.codes.disconnect<<4,0])}}).call(this)}).call(this,E("buffer").Buffer)},{buffer:17}],39:[function(E,U,L){(function(w){(function(){const d=E("./writeToStream"),p=E("events");function h(t,r){const e=new s;return d(t,e,r),e.concat()}class s extends p{constructor(){super(),this._array=new Array(20),this._i=0}write(r){return this._array[this._i++]=r,!0}concat(){let r=0;const e=new Array(this._array.length),n=this._array;let u=0,o;for(o=0;o<n.length&&n[o]!==void 0;o++)typeof n[o]!="string"?e[o]=n[o].length:e[o]=w.byteLength(n[o]),r+=e[o];const v=w.allocUnsafe(r);for(o=0;o<n.length&&n[o]!==void 0;o++)typeof n[o]!="string"?(n[o].copy(v,u),u+=e[o]):(v.write(n[o],u),u+=e[o]);return v}}U.exports=h}).call(this)}).call(this,E("buffer").Buffer)},{"./writeToStream":44,buffer:17,events:22}],40:[function(E,U,L){L.parser=E("./parser").parser,L.generate=E("./generate"),L.writeToStream=E("./writeToStream")},{"./generate":39,"./parser":43,"./writeToStream":44}],41:[function(E,U,L){(function(w){(function(){const p={},h=w.isBuffer(w.from([1,2]).subarray(0,1));function s(n){const u=w.allocUnsafe(2);return u.writeUInt8(n>>8,0),u.writeUInt8(n&255,1),u}function t(){for(let n=0;n<65536;n++)p[n]=s(n)}function r(n){let o=0,v=0;const y=w.allocUnsafe(4);do o=n%128|0,n=n/128|0,n>0&&(o=o|128),y.writeUInt8(o,v++);while(n>0&&v<4);return n>0&&(v=0),h?y.subarray(0,v):y.slice(0,v)}function e(n){const u=w.allocUnsafe(4);return u.writeUInt32BE(n,0),u}U.exports={cache:p,generateCache:t,generateNumber:s,genBufVariableByteInt:r,generate4ByteBuffer:e}}).call(this)}).call(this,E("buffer").Buffer)},{buffer:17}],42:[function(E,U,L){class w{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}U.exports=w},{}],43:[function(E,U,L){const w=E("bl"),d=E("events"),p=E("./packet"),h=E("./constants"),s=E("debug")("mqtt-packet:parser");class t extends d{constructor(){super(),this.parser=this.constructor.parser}static parser(e){return this instanceof t?(this.settings=e||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new t().parser(e)}_resetState(){s("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new p,this.error=null,this._list=w(),this._stateCounter=0}parse(e){for(this.error&&this._resetState(),this._list.append(e),s("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,s("parse: state complete. _stateCounter is now: %d",this._stateCounter),s("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return s("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){const e=this._list.readUInt8(0);return this.packet.cmd=h.types[e>>h.CMD_SHIFT],this.packet.retain=(e&h.RETAIN_MASK)!==0,this.packet.qos=e>>h.QOS_SHIFT&h.QOS_MASK,this.packet.dup=(e&h.DUP_MASK)!==0,s("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0}_parseLength(){const e=this._parseVarByteNum(!0);return e&&(this.packet.length=e.value,this._list.consume(e.bytes)),s("_parseLength %d",e.value),!!e}_parsePayload(){s("_parsePayload: payload %O",this._list);let e=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}e=!0}return s("_parsePayload complete result: %s",e),e}_parseConnect(){s("_parseConnect");let e,n,u,o;const v={},y=this.packet,f=this._parseString();if(f===null)return this._emitError(new Error("Cannot parse protocolId"));if(f!=="MQTT"&&f!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(y.protocolId=f,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(y.protocolVersion=this._list.readUInt8(this._pos),y.protocolVersion>=128&&(y.bridgeMode=!0,y.protocolVersion=y.protocolVersion-128),y.protocolVersion!==3&&y.protocolVersion!==4&&y.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(v.username=this._list.readUInt8(this._pos)&h.USERNAME_MASK,v.password=this._list.readUInt8(this._pos)&h.PASSWORD_MASK,v.will=this._list.readUInt8(this._pos)&h.WILL_FLAG_MASK,v.will&&(y.will={},y.will.retain=(this._list.readUInt8(this._pos)&h.WILL_RETAIN_MASK)!==0,y.will.qos=(this._list.readUInt8(this._pos)&h.WILL_QOS_MASK)>>h.WILL_QOS_SHIFT),y.clean=(this._list.readUInt8(this._pos)&h.CLEAN_SESSION_MASK)!==0,this._pos++,y.keepalive=this._parseNum(),y.keepalive===-1)return this._emitError(new Error("Packet too short"));if(y.protocolVersion===5){const g=this._parseProperties();Object.getOwnPropertyNames(g).length&&(y.properties=g)}const i=this._parseString();if(i===null)return this._emitError(new Error("Packet too short"));if(y.clientId=i,s("_parseConnect: packet.clientId: %s",y.clientId),v.will){if(y.protocolVersion===5){const g=this._parseProperties();Object.getOwnPropertyNames(g).length&&(y.will.properties=g)}if(e=this._parseString(),e===null)return this._emitError(new Error("Cannot parse will topic"));if(y.will.topic=e,s("_parseConnect: packet.will.topic: %s",y.will.topic),n=this._parseBuffer(),n===null)return this._emitError(new Error("Cannot parse will payload"));y.will.payload=n,s("_parseConnect: packet.will.paylaod: %s",y.will.payload)}if(v.username){if(o=this._parseString(),o===null)return this._emitError(new Error("Cannot parse username"));y.username=o,s("_parseConnect: packet.username: %s",y.username)}if(v.password){if(u=this._parseBuffer(),u===null)return this._emitError(new Error("Cannot parse password"));y.password=u}return this.settings=y,s("_parseConnect: complete"),y}_parseConnack(){s("_parseConnack");const e=this.packet;if(this._list.length<1)return null;if(e.sessionPresent=!!(this._list.readUInt8(this._pos++)&h.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?e.reasonCode=this._list.readUInt8(this._pos++):e.reasonCode=0;else{if(this._list.length<2)return null;e.returnCode=this._list.readUInt8(this._pos++)}if(e.returnCode===-1||e.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){const n=this._parseProperties();Object.getOwnPropertyNames(n).length&&(e.properties=n)}s("_parseConnack: complete")}_parsePublish(){s("_parsePublish");const e=this.packet;if(e.topic=this._parseString(),e.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(e.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){const n=this._parseProperties();Object.getOwnPropertyNames(n).length&&(e.properties=n)}e.payload=this._list.slice(this._pos,e.length),s("_parsePublish: payload from buffer list: %o",e.payload)}}_parseSubscribe(){s("_parseSubscribe");const e=this.packet;let n,u,o,v,y,f,i;if(e.qos!==1)return this._emitError(new Error("Wrong subscribe header"));if(e.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){const g=this._parseProperties();Object.getOwnPropertyNames(g).length&&(e.properties=g)}for(;this._pos<e.length;){if(n=this._parseString(),n===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=e.length)return this._emitError(new Error("Malformed Subscribe Payload"));u=this._parseByte(),o=u&h.SUBSCRIBE_OPTIONS_QOS_MASK,f=(u>>h.SUBSCRIBE_OPTIONS_NL_SHIFT&h.SUBSCRIBE_OPTIONS_NL_MASK)!==0,y=(u>>h.SUBSCRIBE_OPTIONS_RAP_SHIFT&h.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,v=u>>h.SUBSCRIBE_OPTIONS_RH_SHIFT&h.SUBSCRIBE_OPTIONS_RH_MASK,i={topic:n,qos:o},this.settings.protocolVersion===5?(i.nl=f,i.rap=y,i.rh=v):this.settings.bridgeMode&&(i.rh=0,i.rap=!0,i.nl=!0),s("_parseSubscribe: push subscription `%s` to subscription",i),e.subscriptions.push(i)}}}_parseSuback(){s("_parseSuback");const e=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){const n=this._parseProperties();Object.getOwnPropertyNames(n).length&&(e.properties=n)}for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseUnsubscribe(){s("_parseUnsubscribe");const e=this.packet;if(e.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){const n=this._parseProperties();Object.getOwnPropertyNames(n).length&&(e.properties=n)}for(;this._pos<e.length;){const n=this._parseString();if(n===null)return this._emitError(new Error("Cannot parse topic"));s("_parseUnsubscribe: push topic `%s` to unsubscriptions",n),e.unsubscriptions.push(n)}}}_parseUnsuback(){s("_parseUnsuback");const e=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if(this.settings.protocolVersion===5){const n=this._parseProperties();for(Object.getOwnPropertyNames(n).length&&(e.properties=n),e.granted=[];this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseConfirmation(){s("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);const e=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5&&(e.length>2?(e.reasonCode=this._parseByte(),s("_parseConfirmation: packet.reasonCode `%d`",e.reasonCode)):e.reasonCode=0,e.length>3)){const n=this._parseProperties();Object.getOwnPropertyNames(n).length&&(e.properties=n)}return!0}_parseDisconnect(){const e=this.packet;if(s("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?e.reasonCode=this._parseByte():e.reasonCode=0;const n=this._parseProperties();Object.getOwnPropertyNames(n).length&&(e.properties=n)}return s("_parseDisconnect result: true"),!0}_parseAuth(){s("_parseAuth");const e=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));e.reasonCode=this._parseByte();const n=this._parseProperties();return Object.getOwnPropertyNames(n).length&&(e.properties=n),s("_parseAuth: result: true"),!0}_parseMessageId(){const e=this.packet;return e.messageId=this._parseNum(),e.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(s("_parseMessageId: packet.messageId %d",e.messageId),!0)}_parseString(e){const n=this._parseNum(),u=n+this._pos;if(n===-1||u>this._list.length||u>this.packet.length)return null;const o=this._list.toString("utf8",this._pos,u);return this._pos+=n,s("_parseString: result: %s",o),o}_parseStringPair(){return s("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){const e=this._parseNum(),n=e+this._pos;if(e===-1||n>this._list.length||n>this.packet.length)return null;const u=this._list.slice(this._pos,n);return this._pos+=e,s("_parseBuffer: result: %o",u),u}_parseNum(){if(this._list.length-this._pos<2)return-1;const e=this._list.readUInt16BE(this._pos);return this._pos+=2,s("_parseNum: result: %s",e),e}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;const e=this._list.readUInt32BE(this._pos);return this._pos+=4,s("_parse4ByteNum: result: %s",e),e}_parseVarByteNum(e){s("_parseVarByteNum");const n=4;let u=0,o=1,v=0,y=!1,f;const i=this._pos?this._pos:0;for(;u<n&&i+u<this._list.length;){if(f=this._list.readUInt8(i+u++),v+=o*(f&h.VARBYTEINT_MASK),o*=128,(f&h.VARBYTEINT_FIN_MASK)===0){y=!0;break}if(this._list.length<=u)break}return!y&&u===n&&this._list.length>=u&&this._emitError(new Error("Invalid variable byte integer")),i&&(this._pos+=u),y=y?e?{bytes:u,value:v}:v:!1,s("_parseVarByteNum: result: %o",y),y}_parseByte(){let e;return this._pos<this._list.length&&(e=this._list.readUInt8(this._pos),this._pos++),s("_parseByte: result: %o",e),e}_parseByType(e){switch(s("_parseByType: type: %s",e),e){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){s("_parseProperties");const e=this._parseVarByteNum(),u=this._pos+e,o={};for(;this._pos<u;){const v=this._parseByte();if(!v)return this._emitError(new Error("Cannot parse property code type")),!1;const y=h.propertiesCodes[v];if(!y)return this._emitError(new Error("Unknown property")),!1;if(y==="userProperties"){o[y]||(o[y]=Object.create(null));const f=this._parseByType(h.propertiesTypes[y]);if(o[y][f.name])if(Array.isArray(o[y][f.name]))o[y][f.name].push(f.value);else{const i=o[y][f.name];o[y][f.name]=[i],o[y][f.name].push(f.value)}else o[y][f.name]=f.value;continue}o[y]?Array.isArray(o[y])?o[y].push(this._parseByType(h.propertiesTypes[y])):(o[y]=[o[y]],o[y].push(this._parseByType(h.propertiesTypes[y]))):o[y]=this._parseByType(h.propertiesTypes[y])}return o}_newPacket(){return s("_newPacket"),this.packet&&(this._list.consume(this.packet.length),s("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),s("_newPacket: new packet"),this.packet=new p,this._pos=0,!0}_emitError(e){s("_emitError"),this.error=e,this.emit("error",e)}}U.exports=t},{"./constants":38,"./packet":42,bl:15,debug:18,events:22}],44:[function(E,U,L){(function(w){(function(){const d=E("./constants"),p=w.allocUnsafe(0),h=w.from([0]),s=E("./numbers"),t=E("process-nextick-args").nextTick,r=E("debug")("mqtt-packet:writeToStream"),e=s.cache,n=s.generateNumber,u=s.generateCache,o=s.genBufVariableByteInt,v=s.generate4ByteBuffer;let y=D,f=!0;function i(q,N,J){switch(r("generate called"),N.cork&&(N.cork(),t(g,N)),f&&(f=!1,u()),r("generate: packet.cmd: %s",q.cmd),q.cmd){case"connect":return S(q,N);case"connack":return A(q,N,J);case"publish":return P(q,N,J);case"puback":case"pubrec":case"pubrel":case"pubcomp":return B(q,N,J);case"subscribe":return R(q,N,J);case"suback":return W(q,N,J);case"unsubscribe":return l(q,N,J);case"unsuback":return _(q,N,J);case"pingreq":case"pingresp":return b(q,N);case"disconnect":return j(q,N,J);case"auth":return V(q,N,J);default:return N.emit("error",new Error("Unknown command")),!1}}Object.defineProperty(i,"cacheNumbers",{get(){return y===D},set(q){q?((!e||Object.keys(e).length===0)&&(f=!0),y=D):(f=!1,y=G)}});function g(q){q.uncork()}function S(q,N,J){const O=q||{},M=O.protocolId||"MQTT";let z=O.protocolVersion||4;const $=O.will;let Z=O.clean;const T=O.keepalive||0,x=O.clientId||"",m=O.username,a=O.password,c=O.properties;Z===void 0&&(Z=!0);let k=0;if(typeof M!="string"&&!w.isBuffer(M))return N.emit("error",new Error("Invalid protocolId")),!1;if(k+=M.length+2,z!==3&&z!==4&&z!==5)return N.emit("error",new Error("Invalid protocol version")),!1;if(k+=1,(typeof x=="string"||w.isBuffer(x))&&(x||z>=4)&&(x||Z))k+=w.byteLength(x)+2;else{if(z<4)return N.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(Z*1===0)return N.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof T!="number"||T<0||T>65535||T%1!==0)return N.emit("error",new Error("Invalid keepalive")),!1;if(k+=2,k+=1,z===5){var F=K(N,c);if(!F)return!1;k+=F.length}if($){if(typeof $!="object")return N.emit("error",new Error("Invalid will")),!1;if(!$.topic||typeof $.topic!="string")return N.emit("error",new Error("Invalid will topic")),!1;if(k+=w.byteLength($.topic)+2,k+=2,$.payload)if($.payload.length>=0)typeof $.payload=="string"?k+=w.byteLength($.payload):k+=$.payload.length;else return N.emit("error",new Error("Invalid will payload")),!1;var ee={};if(z===5){if(ee=K(N,$.properties),!ee)return!1;k+=ee.length}}let re=!1;if(m!=null)if(oe(m))re=!0,k+=w.byteLength(m)+2;else return N.emit("error",new Error("Invalid username")),!1;if(a!=null){if(!re)return N.emit("error",new Error("Username is required to use password")),!1;if(oe(a))k+=le(a)+2;else return N.emit("error",new Error("Invalid password")),!1}N.write(d.CONNECT_HEADER),Y(N,k),ie(N,M),O.bridgeMode&&(z+=128),N.write(z===131?d.VERSION131:z===132?d.VERSION132:z===4?d.VERSION4:z===5?d.VERSION5:d.VERSION3);let fe=0;return fe|=m!=null?d.USERNAME_MASK:0,fe|=a!=null?d.PASSWORD_MASK:0,fe|=$&&$.retain?d.WILL_RETAIN_MASK:0,fe|=$&&$.qos?$.qos<<d.WILL_QOS_SHIFT:0,fe|=$?d.WILL_FLAG_MASK:0,fe|=Z?d.CLEAN_SESSION_MASK:0,N.write(w.from([fe])),y(N,T),z===5&&F.write(),ie(N,x),$&&(z===5&&ee.write(),C(N,$.topic),ie(N,$.payload)),m!=null&&ie(N,m),a!=null&&ie(N,a),!0}function A(q,N,J){const O=J?J.protocolVersion:4,M=q||{},z=O===5?M.reasonCode:M.returnCode,$=M.properties;let Z=2;if(typeof z!="number")return N.emit("error",new Error("Invalid return code")),!1;let T=null;if(O===5){if(T=K(N,$),!T)return!1;Z+=T.length}return N.write(d.CONNACK_HEADER),Y(N,Z),N.write(M.sessionPresent?d.SESSIONPRESENT_HEADER:h),N.write(w.from([z])),T!=null&&T.write(),!0}function P(q,N,J){r("publish: packet: %o",q);const O=J?J.protocolVersion:4,M=q||{},z=M.qos||0,$=M.retain?d.RETAIN_MASK:0,Z=M.topic,T=M.payload||p,x=M.messageId,m=M.properties;let a=0;if(typeof Z=="string")a+=w.byteLength(Z)+2;else if(w.isBuffer(Z))a+=Z.length+2;else return N.emit("error",new Error("Invalid topic")),!1;if(w.isBuffer(T)?a+=T.length:a+=w.byteLength(T),z&&typeof x!="number")return N.emit("error",new Error("Invalid messageId")),!1;z&&(a+=2);let c=null;if(O===5){if(c=K(N,m),!c)return!1;a+=c.length}return N.write(d.PUBLISH_HEADER[z][M.dup?1:0][$?1:0]),Y(N,a),y(N,le(Z)),N.write(Z),z>0&&y(N,x),c!=null&&c.write(),r("publish: payload: %o",T),N.write(T)}function B(q,N,J){const O=J?J.protocolVersion:4,M=q||{},z=M.cmd||"puback",$=M.messageId,Z=M.dup&&z==="pubrel"?d.DUP_MASK:0;let T=0;const x=M.reasonCode,m=M.properties;let a=O===5?3:2;if(z==="pubrel"&&(T=1),typeof $!="number")return N.emit("error",new Error("Invalid messageId")),!1;let c=null;if(O===5&&typeof m=="object"){if(c=Q(N,m,J,a),!c)return!1;a+=c.length}return N.write(d.ACKS[z][T][Z][0]),Y(N,a),y(N,$),O===5&&N.write(w.from([x])),c!==null&&c.write(),!0}function R(q,N,J){r("subscribe: packet: ");const O=J?J.protocolVersion:4,M=q||{},z=M.dup?d.DUP_MASK:0,$=M.messageId,Z=M.subscriptions,T=M.properties;let x=0;if(typeof $!="number")return N.emit("error",new Error("Invalid messageId")),!1;x+=2;let m=null;if(O===5){if(m=K(N,T),!m)return!1;x+=m.length}if(typeof Z=="object"&&Z.length)for(let c=0;c<Z.length;c+=1){const k=Z[c].topic,F=Z[c].qos;if(typeof k!="string")return N.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if(typeof F!="number")return N.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;if(O===5){if(typeof(Z[c].nl||!1)!="boolean")return N.emit("error",new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(Z[c].rap||!1)!="boolean")return N.emit("error",new Error("Invalid subscriptions - invalid Retain as Published")),!1;const fe=Z[c].rh||0;if(typeof fe!="number"||fe>2)return N.emit("error",new Error("Invalid subscriptions - invalid Retain Handling")),!1}x+=w.byteLength(k)+2+1}else return N.emit("error",new Error("Invalid subscriptions")),!1;r("subscribe: writing to stream: %o",d.SUBSCRIBE_HEADER),N.write(d.SUBSCRIBE_HEADER[1][z?1:0][0]),Y(N,x),y(N,$),m!==null&&m.write();let a=!0;for(const c of Z){const k=c.topic,F=c.qos,ee=+c.nl,re=+c.rap,fe=c.rh;let ue;C(N,k),ue=d.SUBSCRIBE_OPTIONS_QOS[F],O===5&&(ue|=ee?d.SUBSCRIBE_OPTIONS_NL:0,ue|=re?d.SUBSCRIBE_OPTIONS_RAP:0,ue|=fe?d.SUBSCRIBE_OPTIONS_RH[fe]:0),a=N.write(w.from([ue]))}return a}function W(q,N,J){const O=J?J.protocolVersion:4,M=q||{},z=M.messageId,$=M.granted,Z=M.properties;let T=0;if(typeof z!="number")return N.emit("error",new Error("Invalid messageId")),!1;if(T+=2,typeof $=="object"&&$.length)for(let m=0;m<$.length;m+=1){if(typeof $[m]!="number")return N.emit("error",new Error("Invalid qos vector")),!1;T+=1}else return N.emit("error",new Error("Invalid qos vector")),!1;let x=null;if(O===5){if(x=Q(N,Z,J,T),!x)return!1;T+=x.length}return N.write(d.SUBACK_HEADER),Y(N,T),y(N,z),x!==null&&x.write(),N.write(w.from($))}function l(q,N,J){const O=J?J.protocolVersion:4,M=q||{},z=M.messageId,$=M.dup?d.DUP_MASK:0,Z=M.unsubscriptions,T=M.properties;let x=0;if(typeof z!="number")return N.emit("error",new Error("Invalid messageId")),!1;if(x+=2,typeof Z=="object"&&Z.length)for(let c=0;c<Z.length;c+=1){if(typeof Z[c]!="string")return N.emit("error",new Error("Invalid unsubscriptions")),!1;x+=w.byteLength(Z[c])+2}else return N.emit("error",new Error("Invalid unsubscriptions")),!1;let m=null;if(O===5){if(m=K(N,T),!m)return!1;x+=m.length}N.write(d.UNSUBSCRIBE_HEADER[1][$?1:0][0]),Y(N,x),y(N,z),m!==null&&m.write();let a=!0;for(let c=0;c<Z.length;c++)a=C(N,Z[c]);return a}function _(q,N,J){const O=J?J.protocolVersion:4,M=q||{},z=M.messageId,$=M.dup?d.DUP_MASK:0,Z=M.granted,T=M.properties,x=M.cmd,m=0;let a=2;if(typeof z!="number")return N.emit("error",new Error("Invalid messageId")),!1;if(O===5)if(typeof Z=="object"&&Z.length)for(let k=0;k<Z.length;k+=1){if(typeof Z[k]!="number")return N.emit("error",new Error("Invalid qos vector")),!1;a+=1}else return N.emit("error",new Error("Invalid qos vector")),!1;let c=null;if(O===5){if(c=Q(N,T,J,a),!c)return!1;a+=c.length}return N.write(d.ACKS[x][m][$][0]),Y(N,a),y(N,z),c!==null&&c.write(),O===5&&N.write(w.from(Z)),!0}function b(q,N,J){return N.write(d.EMPTY[q.cmd])}function j(q,N,J){const O=J?J.protocolVersion:4,M=q||{},z=M.reasonCode,$=M.properties;let Z=O===5?1:0,T=null;if(O===5){if(T=Q(N,$,J,Z),!T)return!1;Z+=T.length}return N.write(w.from([d.codes.disconnect<<4])),Y(N,Z),O===5&&N.write(w.from([z])),T!==null&&T.write(),!0}function V(q,N,J){const O=J?J.protocolVersion:4,M=q||{},z=M.reasonCode,$=M.properties;let Z=O===5?1:0;O!==5&&N.emit("error",new Error("Invalid mqtt version for auth packet"));const T=Q(N,$,J,Z);return T?(Z+=T.length,N.write(w.from([d.codes.auth<<4])),Y(N,Z),N.write(w.from([z])),T!==null&&T.write(),!0):!1}const H={};function Y(q,N){if(N>d.VARBYTEINT_MAX)return q.emit("error",new Error(`Invalid variable byte integer: ${N}`)),!1;let J=H[N];return J||(J=o(N),N<16384&&(H[N]=J)),r("writeVarByteInt: writing to stream: %o",J),q.write(J)}function C(q,N){const J=w.byteLength(N);return y(q,J),r("writeString: %s",N),q.write(N,"utf8")}function I(q,N,J){C(q,N),C(q,J)}function D(q,N){return r("writeNumberCached: number: %d",N),r("writeNumberCached: %o",e[N]),q.write(e[N])}function G(q,N){const J=n(N);return r("writeNumberGenerated: %o",J),q.write(J)}function se(q,N){const J=v(N);return r("write4ByteNumber: %o",J),q.write(J)}function ie(q,N){typeof N=="string"?C(q,N):N?(y(q,N.length),q.write(N)):y(q,0)}function K(q,N){if(typeof N!="object"||N.length!=null)return{length:1,write(){te(q,{},0)}};let J=0;function O(z,$){const Z=d.propertiesTypes[z];let T=0;switch(Z){case"byte":{if(typeof $!="boolean")return q.emit("error",new Error(`Invalid ${z}: ${$}`)),!1;T+=2;break}case"int8":{if(typeof $!="number"||$<0||$>255)return q.emit("error",new Error(`Invalid ${z}: ${$}`)),!1;T+=2;break}case"binary":{if($&&$===null)return q.emit("error",new Error(`Invalid ${z}: ${$}`)),!1;T+=1+w.byteLength($)+2;break}case"int16":{if(typeof $!="number"||$<0||$>65535)return q.emit("error",new Error(`Invalid ${z}: ${$}`)),!1;T+=3;break}case"int32":{if(typeof $!="number"||$<0||$>4294967295)return q.emit("error",new Error(`Invalid ${z}: ${$}`)),!1;T+=5;break}case"var":{if(typeof $!="number"||$<0||$>268435455)return q.emit("error",new Error(`Invalid ${z}: ${$}`)),!1;T+=1+w.byteLength(o($));break}case"string":{if(typeof $!="string")return q.emit("error",new Error(`Invalid ${z}: ${$}`)),!1;T+=3+w.byteLength($.toString());break}case"pair":{if(typeof $!="object")return q.emit("error",new Error(`Invalid ${z}: ${$}`)),!1;T+=Object.getOwnPropertyNames($).reduce((x,m)=>{const a=$[m];return Array.isArray(a)?x+=a.reduce((c,k)=>(c+=3+w.byteLength(m.toString())+2+w.byteLength(k.toString()),c),0):x+=3+w.byteLength(m.toString())+2+w.byteLength($[m].toString()),x},0);break}default:return q.emit("error",new Error(`Invalid property ${z}: ${$}`)),!1}return T}if(N)for(const z in N){let $=0,Z=0;const T=N[z];if(Array.isArray(T))for(let x=0;x<T.length;x++){if(Z=O(z,T[x]),!Z)return!1;$+=Z}else{if(Z=O(z,T),!Z)return!1;$=Z}if(!$)return!1;J+=$}return{length:w.byteLength(o(J))+J,write(){te(q,N,J)}}}function Q(q,N,J,O){const M=["reasonString","userProperties"],z=J&&J.properties&&J.properties.maximumPacketSize?J.properties.maximumPacketSize:0;let $=K(q,N);if(z)for(;O+$.length>z;){const Z=M.shift();if(Z&&N[Z])delete N[Z],$=K(q,N);else return!1}return $}function ne(q,N,J){switch(d.propertiesTypes[N]){case"byte":{q.write(w.from([d.properties[N]])),q.write(w.from([+J]));break}case"int8":{q.write(w.from([d.properties[N]])),q.write(w.from([J]));break}case"binary":{q.write(w.from([d.properties[N]])),ie(q,J);break}case"int16":{q.write(w.from([d.properties[N]])),y(q,J);break}case"int32":{q.write(w.from([d.properties[N]])),se(q,J);break}case"var":{q.write(w.from([d.properties[N]])),Y(q,J);break}case"string":{q.write(w.from([d.properties[N]])),C(q,J);break}case"pair":{Object.getOwnPropertyNames(J).forEach(M=>{const z=J[M];Array.isArray(z)?z.forEach($=>{q.write(w.from([d.properties[N]])),I(q,M.toString(),$.toString())}):(q.write(w.from([d.properties[N]])),I(q,M.toString(),z.toString()))});break}default:return q.emit("error",new Error(`Invalid property ${N} value: ${J}`)),!1}}function te(q,N,J){Y(q,J);for(const O in N)if(Object.prototype.hasOwnProperty.call(N,O)&&N[O]!==null){const M=N[O];if(Array.isArray(M))for(let z=0;z<M.length;z++)ne(q,O,M[z]);else ne(q,O,M)}}function le(q){return q?q instanceof w?q.length:w.byteLength(q):0}function oe(q){return typeof q=="string"||q instanceof w}U.exports=i}).call(this)}).call(this,E("buffer").Buffer)},{"./constants":38,"./numbers":41,buffer:17,debug:18,"process-nextick-args":49}],45:[function(E,U,L){var w=1e3,d=w*60,p=d*60,h=p*24,s=h*7,t=h*365.25;U.exports=function(o,v){v=v||{};var y=typeof o;if(y==="string"&&o.length>0)return r(o);if(y==="number"&&isFinite(o))return v.long?n(o):e(o);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(o))};function r(o){if(o=String(o),!(o.length>100)){var v=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(o);if(v){var y=parseFloat(v[1]),f=(v[2]||"ms").toLowerCase();switch(f){case"years":case"year":case"yrs":case"yr":case"y":return y*t;case"weeks":case"week":case"w":return y*s;case"days":case"day":case"d":return y*h;case"hours":case"hour":case"hrs":case"hr":case"h":return y*p;case"minutes":case"minute":case"mins":case"min":case"m":return y*d;case"seconds":case"second":case"secs":case"sec":case"s":return y*w;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return y;default:return}}}}function e(o){var v=Math.abs(o);return v>=h?Math.round(o/h)+"d":v>=p?Math.round(o/p)+"h":v>=d?Math.round(o/d)+"m":v>=w?Math.round(o/w)+"s":o+"ms"}function n(o){var v=Math.abs(o);return v>=h?u(o,v,h,"day"):v>=p?u(o,v,p,"hour"):v>=d?u(o,v,d,"minute"):v>=w?u(o,v,w,"second"):o+" ms"}function u(o,v,y,f){var i=v>=y*1.5;return Math.round(o/y)+" "+f+(i?"s":"")}},{}],46:[function(E,U,L){const w=E("./lib/number-allocator.js");U.exports.NumberAllocator=w},{"./lib/number-allocator.js":47}],47:[function(E,U,L){const w=E("js-sdsl").Set,d=E("debug")("number-allocator:trace"),p=E("debug")("number-allocator:error");function h(t,r){this.low=t,this.high=r}h.prototype.equals=function(t){return this.low===t.low&&this.high===t.high},h.prototype.compare=function(t){return this.low<t.low&&this.high<t.low?-1:t.low<this.low&&t.high<this.low?1:0};function s(t,r){if(!(this instanceof s))return new s(t,r);this.min=t,this.max=r,this.ss=new w([],(e,n)=>e.compare(n)),d("Create"),this.clear()}s.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},s.prototype.alloc=function(){if(this.ss.size()===0)return d("alloc():empty"),null;const t=this.ss.front(),r=t.low;return r+1<=t.high?++t.low:this.ss.eraseElementByPos(0),d("alloc():"+r),r},s.prototype.use=function(t){const r=new h(t,t),e=this.ss.lowerBound(r);if(e){if(e.equals(r))return this.ss.eraseElementByValue(e),d("use():"+t),!0;if(e.low>t)return!1;if(e.low===t)return++e.low,d("use():"+t),!0;if(e.high===t)return--e.high,d("use():"+t),!0;const n=e.low;return e.low=t+1,this.ss.insert(new h(n,t-1)),d("use():"+t),!0}return d("use():failed"),!1},s.prototype.free=function(t){if(t<this.min||t>this.max){p("free():"+t+" is out of range");return}const r=new h(t,t),e=this.ss.lowerBound(r);if(e){if(e.low<=t&&t<=e.high){p("free():"+t+" has already been vacant");return}if(e===this.ss.front())t+1===e.low?--e.low:this.ss.insert(r);else{const n=this.ss.reverseLowerBound(r);n.high+1===t?t+1===e.low?(this.ss.eraseElementByValue(n),e.low=n.low):n.high=t:t+1===e.low?e.low=t:this.ss.insert(r)}}else{if(e===this.ss.front()){this.ss.insert(r);return}const n=this.ss.reverseLowerBound(r);n.high+1===t?n.high=t:this.ss.insert(r)}d("free():"+t)},s.prototype.clear=function(){d("clear()"),this.ss.clear(),this.ss.insert(new h(this.min,this.max))},s.prototype.intervalCount=function(){return this.ss.size()},s.prototype.dump=function(){console.log("length:"+this.ss.size());for(const t of this.ss)console.log(t)},U.exports=s},{debug:18,"js-sdsl":36}],48:[function(E,U,L){var w=E("wrappy");U.exports=w(d),U.exports.strict=w(p),d.proto=d(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return d(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return p(this)},configurable:!0})});function d(h){var s=function(){return s.called?s.value:(s.called=!0,s.value=h.apply(this,arguments))};return s.called=!1,s}function p(h){var s=function(){if(s.called)throw new Error(s.onceError);return s.called=!0,s.value=h.apply(this,arguments)},t=h.name||"Function wrapped with `once`";return s.onceError=t+" shouldn't be called more than once",s.called=!1,s}},{wrappy:79}],49:[function(E,U,L){(function(w){(function(){typeof w=="undefined"||!w.version||w.version.indexOf("v0.")===0||w.version.indexOf("v1.")===0&&w.version.indexOf("v1.8.")!==0?U.exports={nextTick:d}:U.exports=w;function d(p,h,s,t){if(typeof p!="function")throw new TypeError('"callback" argument must be a function');var r=arguments.length,e,n;switch(r){case 0:case 1:return w.nextTick(p);case 2:return w.nextTick(function(){p.call(null,h)});case 3:return w.nextTick(function(){p.call(null,h,s)});case 4:return w.nextTick(function(){p.call(null,h,s,t)});default:for(e=new Array(r-1),n=0;n<e.length;)e[n++]=arguments[n];return w.nextTick(function(){p.apply(null,e)})}}}).call(this)}).call(this,E("_process"))},{_process:50}],50:[function(E,U,L){var w=U.exports={},d,p;function h(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?d=setTimeout:d=h}catch{d=h}try{typeof clearTimeout=="function"?p=clearTimeout:p=s}catch{p=s}})();function t(g){if(d===setTimeout)return setTimeout(g,0);if((d===h||!d)&&setTimeout)return d=setTimeout,setTimeout(g,0);try{return d(g,0)}catch{try{return d.call(null,g,0)}catch{return d.call(this,g,0)}}}function r(g){if(p===clearTimeout)return clearTimeout(g);if((p===s||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(g);try{return p(g)}catch{try{return p.call(null,g)}catch{return p.call(this,g)}}}var e=[],n=!1,u,o=-1;function v(){!n||!u||(n=!1,u.length?e=u.concat(e):o=-1,e.length&&y())}function y(){if(!n){var g=t(v);n=!0;for(var S=e.length;S;){for(u=e,e=[];++o<S;)u&&u[o].run();o=-1,S=e.length}u=null,n=!1,r(g)}}w.nextTick=function(g){var S=new Array(arguments.length-1);if(arguments.length>1)for(var A=1;A<arguments.length;A++)S[A-1]=arguments[A];e.push(new f(g,S)),e.length===1&&!n&&t(y)};function f(g,S){this.fun=g,this.array=S}f.prototype.run=function(){this.fun.apply(null,this.array)},w.title="browser",w.browser=!0,w.env={},w.argv=[],w.version="",w.versions={};function i(){}w.on=i,w.addListener=i,w.once=i,w.off=i,w.removeListener=i,w.removeAllListeners=i,w.emit=i,w.prependListener=i,w.prependOnceListener=i,w.listeners=function(g){return[]},w.binding=function(g){throw new Error("process.binding is not supported")},w.cwd=function(){return"/"},w.chdir=function(g){throw new Error("process.chdir is not supported")},w.umask=function(){return 0}},{}],51:[function(E,U,L){(function(w){(function(){(function(d){var p=typeof L=="object"&&L&&!L.nodeType&&L,h=typeof U=="object"&&U&&!U.nodeType&&U,s=typeof w=="object"&&w;(s.global===s||s.window===s||s.self===s)&&(d=s);var t,r=2147483647,e=36,n=1,u=26,o=38,v=700,y=72,f=128,i="-",g=/^xn--/,S=/[^\x20-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,P={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},B=e-n,R=Math.floor,W=String.fromCharCode,l;function _(K){throw new RangeError(P[K])}function b(K,Q){for(var ne=K.length,te=[];ne--;)te[ne]=Q(K[ne]);return te}function j(K,Q){var ne=K.split("@"),te="";ne.length>1&&(te=ne[0]+"@",K=ne[1]),K=K.replace(A,".");var le=K.split("."),oe=b(le,Q).join(".");return te+oe}function V(K){for(var Q=[],ne=0,te=K.length,le,oe;ne<te;)le=K.charCodeAt(ne++),le>=55296&&le<=56319&&ne<te?(oe=K.charCodeAt(ne++),(oe&64512)==56320?Q.push(((le&1023)<<10)+(oe&1023)+65536):(Q.push(le),ne--)):Q.push(le);return Q}function H(K){return b(K,function(Q){var ne="";return Q>65535&&(Q-=65536,ne+=W(Q>>>10&1023|55296),Q=56320|Q&1023),ne+=W(Q),ne}).join("")}function Y(K){return K-48<10?K-22:K-65<26?K-65:K-97<26?K-97:e}function C(K,Q){return K+22+75*(K<26)-((Q!=0)<<5)}function I(K,Q,ne){var te=0;for(K=ne?R(K/v):K>>1,K+=R(K/Q);K>B*u>>1;te+=e)K=R(K/B);return R(te+(B+1)*K/(K+o))}function D(K){var Q=[],ne=K.length,te,le=0,oe=f,q=y,N,J,O,M,z,$,Z,T,x;for(N=K.lastIndexOf(i),N<0&&(N=0),J=0;J<N;++J)K.charCodeAt(J)>=128&&_("not-basic"),Q.push(K.charCodeAt(J));for(O=N>0?N+1:0;O<ne;){for(M=le,z=1,$=e;O>=ne&&_("invalid-input"),Z=Y(K.charCodeAt(O++)),(Z>=e||Z>R((r-le)/z))&&_("overflow"),le+=Z*z,T=$<=q?n:$>=q+u?u:$-q,!(Z<T);$+=e)x=e-T,z>R(r/x)&&_("overflow"),z*=x;te=Q.length+1,q=I(le-M,te,M==0),R(le/te)>r-oe&&_("overflow"),oe+=R(le/te),le%=te,Q.splice(le++,0,oe)}return H(Q)}function G(K){var Q,ne,te,le,oe,q,N,J,O,M,z,$=[],Z,T,x,m;for(K=V(K),Z=K.length,Q=f,ne=0,oe=y,q=0;q<Z;++q)z=K[q],z<128&&$.push(W(z));for(te=le=$.length,le&&$.push(i);te<Z;){for(N=r,q=0;q<Z;++q)z=K[q],z>=Q&&z<N&&(N=z);for(T=te+1,N-Q>R((r-ne)/T)&&_("overflow"),ne+=(N-Q)*T,Q=N,q=0;q<Z;++q)if(z=K[q],z<Q&&++ne>r&&_("overflow"),z==Q){for(J=ne,O=e;M=O<=oe?n:O>=oe+u?u:O-oe,!(J<M);O+=e)m=J-M,x=e-M,$.push(W(C(M+m%x,0))),J=R(m/x);$.push(W(C(J,0))),oe=I(ne,T,te==le),ne=0,++te}++ne,++Q}return $.join("")}function se(K){return j(K,function(Q){return g.test(Q)?D(Q.slice(4).toLowerCase()):Q})}function ie(K){return j(K,function(Q){return S.test(Q)?"xn--"+G(Q):Q})}if(t={version:"1.4.1",ucs2:{decode:V,encode:H},decode:D,encode:G,toASCII:ie,toUnicode:se},p&&h)if(U.exports==p)h.exports=t;else for(l in t)t.hasOwnProperty(l)&&(p[l]=t[l]);else d.punycode=t})(this)}).call(this)}).call(this,typeof ye!="undefined"?ye:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],52:[function(E,U,L){function w(p,h){return Object.prototype.hasOwnProperty.call(p,h)}U.exports=function(p,h,s,t){h=h||"&",s=s||"=";var r={};if(typeof p!="string"||p.length===0)return r;var e=/\+/g;p=p.split(h);var n=1e3;t&&typeof t.maxKeys=="number"&&(n=t.maxKeys);var u=p.length;n>0&&u>n&&(u=n);for(var o=0;o<u;++o){var v=p[o].replace(e,"%20"),y=v.indexOf(s),f,i,g,S;y>=0?(f=v.substr(0,y),i=v.substr(y+1)):(f=v,i=""),g=decodeURIComponent(f),S=decodeURIComponent(i),w(r,g)?d(r[g])?r[g].push(S):r[g]=[r[g],S]:r[g]=S}return r};var d=Array.isArray||function(p){return Object.prototype.toString.call(p)==="[object Array]"}},{}],53:[function(E,U,L){var w=function(s){switch(typeof s){case"string":return s;case"boolean":return s?"true":"false";case"number":return isFinite(s)?s:"";default:return""}};U.exports=function(s,t,r,e){return t=t||"&",r=r||"=",s===null&&(s=void 0),typeof s=="object"?p(h(s),function(n){var u=encodeURIComponent(w(n))+r;return d(s[n])?p(s[n],function(o){return u+encodeURIComponent(w(o))}).join(t):u+encodeURIComponent(w(s[n]))}).join(t):e?encodeURIComponent(w(e))+r+encodeURIComponent(w(s)):""};var d=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function p(s,t){if(s.map)return s.map(t);for(var r=[],e=0;e<s.length;e++)r.push(t(s[e],e));return r}var h=Object.keys||function(s){var t=[];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&t.push(r);return t}},{}],54:[function(E,U,L){L.decode=L.parse=E("./decode"),L.encode=L.stringify=E("./encode")},{"./decode":52,"./encode":53}],55:[function(E,U,L){function w(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n}var d={};function p(e,n,u){u||(u=Error);function o(y,f,i){return typeof n=="string"?n:n(y,f,i)}var v=(function(y){w(f,y);function f(i,g,S){return y.call(this,o(i,g,S))||this}return f})(u);v.prototype.name=u.name,v.prototype.code=e,d[e]=v}function h(e,n){if(Array.isArray(e)){var u=e.length;return e=e.map(function(o){return String(o)}),u>2?"one of ".concat(n," ").concat(e.slice(0,u-1).join(", "),", or ")+e[u-1]:u===2?"one of ".concat(n," ").concat(e[0]," or ").concat(e[1]):"of ".concat(n," ").concat(e[0])}else return"of ".concat(n," ").concat(String(e))}function s(e,n,u){return e.substr(0,n.length)===n}function t(e,n,u){return(u===void 0||u>e.length)&&(u=e.length),e.substring(u-n.length,u)===n}function r(e,n,u){return typeof u!="number"&&(u=0),u+n.length>e.length?!1:e.indexOf(n,u)!==-1}p("ERR_INVALID_OPT_VALUE",function(e,n){return'The value "'+n+'" is invalid for option "'+e+'"'},TypeError),p("ERR_INVALID_ARG_TYPE",function(e,n,u){var o;typeof n=="string"&&s(n,"not ")?(o="must not be",n=n.replace(/^not /,"")):o="must be";var v;if(t(e," argument"))v="The ".concat(e," ").concat(o," ").concat(h(n,"type"));else{var y=r(e,".")?"property":"argument";v='The "'.concat(e,'" ').concat(y," ").concat(o," ").concat(h(n,"type"))}return v+=". Received type ".concat(typeof u),v},TypeError),p("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),p("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),p("ERR_STREAM_PREMATURE_CLOSE","Premature close"),p("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),p("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),p("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),p("ERR_STREAM_WRITE_AFTER_END","write after end"),p("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),p("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),p("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),U.exports.codes=d},{}],56:[function(E,U,L){(function(w){(function(){var d=Object.keys||function(o){var v=[];for(var y in o)v.push(y);return v};U.exports=e;var p=E("./_stream_readable"),h=E("./_stream_writable");E("inherits")(e,p);for(var s=d(h.prototype),t=0;t<s.length;t++){var r=s[t];e.prototype[r]||(e.prototype[r]=h.prototype[r])}function e(o){if(!(this instanceof e))return new e(o);p.call(this,o),h.call(this,o),this.allowHalfOpen=!0,o&&(o.readable===!1&&(this.readable=!1),o.writable===!1&&(this.writable=!1),o.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",n)))}Object.defineProperty(e.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(e.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(e.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function n(){this._writableState.ended||w.nextTick(u,this)}function u(o){o.end()}Object.defineProperty(e.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(v){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=v,this._writableState.destroyed=v)}})}).call(this)}).call(this,E("_process"))},{"./_stream_readable":58,"./_stream_writable":60,_process:50,inherits:24}],57:[function(E,U,L){U.exports=d;var w=E("./_stream_transform");E("inherits")(d,w);function d(p){if(!(this instanceof d))return new d(p);w.call(this,p)}d.prototype._transform=function(p,h,s){s(null,p)}},{"./_stream_transform":59,inherits:24}],58:[function(E,U,L){(function(w,d){(function(){U.exports=H;var p;H.ReadableState=V,E("events").EventEmitter;var h=function(x,m){return x.listeners(m).length},s=E("./internal/streams/stream"),t=E("buffer").Buffer,r=d.Uint8Array||function(){};function e(T){return t.from(T)}function n(T){return t.isBuffer(T)||T instanceof r}var u=E("util"),o;u&&u.debuglog?o=u.debuglog("stream"):o=function(){};var v=E("./internal/streams/buffer_list"),y=E("./internal/streams/destroy"),f=E("./internal/streams/state"),i=f.getHighWaterMark,g=E("../errors").codes,S=g.ERR_INVALID_ARG_TYPE,A=g.ERR_STREAM_PUSH_AFTER_EOF,P=g.ERR_METHOD_NOT_IMPLEMENTED,B=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,R,W,l;E("inherits")(H,s);var _=y.errorOrDestroy,b=["error","close","destroy","pause","resume"];function j(T,x,m){if(typeof T.prependListener=="function")return T.prependListener(x,m);!T._events||!T._events[x]?T.on(x,m):Array.isArray(T._events[x])?T._events[x].unshift(m):T._events[x]=[m,T._events[x]]}function V(T,x,m){p=p||E("./_stream_duplex"),T=T||{},typeof m!="boolean"&&(m=x instanceof p),this.objectMode=!!T.objectMode,m&&(this.objectMode=this.objectMode||!!T.readableObjectMode),this.highWaterMark=i(this,T,"readableHighWaterMark",m),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=T.emitClose!==!1,this.autoDestroy=!!T.autoDestroy,this.destroyed=!1,this.defaultEncoding=T.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,T.encoding&&(R||(R=E("string_decoder/").StringDecoder),this.decoder=new R(T.encoding),this.encoding=T.encoding)}function H(T){if(p=p||E("./_stream_duplex"),!(this instanceof H))return new H(T);var x=this instanceof p;this._readableState=new V(T,this,x),this.readable=!0,T&&(typeof T.read=="function"&&(this._read=T.read),typeof T.destroy=="function"&&(this._destroy=T.destroy)),s.call(this)}Object.defineProperty(H.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(x){this._readableState&&(this._readableState.destroyed=x)}}),H.prototype.destroy=y.destroy,H.prototype._undestroy=y.undestroy,H.prototype._destroy=function(T,x){x(T)},H.prototype.push=function(T,x){var m=this._readableState,a;return m.objectMode?a=!0:typeof T=="string"&&(x=x||m.defaultEncoding,x!==m.encoding&&(T=t.from(T,x),x=""),a=!0),Y(this,T,x,!1,a)},H.prototype.unshift=function(T){return Y(this,T,null,!0,!1)};function Y(T,x,m,a,c){o("readableAddChunk",x);var k=T._readableState;if(x===null)k.reading=!1,ie(T,k);else{var F;if(c||(F=I(k,x)),F)_(T,F);else if(k.objectMode||x&&x.length>0)if(typeof x!="string"&&!k.objectMode&&Object.getPrototypeOf(x)!==t.prototype&&(x=e(x)),a)k.endEmitted?_(T,new B):C(T,k,x,!0);else if(k.ended)_(T,new A);else{if(k.destroyed)return!1;k.reading=!1,k.decoder&&!m?(x=k.decoder.write(x),k.objectMode||x.length!==0?C(T,k,x,!1):ne(T,k)):C(T,k,x,!1)}else a||(k.reading=!1,ne(T,k))}return!k.ended&&(k.length<k.highWaterMark||k.length===0)}function C(T,x,m,a){x.flowing&&x.length===0&&!x.sync?(x.awaitDrain=0,T.emit("data",m)):(x.length+=x.objectMode?1:m.length,a?x.buffer.unshift(m):x.buffer.push(m),x.needReadable&&K(T)),ne(T,x)}function I(T,x){var m;return!n(x)&&typeof x!="string"&&x!==void 0&&!T.objectMode&&(m=new S("chunk",["string","Buffer","Uint8Array"],x)),m}H.prototype.isPaused=function(){return this._readableState.flowing===!1},H.prototype.setEncoding=function(T){R||(R=E("string_decoder/").StringDecoder);var x=new R(T);this._readableState.decoder=x,this._readableState.encoding=this._readableState.decoder.encoding;for(var m=this._readableState.buffer.head,a="";m!==null;)a+=x.write(m.data),m=m.next;return this._readableState.buffer.clear(),a!==""&&this._readableState.buffer.push(a),this._readableState.length=a.length,this};var D=1073741824;function G(T){return T>=D?T=D:(T--,T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,T|=T>>>16,T++),T}function se(T,x){return T<=0||x.length===0&&x.ended?0:x.objectMode?1:T!==T?x.flowing&&x.length?x.buffer.head.data.length:x.length:(T>x.highWaterMark&&(x.highWaterMark=G(T)),T<=x.length?T:x.ended?x.length:(x.needReadable=!0,0))}H.prototype.read=function(T){o("read",T),T=parseInt(T,10);var x=this._readableState,m=T;if(T!==0&&(x.emittedReadable=!1),T===0&&x.needReadable&&((x.highWaterMark!==0?x.length>=x.highWaterMark:x.length>0)||x.ended))return o("read: emitReadable",x.length,x.ended),x.length===0&&x.ended?z(this):K(this),null;if(T=se(T,x),T===0&&x.ended)return x.length===0&&z(this),null;var a=x.needReadable;o("need readable",a),(x.length===0||x.length-T<x.highWaterMark)&&(a=!0,o("length less than watermark",a)),x.ended||x.reading?(a=!1,o("reading or ended",a)):a&&(o("do read"),x.reading=!0,x.sync=!0,x.length===0&&(x.needReadable=!0),this._read(x.highWaterMark),x.sync=!1,x.reading||(T=se(m,x)));var c;return T>0?c=M(T,x):c=null,c===null?(x.needReadable=x.length<=x.highWaterMark,T=0):(x.length-=T,x.awaitDrain=0),x.length===0&&(x.ended||(x.needReadable=!0),m!==T&&x.ended&&z(this)),c!==null&&this.emit("data",c),c};function ie(T,x){if(o("onEofChunk"),!x.ended){if(x.decoder){var m=x.decoder.end();m&&m.length&&(x.buffer.push(m),x.length+=x.objectMode?1:m.length)}x.ended=!0,x.sync?K(T):(x.needReadable=!1,x.emittedReadable||(x.emittedReadable=!0,Q(T)))}}function K(T){var x=T._readableState;o("emitReadable",x.needReadable,x.emittedReadable),x.needReadable=!1,x.emittedReadable||(o("emitReadable",x.flowing),x.emittedReadable=!0,w.nextTick(Q,T))}function Q(T){var x=T._readableState;o("emitReadable_",x.destroyed,x.length,x.ended),!x.destroyed&&(x.length||x.ended)&&(T.emit("readable"),x.emittedReadable=!1),x.needReadable=!x.flowing&&!x.ended&&x.length<=x.highWaterMark,O(T)}function ne(T,x){x.readingMore||(x.readingMore=!0,w.nextTick(te,T,x))}function te(T,x){for(;!x.reading&&!x.ended&&(x.length<x.highWaterMark||x.flowing&&x.length===0);){var m=x.length;if(o("maybeReadMore read 0"),T.read(0),m===x.length)break}x.readingMore=!1}H.prototype._read=function(T){_(this,new P("_read()"))},H.prototype.pipe=function(T,x){var m=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=T;break;case 1:a.pipes=[a.pipes,T];break;default:a.pipes.push(T);break}a.pipesCount+=1,o("pipe count=%d opts=%j",a.pipesCount,x);var c=(!x||x.end!==!1)&&T!==w.stdout&&T!==w.stderr,k=c?ee:be;a.endEmitted?w.nextTick(k):m.once("end",k),T.on("unpipe",F);function F(ve,me){o("onunpipe"),ve===m&&me&&me.hasUnpiped===!1&&(me.hasUnpiped=!0,ue())}function ee(){o("onend"),T.end()}var re=le(m);T.on("drain",re);var fe=!1;function ue(){o("cleanup"),T.removeListener("close",he),T.removeListener("finish",ge),T.removeListener("drain",re),T.removeListener("error",de),T.removeListener("unpipe",F),m.removeListener("end",ee),m.removeListener("end",be),m.removeListener("data",ce),fe=!0,a.awaitDrain&&(!T._writableState||T._writableState.needDrain)&&re()}m.on("data",ce);function ce(ve){o("ondata");var me=T.write(ve);o("dest.write",me),me===!1&&((a.pipesCount===1&&a.pipes===T||a.pipesCount>1&&Z(a.pipes,T)!==-1)&&!fe&&(o("false write response, pause",a.awaitDrain),a.awaitDrain++),m.pause())}function de(ve){o("onerror",ve),be(),T.removeListener("error",de),h(T,"error")===0&&_(T,ve)}j(T,"error",de);function he(){T.removeListener("finish",ge),be()}T.once("close",he);function ge(){o("onfinish"),T.removeListener("close",he),be()}T.once("finish",ge);function be(){o("unpipe"),m.unpipe(T)}return T.emit("pipe",m),a.flowing||(o("pipe resume"),m.resume()),T};function le(T){return function(){var m=T._readableState;o("pipeOnDrain",m.awaitDrain),m.awaitDrain&&m.awaitDrain--,m.awaitDrain===0&&h(T,"data")&&(m.flowing=!0,O(T))}}H.prototype.unpipe=function(T){var x=this._readableState,m={hasUnpiped:!1};if(x.pipesCount===0)return this;if(x.pipesCount===1)return T&&T!==x.pipes?this:(T||(T=x.pipes),x.pipes=null,x.pipesCount=0,x.flowing=!1,T&&T.emit("unpipe",this,m),this);if(!T){var a=x.pipes,c=x.pipesCount;x.pipes=null,x.pipesCount=0,x.flowing=!1;for(var k=0;k<c;k++)a[k].emit("unpipe",this,{hasUnpiped:!1});return this}var F=Z(x.pipes,T);return F===-1?this:(x.pipes.splice(F,1),x.pipesCount-=1,x.pipesCount===1&&(x.pipes=x.pipes[0]),T.emit("unpipe",this,m),this)},H.prototype.on=function(T,x){var m=s.prototype.on.call(this,T,x),a=this._readableState;return T==="data"?(a.readableListening=this.listenerCount("readable")>0,a.flowing!==!1&&this.resume()):T==="readable"&&!a.endEmitted&&!a.readableListening&&(a.readableListening=a.needReadable=!0,a.flowing=!1,a.emittedReadable=!1,o("on readable",a.length,a.reading),a.length?K(this):a.reading||w.nextTick(q,this)),m},H.prototype.addListener=H.prototype.on,H.prototype.removeListener=function(T,x){var m=s.prototype.removeListener.call(this,T,x);return T==="readable"&&w.nextTick(oe,this),m},H.prototype.removeAllListeners=function(T){var x=s.prototype.removeAllListeners.apply(this,arguments);return(T==="readable"||T===void 0)&&w.nextTick(oe,this),x};function oe(T){var x=T._readableState;x.readableListening=T.listenerCount("readable")>0,x.resumeScheduled&&!x.paused?x.flowing=!0:T.listenerCount("data")>0&&T.resume()}function q(T){o("readable nexttick read 0"),T.read(0)}H.prototype.resume=function(){var T=this._readableState;return T.flowing||(o("resume"),T.flowing=!T.readableListening,N(this,T)),T.paused=!1,this};function N(T,x){x.resumeScheduled||(x.resumeScheduled=!0,w.nextTick(J,T,x))}function J(T,x){o("resume",x.reading),x.reading||T.read(0),x.resumeScheduled=!1,T.emit("resume"),O(T),x.flowing&&!x.reading&&T.read(0)}H.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function O(T){var x=T._readableState;for(o("flow",x.flowing);x.flowing&&T.read()!==null;);}H.prototype.wrap=function(T){var x=this,m=this._readableState,a=!1;T.on("end",function(){if(o("wrapped end"),m.decoder&&!m.ended){var F=m.decoder.end();F&&F.length&&x.push(F)}x.push(null)}),T.on("data",function(F){if(o("wrapped data"),m.decoder&&(F=m.decoder.write(F)),!(m.objectMode&&F==null)&&!(!m.objectMode&&(!F||!F.length))){var ee=x.push(F);ee||(a=!0,T.pause())}});for(var c in T)this[c]===void 0&&typeof T[c]=="function"&&(this[c]=(function(ee){return function(){return T[ee].apply(T,arguments)}})(c));for(var k=0;k<b.length;k++)T.on(b[k],this.emit.bind(this,b[k]));return this._read=function(F){o("wrapped _read",F),a&&(a=!1,T.resume())},this},typeof Symbol=="function"&&(H.prototype[Symbol.asyncIterator]=function(){return W===void 0&&(W=E("./internal/streams/async_iterator")),W(this)}),Object.defineProperty(H.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(H.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(H.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(x){this._readableState&&(this._readableState.flowing=x)}}),H._fromList=M,Object.defineProperty(H.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function M(T,x){if(x.length===0)return null;var m;return x.objectMode?m=x.buffer.shift():!T||T>=x.length?(x.decoder?m=x.buffer.join(""):x.buffer.length===1?m=x.buffer.first():m=x.buffer.concat(x.length),x.buffer.clear()):m=x.buffer.consume(T,x.decoder),m}function z(T){var x=T._readableState;o("endReadable",x.endEmitted),x.endEmitted||(x.ended=!0,w.nextTick($,x,T))}function $(T,x){if(o("endReadableNT",T.endEmitted,T.length),!T.endEmitted&&T.length===0&&(T.endEmitted=!0,x.readable=!1,x.emit("end"),T.autoDestroy)){var m=x._writableState;(!m||m.autoDestroy&&m.finished)&&x.destroy()}}typeof Symbol=="function"&&(H.from=function(T,x){return l===void 0&&(l=E("./internal/streams/from")),l(H,T,x)});function Z(T,x){for(var m=0,a=T.length;m<a;m++)if(T[m]===x)return m;return-1}}).call(this)}).call(this,E("_process"),typeof ye!="undefined"?ye:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../errors":55,"./_stream_duplex":56,"./internal/streams/async_iterator":61,"./internal/streams/buffer_list":62,"./internal/streams/destroy":63,"./internal/streams/from":65,"./internal/streams/state":67,"./internal/streams/stream":68,_process:50,buffer:17,events:22,inherits:24,"string_decoder/":75,util:16}],59:[function(E,U,L){U.exports=e;var w=E("../errors").codes,d=w.ERR_METHOD_NOT_IMPLEMENTED,p=w.ERR_MULTIPLE_CALLBACK,h=w.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=w.ERR_TRANSFORM_WITH_LENGTH_0,t=E("./_stream_duplex");E("inherits")(e,t);function r(o,v){var y=this._transformState;y.transforming=!1;var f=y.writecb;if(f===null)return this.emit("error",new p);y.writechunk=null,y.writecb=null,v!=null&&this.push(v),f(o);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function e(o){if(!(this instanceof e))return new e(o);t.call(this,o),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,o&&(typeof o.transform=="function"&&(this._transform=o.transform),typeof o.flush=="function"&&(this._flush=o.flush)),this.on("prefinish",n)}function n(){var o=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(v,y){u(o,v,y)}):u(this,null,null)}e.prototype.push=function(o,v){return this._transformState.needTransform=!1,t.prototype.push.call(this,o,v)},e.prototype._transform=function(o,v,y){y(new d("_transform()"))},e.prototype._write=function(o,v,y){var f=this._transformState;if(f.writecb=y,f.writechunk=o,f.writeencoding=v,!f.transforming){var i=this._readableState;(f.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},e.prototype._read=function(o){var v=this._transformState;v.writechunk!==null&&!v.transforming?(v.transforming=!0,this._transform(v.writechunk,v.writeencoding,v.afterTransform)):v.needTransform=!0},e.prototype._destroy=function(o,v){t.prototype._destroy.call(this,o,function(y){v(y)})};function u(o,v,y){if(v)return o.emit("error",v);if(y!=null&&o.push(y),o._writableState.length)throw new s;if(o._transformState.transforming)throw new h;return o.push(null)}},{"../errors":55,"./_stream_duplex":56,inherits:24}],60:[function(E,U,L){(function(w,d){(function(){U.exports=V;function p(O){var M=this;this.next=null,this.entry=null,this.finish=function(){J(M,O)}}var h;V.WritableState=b;var s={deprecate:E("util-deprecate")},t=E("./internal/streams/stream"),r=E("buffer").Buffer,e=d.Uint8Array||function(){};function n(O){return r.from(O)}function u(O){return r.isBuffer(O)||O instanceof e}var o=E("./internal/streams/destroy"),v=E("./internal/streams/state"),y=v.getHighWaterMark,f=E("../errors").codes,i=f.ERR_INVALID_ARG_TYPE,g=f.ERR_METHOD_NOT_IMPLEMENTED,S=f.ERR_MULTIPLE_CALLBACK,A=f.ERR_STREAM_CANNOT_PIPE,P=f.ERR_STREAM_DESTROYED,B=f.ERR_STREAM_NULL_VALUES,R=f.ERR_STREAM_WRITE_AFTER_END,W=f.ERR_UNKNOWN_ENCODING,l=o.errorOrDestroy;E("inherits")(V,t);function _(){}function b(O,M,z){h=h||E("./_stream_duplex"),O=O||{},typeof z!="boolean"&&(z=M instanceof h),this.objectMode=!!O.objectMode,z&&(this.objectMode=this.objectMode||!!O.writableObjectMode),this.highWaterMark=y(this,O,"writableHighWaterMark",z),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var $=O.decodeStrings===!1;this.decodeStrings=!$,this.defaultEncoding=O.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Z){ie(M,Z)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=O.emitClose!==!1,this.autoDestroy=!!O.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new p(this)}b.prototype.getBuffer=function(){for(var M=this.bufferedRequest,z=[];M;)z.push(M),M=M.next;return z},(function(){try{Object.defineProperty(b.prototype,"buffer",{get:s.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var j;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(j=Function.prototype[Symbol.hasInstance],Object.defineProperty(V,Symbol.hasInstance,{value:function(M){return j.call(this,M)?!0:this!==V?!1:M&&M._writableState instanceof b}})):j=function(M){return M instanceof this};function V(O){h=h||E("./_stream_duplex");var M=this instanceof h;if(!M&&!j.call(V,this))return new V(O);this._writableState=new b(O,this,M),this.writable=!0,O&&(typeof O.write=="function"&&(this._write=O.write),typeof O.writev=="function"&&(this._writev=O.writev),typeof O.destroy=="function"&&(this._destroy=O.destroy),typeof O.final=="function"&&(this._final=O.final)),t.call(this)}V.prototype.pipe=function(){l(this,new A)};function H(O,M){var z=new R;l(O,z),w.nextTick(M,z)}function Y(O,M,z,$){var Z;return z===null?Z=new B:typeof z!="string"&&!M.objectMode&&(Z=new i("chunk",["string","Buffer"],z)),Z?(l(O,Z),w.nextTick($,Z),!1):!0}V.prototype.write=function(O,M,z){var $=this._writableState,Z=!1,T=!$.objectMode&&u(O);return T&&!r.isBuffer(O)&&(O=n(O)),typeof M=="function"&&(z=M,M=null),T?M="buffer":M||(M=$.defaultEncoding),typeof z!="function"&&(z=_),$.ending?H(this,z):(T||Y(this,$,O,z))&&($.pendingcb++,Z=I(this,$,T,O,M,z)),Z},V.prototype.cork=function(){this._writableState.corked++},V.prototype.uncork=function(){var O=this._writableState;O.corked&&(O.corked--,!O.writing&&!O.corked&&!O.bufferProcessing&&O.bufferedRequest&&ne(this,O))},V.prototype.setDefaultEncoding=function(M){if(typeof M=="string"&&(M=M.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((M+"").toLowerCase())>-1))throw new W(M);return this._writableState.defaultEncoding=M,this},Object.defineProperty(V.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function C(O,M,z){return!O.objectMode&&O.decodeStrings!==!1&&typeof M=="string"&&(M=r.from(M,z)),M}Object.defineProperty(V.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function I(O,M,z,$,Z,T){if(!z){var x=C(M,$,Z);$!==x&&(z=!0,Z="buffer",$=x)}var m=M.objectMode?1:$.length;M.length+=m;var a=M.length<M.highWaterMark;if(a||(M.needDrain=!0),M.writing||M.corked){var c=M.lastBufferedRequest;M.lastBufferedRequest={chunk:$,encoding:Z,isBuf:z,callback:T,next:null},c?c.next=M.lastBufferedRequest:M.bufferedRequest=M.lastBufferedRequest,M.bufferedRequestCount+=1}else D(O,M,!1,m,$,Z,T);return a}function D(O,M,z,$,Z,T,x){M.writelen=$,M.writecb=x,M.writing=!0,M.sync=!0,M.destroyed?M.onwrite(new P("write")):z?O._writev(Z,M.onwrite):O._write(Z,T,M.onwrite),M.sync=!1}function G(O,M,z,$,Z){--M.pendingcb,z?(w.nextTick(Z,$),w.nextTick(q,O,M),O._writableState.errorEmitted=!0,l(O,$)):(Z($),O._writableState.errorEmitted=!0,l(O,$),q(O,M))}function se(O){O.writing=!1,O.writecb=null,O.length-=O.writelen,O.writelen=0}function ie(O,M){var z=O._writableState,$=z.sync,Z=z.writecb;if(typeof Z!="function")throw new S;if(se(z),M)G(O,z,$,M,Z);else{var T=te(z)||O.destroyed;!T&&!z.corked&&!z.bufferProcessing&&z.bufferedRequest&&ne(O,z),$?w.nextTick(K,O,z,T,Z):K(O,z,T,Z)}}function K(O,M,z,$){z||Q(O,M),M.pendingcb--,$(),q(O,M)}function Q(O,M){M.length===0&&M.needDrain&&(M.needDrain=!1,O.emit("drain"))}function ne(O,M){M.bufferProcessing=!0;var z=M.bufferedRequest;if(O._writev&&z&&z.next){var $=M.bufferedRequestCount,Z=new Array($),T=M.corkedRequestsFree;T.entry=z;for(var x=0,m=!0;z;)Z[x]=z,z.isBuf||(m=!1),z=z.next,x+=1;Z.allBuffers=m,D(O,M,!0,M.length,Z,"",T.finish),M.pendingcb++,M.lastBufferedRequest=null,T.next?(M.corkedRequestsFree=T.next,T.next=null):M.corkedRequestsFree=new p(M),M.bufferedRequestCount=0}else{for(;z;){var a=z.chunk,c=z.encoding,k=z.callback,F=M.objectMode?1:a.length;if(D(O,M,!1,F,a,c,k),z=z.next,M.bufferedRequestCount--,M.writing)break}z===null&&(M.lastBufferedRequest=null)}M.bufferedRequest=z,M.bufferProcessing=!1}V.prototype._write=function(O,M,z){z(new g("_write()"))},V.prototype._writev=null,V.prototype.end=function(O,M,z){var $=this._writableState;return typeof O=="function"?(z=O,O=null,M=null):typeof M=="function"&&(z=M,M=null),O!=null&&this.write(O,M),$.corked&&($.corked=1,this.uncork()),$.ending||N(this,$,z),this},Object.defineProperty(V.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function te(O){return O.ending&&O.length===0&&O.bufferedRequest===null&&!O.finished&&!O.writing}function le(O,M){O._final(function(z){M.pendingcb--,z&&l(O,z),M.prefinished=!0,O.emit("prefinish"),q(O,M)})}function oe(O,M){!M.prefinished&&!M.finalCalled&&(typeof O._final=="function"&&!M.destroyed?(M.pendingcb++,M.finalCalled=!0,w.nextTick(le,O,M)):(M.prefinished=!0,O.emit("prefinish")))}function q(O,M){var z=te(M);if(z&&(oe(O,M),M.pendingcb===0&&(M.finished=!0,O.emit("finish"),M.autoDestroy))){var $=O._readableState;(!$||$.autoDestroy&&$.endEmitted)&&O.destroy()}return z}function N(O,M,z){M.ending=!0,q(O,M),z&&(M.finished?w.nextTick(z):O.once("finish",z)),M.ended=!0,O.writable=!1}function J(O,M,z){var $=O.entry;for(O.entry=null;$;){var Z=$.callback;M.pendingcb--,Z(z),$=$.next}M.corkedRequestsFree.next=O}Object.defineProperty(V.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(M){this._writableState&&(this._writableState.destroyed=M)}}),V.prototype.destroy=o.destroy,V.prototype._undestroy=o.undestroy,V.prototype._destroy=function(O,M){M(O)}}).call(this)}).call(this,E("_process"),typeof ye!="undefined"?ye:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../errors":55,"./_stream_duplex":56,"./internal/streams/destroy":63,"./internal/streams/state":67,"./internal/streams/stream":68,_process:50,buffer:17,inherits:24,"util-deprecate":78}],61:[function(E,U,L){(function(w){(function(){var d;function p(P,B,R){return B in P?Object.defineProperty(P,B,{value:R,enumerable:!0,configurable:!0,writable:!0}):P[B]=R,P}var h=E("./end-of-stream"),s=Symbol("lastResolve"),t=Symbol("lastReject"),r=Symbol("error"),e=Symbol("ended"),n=Symbol("lastPromise"),u=Symbol("handlePromise"),o=Symbol("stream");function v(P,B){return{value:P,done:B}}function y(P){var B=P[s];if(B!==null){var R=P[o].read();R!==null&&(P[n]=null,P[s]=null,P[t]=null,B(v(R,!1)))}}function f(P){w.nextTick(y,P)}function i(P,B){return function(R,W){P.then(function(){if(B[e]){R(v(void 0,!0));return}B[u](R,W)},W)}}var g=Object.getPrototypeOf(function(){}),S=Object.setPrototypeOf((d={get stream(){return this[o]},next:function(){var B=this,R=this[r];if(R!==null)return Promise.reject(R);if(this[e])return Promise.resolve(v(void 0,!0));if(this[o].destroyed)return new Promise(function(b,j){w.nextTick(function(){B[r]?j(B[r]):b(v(void 0,!0))})});var W=this[n],l;if(W)l=new Promise(i(W,this));else{var _=this[o].read();if(_!==null)return Promise.resolve(v(_,!1));l=new Promise(this[u])}return this[n]=l,l}},p(d,Symbol.asyncIterator,function(){return this}),p(d,"return",function(){var B=this;return new Promise(function(R,W){B[o].destroy(null,function(l){if(l){W(l);return}R(v(void 0,!0))})})}),d),g),A=function(B){var R,W=Object.create(S,(R={},p(R,o,{value:B,writable:!0}),p(R,s,{value:null,writable:!0}),p(R,t,{value:null,writable:!0}),p(R,r,{value:null,writable:!0}),p(R,e,{value:B._readableState.endEmitted,writable:!0}),p(R,u,{value:function(_,b){var j=W[o].read();j?(W[n]=null,W[s]=null,W[t]=null,_(v(j,!1))):(W[s]=_,W[t]=b)},writable:!0}),R));return W[n]=null,h(B,function(l){if(l&&l.code!=="ERR_STREAM_PREMATURE_CLOSE"){var _=W[t];_!==null&&(W[n]=null,W[s]=null,W[t]=null,_(l)),W[r]=l;return}var b=W[s];b!==null&&(W[n]=null,W[s]=null,W[t]=null,b(v(void 0,!0))),W[e]=!0}),B.on("readable",f.bind(null,W)),W};U.exports=A}).call(this)}).call(this,E("_process"))},{"./end-of-stream":64,_process:50}],62:[function(E,U,L){function w(y,f){var i=Object.keys(y);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(y);f&&(g=g.filter(function(S){return Object.getOwnPropertyDescriptor(y,S).enumerable})),i.push.apply(i,g)}return i}function d(y){for(var f=1;f<arguments.length;f++){var i=arguments[f]!=null?arguments[f]:{};f%2?w(Object(i),!0).forEach(function(g){p(y,g,i[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(i)):w(Object(i)).forEach(function(g){Object.defineProperty(y,g,Object.getOwnPropertyDescriptor(i,g))})}return y}function p(y,f,i){return f in y?Object.defineProperty(y,f,{value:i,enumerable:!0,configurable:!0,writable:!0}):y[f]=i,y}function h(y,f){if(!(y instanceof f))throw new TypeError("Cannot call a class as a function")}function s(y,f){for(var i=0;i<f.length;i++){var g=f[i];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(y,g.key,g)}}function t(y,f,i){return f&&s(y.prototype,f),y}var r=E("buffer"),e=r.Buffer,n=E("util"),u=n.inspect,o=u&&u.custom||"inspect";function v(y,f,i){e.prototype.copy.call(y,f,i)}U.exports=(function(){function y(){h(this,y),this.head=null,this.tail=null,this.length=0}return t(y,[{key:"push",value:function(i){var g={data:i,next:null};this.length>0?this.tail.next=g:this.head=g,this.tail=g,++this.length}},{key:"unshift",value:function(i){var g={data:i,next:this.head};this.length===0&&(this.tail=g),this.head=g,++this.length}},{key:"shift",value:function(){if(this.length!==0){var i=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,i}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(i){if(this.length===0)return"";for(var g=this.head,S=""+g.data;g=g.next;)S+=i+g.data;return S}},{key:"concat",value:function(i){if(this.length===0)return e.alloc(0);for(var g=e.allocUnsafe(i>>>0),S=this.head,A=0;S;)v(S.data,g,A),A+=S.data.length,S=S.next;return g}},{key:"consume",value:function(i,g){var S;return i<this.head.data.length?(S=this.head.data.slice(0,i),this.head.data=this.head.data.slice(i)):i===this.head.data.length?S=this.shift():S=g?this._getString(i):this._getBuffer(i),S}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(i){var g=this.head,S=1,A=g.data;for(i-=A.length;g=g.next;){var P=g.data,B=i>P.length?P.length:i;if(B===P.length?A+=P:A+=P.slice(0,i),i-=B,i===0){B===P.length?(++S,g.next?this.head=g.next:this.head=this.tail=null):(this.head=g,g.data=P.slice(B));break}++S}return this.length-=S,A}},{key:"_getBuffer",value:function(i){var g=e.allocUnsafe(i),S=this.head,A=1;for(S.data.copy(g),i-=S.data.length;S=S.next;){var P=S.data,B=i>P.length?P.length:i;if(P.copy(g,g.length-i,0,B),i-=B,i===0){B===P.length?(++A,S.next?this.head=S.next:this.head=this.tail=null):(this.head=S,S.data=P.slice(B));break}++A}return this.length-=A,g}},{key:o,value:function(i,g){return u(this,d({},g,{depth:0,customInspect:!1}))}}]),y})()},{buffer:17,util:16}],63:[function(E,U,L){(function(w){(function(){function d(e,n){var u=this,o=this._readableState&&this._readableState.destroyed,v=this._writableState&&this._writableState.destroyed;return o||v?(n?n(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,w.nextTick(t,this,e)):w.nextTick(t,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(y){!n&&y?u._writableState?u._writableState.errorEmitted?w.nextTick(h,u):(u._writableState.errorEmitted=!0,w.nextTick(p,u,y)):w.nextTick(p,u,y):n?(w.nextTick(h,u),n(y)):w.nextTick(h,u)}),this)}function p(e,n){t(e,n),h(e)}function h(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function s(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function t(e,n){e.emit("error",n)}function r(e,n){var u=e._readableState,o=e._writableState;u&&u.autoDestroy||o&&o.autoDestroy?e.destroy(n):e.emit("error",n)}U.exports={destroy:d,undestroy:s,errorOrDestroy:r}}).call(this)}).call(this,E("_process"))},{_process:50}],64:[function(E,U,L){var w=E("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function d(t){var r=!1;return function(){if(!r){r=!0;for(var e=arguments.length,n=new Array(e),u=0;u<e;u++)n[u]=arguments[u];t.apply(this,n)}}}function p(){}function h(t){return t.setHeader&&typeof t.abort=="function"}function s(t,r,e){if(typeof r=="function")return s(t,null,r);r||(r={}),e=d(e||p);var n=r.readable||r.readable!==!1&&t.readable,u=r.writable||r.writable!==!1&&t.writable,o=function(){t.writable||y()},v=t._writableState&&t._writableState.finished,y=function(){u=!1,v=!0,n||e.call(t)},f=t._readableState&&t._readableState.endEmitted,i=function(){n=!1,f=!0,u||e.call(t)},g=function(B){e.call(t,B)},S=function(){var B;if(n&&!f)return(!t._readableState||!t._readableState.ended)&&(B=new w),e.call(t,B);if(u&&!v)return(!t._writableState||!t._writableState.ended)&&(B=new w),e.call(t,B)},A=function(){t.req.on("finish",y)};return h(t)?(t.on("complete",y),t.on("abort",S),t.req?A():t.on("request",A)):u&&!t._writableState&&(t.on("end",o),t.on("close",o)),t.on("end",i),t.on("finish",y),r.error!==!1&&t.on("error",g),t.on("close",S),function(){t.removeListener("complete",y),t.removeListener("abort",S),t.removeListener("request",A),t.req&&t.req.removeListener("finish",y),t.removeListener("end",o),t.removeListener("close",o),t.removeListener("finish",y),t.removeListener("end",i),t.removeListener("error",g),t.removeListener("close",S)}}U.exports=s},{"../../../errors":55}],65:[function(E,U,L){U.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],66:[function(E,U,L){var w;function d(y){var f=!1;return function(){f||(f=!0,y.apply(void 0,arguments))}}var p=E("../../../errors").codes,h=p.ERR_MISSING_ARGS,s=p.ERR_STREAM_DESTROYED;function t(y){if(y)throw y}function r(y){return y.setHeader&&typeof y.abort=="function"}function e(y,f,i,g){g=d(g);var S=!1;y.on("close",function(){S=!0}),w===void 0&&(w=E("./end-of-stream")),w(y,{readable:f,writable:i},function(P){if(P)return g(P);S=!0,g()});var A=!1;return function(P){if(!S&&!A){if(A=!0,r(y))return y.abort();if(typeof y.destroy=="function")return y.destroy();g(P||new s("pipe"))}}}function n(y){y()}function u(y,f){return y.pipe(f)}function o(y){return!y.length||typeof y[y.length-1]!="function"?t:y.pop()}function v(){for(var y=arguments.length,f=new Array(y),i=0;i<y;i++)f[i]=arguments[i];var g=o(f);if(Array.isArray(f[0])&&(f=f[0]),f.length<2)throw new h("streams");var S,A=f.map(function(P,B){var R=B<f.length-1,W=B>0;return e(P,R,W,function(l){S||(S=l),l&&A.forEach(n),!R&&(A.forEach(n),g(S))})});return f.reduce(u)}U.exports=v},{"../../../errors":55,"./end-of-stream":64}],67:[function(E,U,L){var w=E("../../../errors").codes.ERR_INVALID_OPT_VALUE;function d(h,s,t){return h.highWaterMark!=null?h.highWaterMark:s?h[t]:null}function p(h,s,t,r){var e=d(s,r,t);if(e!=null){if(!(isFinite(e)&&Math.floor(e)===e)||e<0){var n=r?t:"highWaterMark";throw new w(n,e)}return Math.floor(e)}return h.objectMode?16:16*1024}U.exports={getHighWaterMark:p}},{"../../../errors":55}],68:[function(E,U,L){U.exports=E("events").EventEmitter},{events:22}],69:[function(E,U,L){L=U.exports=E("./lib/_stream_readable.js"),L.Stream=L,L.Readable=L,L.Writable=E("./lib/_stream_writable.js"),L.Duplex=E("./lib/_stream_duplex.js"),L.Transform=E("./lib/_stream_transform.js"),L.PassThrough=E("./lib/_stream_passthrough.js"),L.finished=E("./lib/internal/streams/end-of-stream.js"),L.pipeline=E("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":56,"./lib/_stream_passthrough.js":57,"./lib/_stream_readable.js":58,"./lib/_stream_transform.js":59,"./lib/_stream_writable.js":60,"./lib/internal/streams/end-of-stream.js":64,"./lib/internal/streams/pipeline.js":66}],70:[function(E,U,L){function w(p,h,s){var t=this;this._callback=p,this._args=s,this._interval=setInterval(p,h,this._args),this.reschedule=function(r){r||(r=t._interval),t._interval&&clearInterval(t._interval),t._interval=setInterval(t._callback,r,t._args)},this.clear=function(){t._interval&&(clearInterval(t._interval),t._interval=void 0)},this.destroy=function(){t._interval&&clearInterval(t._interval),t._callback=void 0,t._interval=void 0,t._args=void 0}}function d(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("interval needed");var p;if(arguments.length>0){p=new Array(arguments.length-2);for(var h=0;h<p.length;h++)p[h]=arguments[h+2]}return new w(arguments[0],arguments[1],p)}U.exports=d},{}],71:[function(E,U,L){U.exports=E("./index.js")()},{"./index.js":72}],72:[function(E,U,L){(function(w){(function(){U.exports=p;function d(s){return s instanceof w?w.from(s):new s.constructor(s.buffer.slice(),s.byteOffset,s.length)}function p(s){if(s=s||{},s.circles)return h(s);return s.proto?e:r;function t(n,u){for(var o=Object.keys(n),v=new Array(o.length),y=0;y<o.length;y++){var f=o[y],i=n[f];typeof i!="object"||i===null?v[f]=i:i instanceof Date?v[f]=new Date(i):ArrayBuffer.isView(i)?v[f]=d(i):v[f]=u(i)}return v}function r(n){if(typeof n!="object"||n===null)return n;if(n instanceof Date)return new Date(n);if(Array.isArray(n))return t(n,r);if(n instanceof Map)return new Map(t(Array.from(n),r));if(n instanceof Set)return new Set(t(Array.from(n),r));var u={};for(var o in n)if(Object.hasOwnProperty.call(n,o)!==!1){var v=n[o];typeof v!="object"||v===null?u[o]=v:v instanceof Date?u[o]=new Date(v):v instanceof Map?u[o]=new Map(t(Array.from(v),r)):v instanceof Set?u[o]=new Set(t(Array.from(v),r)):ArrayBuffer.isView(v)?u[o]=d(v):u[o]=r(v)}return u}function e(n){if(typeof n!="object"||n===null)return n;if(n instanceof Date)return new Date(n);if(Array.isArray(n))return t(n,e);if(n instanceof Map)return new Map(t(Array.from(n),e));if(n instanceof Set)return new Set(t(Array.from(n),e));var u={};for(var o in n){var v=n[o];typeof v!="object"||v===null?u[o]=v:v instanceof Date?u[o]=new Date(v):v instanceof Map?u[o]=new Map(t(Array.from(v),e)):v instanceof Set?u[o]=new Set(t(Array.from(v),e)):ArrayBuffer.isView(v)?u[o]=d(v):u[o]=e(v)}return u}}function h(s){var t=[],r=[];return s.proto?u:n;function e(o,v){for(var y=Object.keys(o),f=new Array(y.length),i=0;i<y.length;i++){var g=y[i],S=o[g];if(typeof S!="object"||S===null)f[g]=S;else if(S instanceof Date)f[g]=new Date(S);else if(ArrayBuffer.isView(S))f[g]=d(S);else{var A=t.indexOf(S);A!==-1?f[g]=r[A]:f[g]=v(S)}}return f}function n(o){if(typeof o!="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return e(o,n);if(o instanceof Map)return new Map(e(Array.from(o),n));if(o instanceof Set)return new Set(e(Array.from(o),n));var v={};t.push(o),r.push(v);for(var y in o)if(Object.hasOwnProperty.call(o,y)!==!1){var f=o[y];if(typeof f!="object"||f===null)v[y]=f;else if(f instanceof Date)v[y]=new Date(f);else if(f instanceof Map)v[y]=new Map(e(Array.from(f),n));else if(f instanceof Set)v[y]=new Set(e(Array.from(f),n));else if(ArrayBuffer.isView(f))v[y]=d(f);else{var i=t.indexOf(f);i!==-1?v[y]=r[i]:v[y]=n(f)}}return t.pop(),r.pop(),v}function u(o){if(typeof o!="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return e(o,u);if(o instanceof Map)return new Map(e(Array.from(o),u));if(o instanceof Set)return new Set(e(Array.from(o),u));var v={};t.push(o),r.push(v);for(var y in o){var f=o[y];if(typeof f!="object"||f===null)v[y]=f;else if(f instanceof Date)v[y]=new Date(f);else if(f instanceof Map)v[y]=new Map(e(Array.from(f),u));else if(f instanceof Set)v[y]=new Set(e(Array.from(f),u));else if(ArrayBuffer.isView(f))v[y]=d(f);else{var i=t.indexOf(f);i!==-1?v[y]=r[i]:v[y]=u(f)}}return t.pop(),r.pop(),v}}}).call(this)}).call(this,E("buffer").Buffer)},{buffer:17}],73:[function(E,U,L){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var w=E("buffer"),d=w.Buffer;function p(s,t){for(var r in s)t[r]=s[r]}d.from&&d.alloc&&d.allocUnsafe&&d.allocUnsafeSlow?U.exports=w:(p(w,L),L.Buffer=h);function h(s,t,r){return d(s,t,r)}h.prototype=Object.create(d.prototype),p(d,h),h.from=function(s,t,r){if(typeof s=="number")throw new TypeError("Argument must not be a number");return d(s,t,r)},h.alloc=function(s,t,r){if(typeof s!="number")throw new TypeError("Argument must be a number");var e=d(s);return t!==void 0?typeof r=="string"?e.fill(t,r):e.fill(t):e.fill(0),e},h.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return d(s)},h.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return w.SlowBuffer(s)}},{buffer:17}],74:[function(E,U,L){U.exports=w;function w(p){var h=p._readableState;return h?h.objectMode||typeof p._duplexState=="number"?p.read():p.read(d(h)):null}function d(p){return p.buffer.length?p.buffer.head?p.buffer.head.data.length:p.buffer[0].length:p.length}},{}],75:[function(E,U,L){var w=E("safe-buffer").Buffer,d=w.isEncoding||function(A){switch(A=""+A,A&&A.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function p(A){if(!A)return"utf8";for(var P;;)switch(A){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return A;default:if(P)return;A=(""+A).toLowerCase(),P=!0}}function h(A){var P=p(A);if(typeof P!="string"&&(w.isEncoding===d||!d(A)))throw new Error("Unknown encoding: "+A);return P||A}L.StringDecoder=s;function s(A){this.encoding=h(A);var P;switch(this.encoding){case"utf16le":this.text=v,this.end=y,P=4;break;case"utf8":this.fillLast=n,P=4;break;case"base64":this.text=f,this.end=i,P=3;break;default:this.write=g,this.end=S;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=w.allocUnsafe(P)}s.prototype.write=function(A){if(A.length===0)return"";var P,B;if(this.lastNeed){if(P=this.fillLast(A),P===void 0)return"";B=this.lastNeed,this.lastNeed=0}else B=0;return B<A.length?P?P+this.text(A,B):this.text(A,B):P||""},s.prototype.end=o,s.prototype.text=u,s.prototype.fillLast=function(A){if(this.lastNeed<=A.length)return A.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);A.copy(this.lastChar,this.lastTotal-this.lastNeed,0,A.length),this.lastNeed-=A.length};function t(A){return A<=127?0:A>>5===6?2:A>>4===14?3:A>>3===30?4:A>>6===2?-1:-2}function r(A,P,B){var R=P.length-1;if(R<B)return 0;var W=t(P[R]);return W>=0?(W>0&&(A.lastNeed=W-1),W):--R<B||W===-2?0:(W=t(P[R]),W>=0?(W>0&&(A.lastNeed=W-2),W):--R<B||W===-2?0:(W=t(P[R]),W>=0?(W>0&&(W===2?W=0:A.lastNeed=W-3),W):0))}function e(A,P,B){if((P[0]&192)!==128)return A.lastNeed=0,"";if(A.lastNeed>1&&P.length>1){if((P[1]&192)!==128)return A.lastNeed=1,"";if(A.lastNeed>2&&P.length>2&&(P[2]&192)!==128)return A.lastNeed=2,""}}function n(A){var P=this.lastTotal-this.lastNeed,B=e(this,A);if(B!==void 0)return B;if(this.lastNeed<=A.length)return A.copy(this.lastChar,P,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);A.copy(this.lastChar,P,0,A.length),this.lastNeed-=A.length}function u(A,P){var B=r(this,A,P);if(!this.lastNeed)return A.toString("utf8",P);this.lastTotal=B;var R=A.length-(B-this.lastNeed);return A.copy(this.lastChar,0,R),A.toString("utf8",P,R)}function o(A){var P=A&&A.length?this.write(A):"";return this.lastNeed?P+"":P}function v(A,P){if((A.length-P)%2===0){var B=A.toString("utf16le",P);if(B){var R=B.charCodeAt(B.length-1);if(R>=55296&&R<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=A[A.length-2],this.lastChar[1]=A[A.length-1],B.slice(0,-1)}return B}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=A[A.length-1],A.toString("utf16le",P,A.length-1)}function y(A){var P=A&&A.length?this.write(A):"";if(this.lastNeed){var B=this.lastTotal-this.lastNeed;return P+this.lastChar.toString("utf16le",0,B)}return P}function f(A,P){var B=(A.length-P)%3;return B===0?A.toString("base64",P):(this.lastNeed=3-B,this.lastTotal=3,B===1?this.lastChar[0]=A[A.length-1]:(this.lastChar[0]=A[A.length-2],this.lastChar[1]=A[A.length-1]),A.toString("base64",P,A.length-B))}function i(A){var P=A&&A.length?this.write(A):"";return this.lastNeed?P+this.lastChar.toString("base64",0,3-this.lastNeed):P}function g(A){return A.toString(this.encoding)}function S(A){return A&&A.length?this.write(A):""}},{"safe-buffer":73}],76:[function(E,U,L){var w=E("punycode"),d=E("./util");L.parse=P,L.resolve=R,L.resolveObject=W,L.format=B,L.Url=p;function p(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var h=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,t=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,r=["<",">",'"',"`"," ","\r",`
`,"	"],e=["{","}","|","\\","^","`"].concat(r),n=["'"].concat(e),u=["%","/","?",";","#"].concat(n),o=["/","?","#"],v=255,y=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,i={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},A=E("querystring");function P(l,_,b){if(l&&d.isObject(l)&&l instanceof p)return l;var j=new p;return j.parse(l,_,b),j}p.prototype.parse=function(l,_,b){if(!d.isString(l))throw new TypeError("Parameter 'url' must be a string, not "+typeof l);var j=l.indexOf("?"),V=j!==-1&&j<l.indexOf("#")?"?":"#",H=l.split(V),Y=/\\/g;H[0]=H[0].replace(Y,"/"),l=H.join(V);var C=l;if(C=C.trim(),!b&&l.split("#").length===1){var I=t.exec(C);if(I)return this.path=C,this.href=C,this.pathname=I[1],I[2]?(this.search=I[2],_?this.query=A.parse(this.search.substr(1)):this.query=this.search.substr(1)):_&&(this.search="",this.query={}),this}var D=h.exec(C);if(D){D=D[0];var G=D.toLowerCase();this.protocol=G,C=C.substr(D.length)}if(b||D||C.match(/^\/\/[^@\/]+@[^@\/]+/)){var se=C.substr(0,2)==="//";se&&!(D&&g[D])&&(C=C.substr(2),this.slashes=!0)}if(!g[D]&&(se||D&&!S[D])){for(var ie=-1,K=0;K<o.length;K++){var Q=C.indexOf(o[K]);Q!==-1&&(ie===-1||Q<ie)&&(ie=Q)}var ne,te;ie===-1?te=C.lastIndexOf("@"):te=C.lastIndexOf("@",ie),te!==-1&&(ne=C.slice(0,te),C=C.slice(te+1),this.auth=decodeURIComponent(ne)),ie=-1;for(var K=0;K<u.length;K++){var Q=C.indexOf(u[K]);Q!==-1&&(ie===-1||Q<ie)&&(ie=Q)}ie===-1&&(ie=C.length),this.host=C.slice(0,ie),C=C.slice(ie),this.parseHost(),this.hostname=this.hostname||"";var le=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!le)for(var oe=this.hostname.split(/\./),K=0,q=oe.length;K<q;K++){var N=oe[K];if(N&&!N.match(y)){for(var J="",O=0,M=N.length;O<M;O++)N.charCodeAt(O)>127?J+="x":J+=N[O];if(!J.match(y)){var z=oe.slice(0,K),$=oe.slice(K+1),Z=N.match(f);Z&&(z.push(Z[1]),$.unshift(Z[2])),$.length&&(C="/"+$.join(".")+C),this.hostname=z.join(".");break}}}this.hostname.length>v?this.hostname="":this.hostname=this.hostname.toLowerCase(),le||(this.hostname=w.toASCII(this.hostname));var T=this.port?":"+this.port:"",x=this.hostname||"";this.host=x+T,this.href+=this.host,le&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),C[0]!=="/"&&(C="/"+C))}if(!i[G])for(var K=0,q=n.length;K<q;K++){var m=n[K];if(C.indexOf(m)!==-1){var a=encodeURIComponent(m);a===m&&(a=escape(m)),C=C.split(m).join(a)}}var c=C.indexOf("#");c!==-1&&(this.hash=C.substr(c),C=C.slice(0,c));var k=C.indexOf("?");if(k!==-1?(this.search=C.substr(k),this.query=C.substr(k+1),_&&(this.query=A.parse(this.query)),C=C.slice(0,k)):_&&(this.search="",this.query={}),C&&(this.pathname=C),S[G]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var T=this.pathname||"",F=this.search||"";this.path=T+F}return this.href=this.format(),this};function B(l){return d.isString(l)&&(l=P(l)),l instanceof p?l.format():p.prototype.format.call(l)}p.prototype.format=function(){var l=this.auth||"";l&&(l=encodeURIComponent(l),l=l.replace(/%3A/i,":"),l+="@");var _=this.protocol||"",b=this.pathname||"",j=this.hash||"",V=!1,H="";this.host?V=l+this.host:this.hostname&&(V=l+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(V+=":"+this.port)),this.query&&d.isObject(this.query)&&Object.keys(this.query).length&&(H=A.stringify(this.query));var Y=this.search||H&&"?"+H||"";return _&&_.substr(-1)!==":"&&(_+=":"),this.slashes||(!_||S[_])&&V!==!1?(V="//"+(V||""),b&&b.charAt(0)!=="/"&&(b="/"+b)):V||(V=""),j&&j.charAt(0)!=="#"&&(j="#"+j),Y&&Y.charAt(0)!=="?"&&(Y="?"+Y),b=b.replace(/[?#]/g,function(C){return encodeURIComponent(C)}),Y=Y.replace("#","%23"),_+V+b+Y+j};function R(l,_){return P(l,!1,!0).resolve(_)}p.prototype.resolve=function(l){return this.resolveObject(P(l,!1,!0)).format()};function W(l,_){return l?P(l,!1,!0).resolveObject(_):_}p.prototype.resolveObject=function(l){if(d.isString(l)){var _=new p;_.parse(l,!1,!0),l=_}for(var b=new p,j=Object.keys(this),V=0;V<j.length;V++){var H=j[V];b[H]=this[H]}if(b.hash=l.hash,l.href==="")return b.href=b.format(),b;if(l.slashes&&!l.protocol){for(var Y=Object.keys(l),C=0;C<Y.length;C++){var I=Y[C];I!=="protocol"&&(b[I]=l[I])}return S[b.protocol]&&b.hostname&&!b.pathname&&(b.path=b.pathname="/"),b.href=b.format(),b}if(l.protocol&&l.protocol!==b.protocol){if(!S[l.protocol]){for(var D=Object.keys(l),G=0;G<D.length;G++){var se=D[G];b[se]=l[se]}return b.href=b.format(),b}if(b.protocol=l.protocol,!l.host&&!g[l.protocol]){for(var q=(l.pathname||"").split("/");q.length&&!(l.host=q.shift()););l.host||(l.host=""),l.hostname||(l.hostname=""),q[0]!==""&&q.unshift(""),q.length<2&&q.unshift(""),b.pathname=q.join("/")}else b.pathname=l.pathname;if(b.search=l.search,b.query=l.query,b.host=l.host||"",b.auth=l.auth,b.hostname=l.hostname||l.host,b.port=l.port,b.pathname||b.search){var ie=b.pathname||"",K=b.search||"";b.path=ie+K}return b.slashes=b.slashes||l.slashes,b.href=b.format(),b}var Q=b.pathname&&b.pathname.charAt(0)==="/",ne=l.host||l.pathname&&l.pathname.charAt(0)==="/",te=ne||Q||b.host&&l.pathname,le=te,oe=b.pathname&&b.pathname.split("/")||[],q=l.pathname&&l.pathname.split("/")||[],N=b.protocol&&!S[b.protocol];if(N&&(b.hostname="",b.port=null,b.host&&(oe[0]===""?oe[0]=b.host:oe.unshift(b.host)),b.host="",l.protocol&&(l.hostname=null,l.port=null,l.host&&(q[0]===""?q[0]=l.host:q.unshift(l.host)),l.host=null),te=te&&(q[0]===""||oe[0]==="")),ne)b.host=l.host||l.host===""?l.host:b.host,b.hostname=l.hostname||l.hostname===""?l.hostname:b.hostname,b.search=l.search,b.query=l.query,oe=q;else if(q.length)oe||(oe=[]),oe.pop(),oe=oe.concat(q),b.search=l.search,b.query=l.query;else if(!d.isNullOrUndefined(l.search)){if(N){b.hostname=b.host=oe.shift();var J=b.host&&b.host.indexOf("@")>0?b.host.split("@"):!1;J&&(b.auth=J.shift(),b.host=b.hostname=J.shift())}return b.search=l.search,b.query=l.query,(!d.isNull(b.pathname)||!d.isNull(b.search))&&(b.path=(b.pathname?b.pathname:"")+(b.search?b.search:"")),b.href=b.format(),b}if(!oe.length)return b.pathname=null,b.search?b.path="/"+b.search:b.path=null,b.href=b.format(),b;for(var O=oe.slice(-1)[0],M=(b.host||l.host||oe.length>1)&&(O==="."||O==="..")||O==="",z=0,$=oe.length;$>=0;$--)O=oe[$],O==="."?oe.splice($,1):O===".."?(oe.splice($,1),z++):z&&(oe.splice($,1),z--);if(!te&&!le)for(;z--;z)oe.unshift("..");te&&oe[0]!==""&&(!oe[0]||oe[0].charAt(0)!=="/")&&oe.unshift(""),M&&oe.join("/").substr(-1)!=="/"&&oe.push("");var Z=oe[0]===""||oe[0]&&oe[0].charAt(0)==="/";if(N){b.hostname=b.host=Z?"":oe.length?oe.shift():"";var J=b.host&&b.host.indexOf("@")>0?b.host.split("@"):!1;J&&(b.auth=J.shift(),b.host=b.hostname=J.shift())}return te=te||b.host&&oe.length,te&&!Z&&oe.unshift(""),oe.length?b.pathname=oe.join("/"):(b.pathname=null,b.path=null),(!d.isNull(b.pathname)||!d.isNull(b.search))&&(b.path=(b.pathname?b.pathname:"")+(b.search?b.search:"")),b.auth=l.auth||b.auth,b.slashes=b.slashes||l.slashes,b.href=b.format(),b},p.prototype.parseHost=function(){var l=this.host,_=s.exec(l);_&&(_=_[0],_!==":"&&(this.port=_.substr(1)),l=l.substr(0,l.length-_.length)),l&&(this.hostname=l)}},{"./util":77,punycode:51,querystring:54}],77:[function(E,U,L){U.exports={isString:function(w){return typeof w=="string"},isObject:function(w){return typeof w=="object"&&w!==null},isNull:function(w){return w===null},isNullOrUndefined:function(w){return w==null}}},{}],78:[function(E,U,L){(function(w){(function(){U.exports=d;function d(h,s){if(p("noDeprecation"))return h;var t=!1;function r(){if(!t){if(p("throwDeprecation"))throw new Error(s);p("traceDeprecation")?console.trace(s):console.warn(s),t=!0}return h.apply(this,arguments)}return r}function p(h){try{if(!w.localStorage)return!1}catch{return!1}var s=w.localStorage[h];return s==null?!1:String(s).toLowerCase()==="true"}}).call(this)}).call(this,typeof ye!="undefined"?ye:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],79:[function(E,U,L){U.exports=w;function w(d,p){if(d&&p)return w(d)(p);if(typeof d!="function")throw new TypeError("need wrapper function");return Object.keys(d).forEach(function(s){h[s]=d[s]}),h;function h(){for(var s=new Array(arguments.length),t=0;t<s.length;t++)s[t]=arguments[t];var r=d.apply(this,s),e=s[s.length-1];return typeof r=="function"&&r!==e&&Object.keys(e).forEach(function(n){r[n]=e[n]}),r}}},{}],80:[function(E,U,L){U.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},{}],81:[function(E,U,L){U.exports=d;var w=Object.prototype.hasOwnProperty;function d(){for(var p={},h=0;h<arguments.length;h++){var s=arguments[h];for(var t in s)w.call(s,t)&&(p[t]=s[t])}return p}},{}],82:[function(E,U,L){U.exports=function(w){w.prototype[Symbol.iterator]=function*(){for(let d=this.head;d;d=d.next)yield d.value}}},{}],83:[function(E,U,L){U.exports=w,w.Node=s,w.create=w;function w(t){var r=this;if(r instanceof w||(r=new w),r.tail=null,r.head=null,r.length=0,t&&typeof t.forEach=="function")t.forEach(function(u){r.push(u)});else if(arguments.length>0)for(var e=0,n=arguments.length;e<n;e++)r.push(arguments[e]);return r}w.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var r=t.next,e=t.prev;return r&&(r.prev=e),e&&(e.next=r),t===this.head&&(this.head=r),t===this.tail&&(this.tail=e),t.list.length--,t.next=null,t.prev=null,t.list=null,r},w.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var r=this.head;t.list=this,t.next=r,r&&(r.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},w.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var r=this.tail;t.list=this,t.prev=r,r&&(r.next=t),this.tail=t,this.head||(this.head=t),this.length++}},w.prototype.push=function(){for(var t=0,r=arguments.length;t<r;t++)p(this,arguments[t]);return this.length},w.prototype.unshift=function(){for(var t=0,r=arguments.length;t<r;t++)h(this,arguments[t]);return this.length},w.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},w.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},w.prototype.forEach=function(t,r){r=r||this;for(var e=this.head,n=0;e!==null;n++)t.call(r,e.value,n,this),e=e.next},w.prototype.forEachReverse=function(t,r){r=r||this;for(var e=this.tail,n=this.length-1;e!==null;n--)t.call(r,e.value,n,this),e=e.prev},w.prototype.get=function(t){for(var r=0,e=this.head;e!==null&&r<t;r++)e=e.next;if(r===t&&e!==null)return e.value},w.prototype.getReverse=function(t){for(var r=0,e=this.tail;e!==null&&r<t;r++)e=e.prev;if(r===t&&e!==null)return e.value},w.prototype.map=function(t,r){r=r||this;for(var e=new w,n=this.head;n!==null;)e.push(t.call(r,n.value,this)),n=n.next;return e},w.prototype.mapReverse=function(t,r){r=r||this;for(var e=new w,n=this.tail;n!==null;)e.push(t.call(r,n.value,this)),n=n.prev;return e},w.prototype.reduce=function(t,r){var e,n=this.head;if(arguments.length>1)e=r;else if(this.head)n=this.head.next,e=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var u=0;n!==null;u++)e=t(e,n.value,u),n=n.next;return e},w.prototype.reduceReverse=function(t,r){var e,n=this.tail;if(arguments.length>1)e=r;else if(this.tail)n=this.tail.prev,e=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var u=this.length-1;n!==null;u--)e=t(e,n.value,u),n=n.prev;return e},w.prototype.toArray=function(){for(var t=new Array(this.length),r=0,e=this.head;e!==null;r++)t[r]=e.value,e=e.next;return t},w.prototype.toArrayReverse=function(){for(var t=new Array(this.length),r=0,e=this.tail;e!==null;r++)t[r]=e.value,e=e.prev;return t},w.prototype.slice=function(t,r){r=r||this.length,r<0&&(r+=this.length),t=t||0,t<0&&(t+=this.length);var e=new w;if(r<t||r<0)return e;t<0&&(t=0),r>this.length&&(r=this.length);for(var n=0,u=this.head;u!==null&&n<t;n++)u=u.next;for(;u!==null&&n<r;n++,u=u.next)e.push(u.value);return e},w.prototype.sliceReverse=function(t,r){r=r||this.length,r<0&&(r+=this.length),t=t||0,t<0&&(t+=this.length);var e=new w;if(r<t||r<0)return e;t<0&&(t=0),r>this.length&&(r=this.length);for(var n=this.length,u=this.tail;u!==null&&n>r;n--)u=u.prev;for(;u!==null&&n>t;n--,u=u.prev)e.push(u.value);return e},w.prototype.splice=function(t,r,...e){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,u=this.head;u!==null&&n<t;n++)u=u.next;for(var o=[],n=0;u&&n<r;n++)o.push(u.value),u=this.removeNode(u);u===null&&(u=this.tail),u!==this.head&&u!==this.tail&&(u=u.prev);for(var n=0;n<e.length;n++)u=d(this,u,e[n]);return o},w.prototype.reverse=function(){for(var t=this.head,r=this.tail,e=t;e!==null;e=e.prev){var n=e.prev;e.prev=e.next,e.next=n}return this.head=r,this.tail=t,this};function d(t,r,e){var n=r===t.head?new s(e,null,r,t):new s(e,r,r.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function p(t,r){t.tail=new s(r,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function h(t,r){t.head=new s(r,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function s(t,r,e,n){if(!(this instanceof s))return new s(t,r,e,n);this.list=n,this.value=t,r?(r.next=this,this.prev=r):this.prev=null,e?(e.prev=this,this.next=e):this.next=null}try{E("./iterator.js")(w)}catch{}},{"./iterator.js":82}]},{},[12])(12)})})(Oe);var it=nt(Oe.exports);const _e={},ot=(X,ae,E,U)=>{const L=_e[X];if(L)for(const[w,d]of L)Ee.eq(w,ae)&&d&&d.length&&d.forEach(p=>{try{p.callback(ae,E,U)}catch(h){Ee.debug().error({topic:ae,vm:p.vm,error:h})}})},Le=async(X,ae,E="none")=>{const U=_e[X];if(U){const L=U.get(ae);if(L&&L.length){const w=[];for(let d=L.length-1;d>=0;d-=1)L[d].vm===E&&w.push(d);w.length&&(w.forEach(d=>L.splice(d,1)),L.length>0?U.set(ae,L):U.delete(ae))}}},st=async(X,ae,E,U="none")=>{var L;let w=_e[X];w||(_e[X]=new Map,w=_e[X]),await Le(X,ae,U),w.has(ae)||w.set(ae,[]),(L=w.get(ae))==null||L.push({callback:E,vm:U})},at=async X=>{const ae=_e[X];ae&&ae.clear()},Be=()=>({runEvent:ot,unRegisterEvent:Le,registerEvent:st,clearEvent:at}),Se=Be(),pe={},Ae={},xe={},Ue=X=>(Ae[X]||(Ae[X]=[]),Ae[X]),je=X=>(xe[X]||(xe[X]=[]),xe[X]),lt=X=>{var ae;return!!((ae=pe[X])!=null&&ae.connected)},Ne=async(X,ae,E=1,U={qos:1,nl:!1,rap:!1,rh:0,properties:{}},L)=>{var w,d;U.qos=E,pe[X]==null||!((w=pe[X])!=null&&w.connected)?je(X).push({topicArray:ae,qos:E,opts:U,callback:L}):(d=pe[X])==null||d.subscribe(ae,U,L)},ft=async(X,ae,E={},U)=>{var L,w;U?(L=pe[X])==null||L.unsubscribe(ae,E,U):(w=pe[X])==null||w.unsubscribe(ae,E,()=>{})},De=async(X,ae,E,U=0,L={qos:0,retain:!1,dup:!1,properties:{}},w)=>{var d;L.qos=U,pe[X]==null||!((d=pe[X])!=null&&d.connected)?Ue(X).push({topic:ae,message:E,qos:U,opts:L,callback:w}):pe[X].publish(ae,E,L,w)},ut=async X=>{var ae;(ae=pe[X])==null||ae.on("error",E=>{var U;(U=pe[X])==null||U.end(),Se.runEvent(X,"on-connect-fail",String(E))})},ct=async X=>{var ae;(ae=pe[X])==null||ae.on("message",(E,U,L)=>{U&&Se.runEvent(X,E,U,L)})},ht=async(X,ae)=>{var E;(E=pe[X])==null||E.on("connect",()=>{const U=je(X);U.forEach(({topicArray:w,qos:d,opts:p,callback:h})=>Ne(X,w,d,p,h)),U.length=0;const L=Ue(X);L.forEach(({topic:w,message:d,qos:p,opts:h,callback:s})=>De(X,w,d,p,h,s)),L.length=0,Se.runEvent(X,"on-connect","")})},pt=async X=>{var ae;(ae=pe[X])==null||ae.on("reconnect",()=>{var E,U;Ee.debug().log("try to reconnect:",(U=(E=pe[X])==null?void 0:E.options)==null?void 0:U.hostname),Se.runEvent(X,"on-reconnect","")})},dt=async X=>{var ae;(ae=pe[X])==null||ae.on("end",()=>{Se.runEvent(X,"on-disconnect","")})},Ie=async X=>{const ae=pe[X];ae==null||ae.end(),delete pe[X]},Fe=async(X,ae,E)=>{pe[X]&&await Ie(X),pe[X]=it.connect(ae,E),ht(X),ct(X),pt(X),dt(X),ut(X)},yt=async(X,ae,E)=>{Ie(X),Fe(X,ae,E)},vt=async()=>Object.keys(pe),gt=()=>({isConnected:lt,connect:Fe,disconnect:Ie,reconnect:yt,subscribe:Ne,unSubscribe:ft,publish:De,showAllClient:vt}),bt=()=>gt(),we=bt(),Re=Be(),wt=X=>(X||(X="default"),we.isConnected(X)),ze=async(X,ae,E,U,L)=>(ae||(ae=1),E||(E={qos:ae,nl:!1,rap:!1,rh:0,properties:{}}),U||(U=()=>{}),L||(L="default"),we.subscribe(L,X,ae,E,U)),Ve=async(X,ae,E,U)=>(ae||(ae={}),E||(E=()=>{}),U||(U="default"),we.unSubscribe(U,X,ae,E)),mt=async(X,ae,E,U,L,w)=>(E||(E=0),U||(U={qos:E,retain:!1,dup:!1,properties:{}}),L||(L=()=>{}),w||(w="default"),we.publish(w,X,ae,E,U,L)),qe=async X=>(X||(X="default"),we.disconnect(X)),He=async(X,ae,E)=>(E||(E="default"),we.connect(E,X,ae)),We=async(X,ae,E)=>(E||(E="default"),we.reconnect(E,X,ae)),_t=async()=>we.showAllClient(),Ke=async(X,ae="none",E)=>{E||(E="default"),Re.unRegisterEvent(E,X,ae)},Qe=async(X,ae,E="none",U)=>{U||(U="default"),Re.registerEvent(U,X,ae,E)},$e=async X=>{X||(X="default"),Re.clearEvent(X)},Et=async()=>{const X=Ee.eq("+/test/#","1/test/erw/2342");return We("wss://broker.emqx.io:8084",{clean:!1,keepalive:60,clientId:`mqtt_client_${Math.random().toString(16).substring(2,10)}`,path:"/mqtt",connectTimeout:4e3}),ze(["mqtt-vue-hook/test","mqtt-vue-hook/test2"]),Qe("mqtt-vue-hook/test",(ae,E)=>{Ee.debug().log(ae,E.toString())}),Ve("mqtt-vue-hook/test2"),Ke("mqtt-vue-hook/test"),$e(),qe(),X},St=()=>({isConnected:wt,connect:He,disconnect:qe,reconnect:We,subscribe:ze,unSubscribe:Ve,publish:mt,showAllClient:_t,registerEvent:Qe,unRegisterEvent:Ke,clearEvent:$e,test:Et});var Tt={install:async(X,ae,E)=>{await He(ae,E)}};const Ct=()=>St();export{Tt as m,Ct as u};
