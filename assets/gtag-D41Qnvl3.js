import{n as h,l as B}from"./index-BUcyIGrT.js";const G=(e,n={})=>new Promise((a,t)=>{if(typeof document>"u")return;const r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("script");if(i.async=!0,i.src=e,i.defer=n.defer,n.preconnectOrigin){const o=document.createElement("link");o.href=n.preconnectOrigin,o.rel="preconnect",r.appendChild(o)}r.appendChild(i),i.onload=a,i.onerror=t}),d=e=>typeof e=="function",u=e=>e&&typeof e=="object"&&!Array.isArray(e),g=(e,...n)=>{if(!n.length)return e;const a=n.shift();if(!(!u(e)||!u(a))){for(const t in a)u(a[t])?(e[t]||Object.assign(e,{[t]:{}}),g(e[t],a[t])):Object.assign(e,{[t]:a[t]});return g(e,...n)}},p=()=>!(typeof window>"u"||typeof document>"u"),y=(e,n=!0)=>{},$=(e={})=>(y('Missing "appName" property inside the plugin options.',e.app_name==null),y('Missing "name" property in the route.',e.screen_name==null),e);function D(e="",n=""){const a=e.split("/"),t=n.split("/");return a[0]===""&&n[n.length-1]==="/"&&a.shift(),t.join("/")+a.join("/")}const M=()=>({bootstrap:!0,onReady:null,onError:null,onBeforeTrack:null,onAfterTrack:null,pageTrackerTemplate:null,customResourceURL:"https://www.googletagmanager.com/gtag/js",customPreconnectOrigin:"https://www.googletagmanager.com",deferScriptLoad:!1,pageTrackerExcludedRoutes:[],pageTrackerEnabled:!0,enabled:!0,disableScriptLoad:!1,pageTrackerScreenviewEnabled:!1,appName:null,pageTrackerUseFullPath:!1,pageTrackerPrependBase:!0,pageTrackerSkipSamePath:!0,globalDataLayerName:"dataLayer",globalObjectName:"gtag",defaultGroupName:"default",includes:null,config:{id:null,params:{send_page_view:!1}}});let v={};const U=(e={})=>{const n=M();v=g(n,e)},c=()=>v,l=(...e)=>{const{globalObjectName:n}=c();!p()||typeof window[n]>"u"||window[n](...e)},f=(...e)=>{const{config:n,includes:a}=c();if(l("config",n.id,...e),Array.isArray(a))for(const t of a)l("config",t.id,...e)},b=(e,n)=>{p()&&(window[`ga-disable-${e}`]=n)},N=(e=!0)=>{const{config:n,includes:a}=c();if(b(n.id,e),Array.isArray(a))for(const t of a)b(t.id,e)},O=()=>{N(!0)},C=()=>{N(!1)},s=(e,n={})=>{const{includes:a,defaultGroupName:t}=c();n.send_to==null&&Array.isArray(a)&&a.length&&(n.send_to=a.map(r=>r.id).concat(t)),l("event",e,n)};let j;const F=e=>{j=e},m=()=>j,A=e=>{if(!p())return;let n;if(typeof e=="string")n={page_path:e};else if(e.path||e.fullPath){const{pageTrackerUseFullPath:a,pageTrackerPrependBase:t}=c(),r=m(),i=r==null?void 0:r.options.base,o=a?e.fullPath:e.path;n={...e.name&&{page_title:e.name},page_path:t?D(o,i):o}}else n=e;n.page_location==null&&(n.page_location=window.location.href),n.send_page_view==null&&(n.send_page_view=!0),s("page_view",n)},P=e=>{const{appName:n}=c();if(!e)return;let a;typeof e=="string"?a={screen_name:e}:a=e,a.app_name=a.app_name||n,s("screen_view",a)},K=(...e)=>{s("exception",...e)},W=e=>{f("linker",e)},q=e=>{s("timing_complete",e)},z=(...e)=>{l("set",...e)},I=(...e)=>{s("refund",...e)},J=e=>{s("purchase",e)},Y=e=>{f({custom_map:e})},H=Object.freeze(Object.defineProperty({__proto__:null,config:f,customMap:Y,event:s,exception:K,linker:W,optIn:C,optOut:O,pageview:A,purchase:J,query:l,refund:I,screenview:P,set:z,time:q},Symbol.toStringTag,{value:"Module"})),Q=e=>{e.config.globalProperties.$gtag=H},_=e=>({send_page_view:!1,...e}),S=()=>{const{config:e,includes:n}=c();if(l("config",e.id,_(e.params)),Array.isArray(n))for(const a of n)l("config",a.id,_(a.params))},k=(e={},n={})=>{const{appName:a,pageTrackerTemplate:t,pageTrackerScreenviewEnabled:r,pageTrackerSkipSamePath:i}=c();if(i&&e.path===n.path)return;let o=e;if(d(t)?o=t(e,n):r&&(o=$({app_name:a,screen_name:e.name})),r){P(o);return}A(o)},T=e=>{const{pageTrackerExcludedRoutes:n}=c();return n.includes(e.path)||n.includes(e.name)},V=()=>{const{onBeforeTrack:e,onAfterTrack:n}=c(),a=m();a.isReady().then(()=>{h().then(()=>{const{currentRoute:t}=a;S(),!T(t.value)&&k(t.value)}),a.afterEach((t,r)=>{h().then(()=>{T(t)||(d(e)&&e(t,r),k(t,r),d(n)&&n(t,r))})})})},X=()=>{if(!p())return;const{enabled:e,globalObjectName:n,globalDataLayerName:a}=c();return window[n]==null&&(window[a]=window[a]||[],window[n]=function(){window[a].push(arguments)}),window[n]("js",new Date),e||O(),window[n]},Z=()=>{const{onReady:e,onError:n,globalObjectName:a,globalDataLayerName:t,config:r,customResourceURL:i,customPreconnectOrigin:o,deferScriptLoad:E,pageTrackerEnabled:L,disableScriptLoad:R}=c(),x=!!(L&&m());if(X(),x?V():S(),!R)return G(`${i}?id=${r.id}&l=${t}`,{preconnectOrigin:o,defer:E}).then(()=>{e&&e(window[a])}).catch(w=>(n&&n(w),w))},ee=(e,n,a)=>{Q(e),U(n),F(a),c().bootstrap&&Z()},ae=B(async({app:e,router:n})=>{console.log("GTAG"),e.use(ee,{config:{id:"G-WJ62YKWKS1"}},n)});export{ae as default};
